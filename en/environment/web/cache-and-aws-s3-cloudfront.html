<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/><link rel="preconnect" href="https://www.googletagmanager.com/"/><link rel="preconnect" href="https://pagead2.googlesyndication.com/"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="google-site-verification" content="rHTd8BRbOeSqAskkyVusn529XiwZ2eHbv1tnB1IDnjA"/><link rel="apple-touch-icon" sizes="57x57" href="/en/assets/favicon/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/en/assets/favicon/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/en/assets/favicon/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/en/assets/favicon/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/en/assets/favicon/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/en/assets/favicon/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/en/assets/favicon/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/en/assets/favicon/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/en/assets/favicon/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/en/assets/favicon/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/en/assets/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/en/assets/favicon/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/en/assets/favicon/favicon-16x16.png"/><link rel="manifest" href="/en/assets/favicon/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/assets/favicon/ms-icon-144x144.png"/><meta name="theme-color" content="#ffffff"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="DeKu blog"/><link rel="apple-touch-icon" href="/en/assets/favicon/android-icon-144x144.png"/><meta name="twitter:title" content="Web Cache and AWS S3, CloudFront"/><meta name="twitter:description" content="Let's see what cache is in web development and how to apply cache when providing web services with static files using AWS S3 and CloudFront."/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@DevYakuza"/><meta name="twitter:creator" content="@DevYakuza"/><title>Web Cache and AWS S3, CloudFront - Let's see what cache is in web development and how to apply cache when providing web services with static files using AWS S3 and CloudFront.</title><meta name="description" content="Let&#39;s see what cache is in web development and how to apply cache when providing web services with static files using AWS S3 and CloudFront."/><meta http-equiv="Content-Language" content="en"><link rel="alternate" hreflang="ja" href="https://deku.posstree.com/environment/web/cache-and-aws-s3-cloudfront"/><link rel="alternate" hreflang="ko" href="https://deku.posstree.com/ko/environment/web/cache-and-aws-s3-cloudfront"/><link rel="alternate" hreflang="en" href="https://deku.posstree.com/en/environment/web/cache-and-aws-s3-cloudfront"/><meta property="og:url" content="https://deku.posstree.com/en/environment/web/cache-and-aws-s3-cloudfront"/><meta name="generator" content="Jekyll v3.9.5"/><meta property="og:title" content="Web Cache and AWS S3, CloudFront"/><meta name="author" content="dev.yakuza@gmail.com"/><meta property="og:locale" content="en"/><meta name="description" content="Let’s see what cache is in web development and how to apply cache when providing web services with static files using AWS S3 and CloudFront."/><meta property="og:description" content="Let’s see what cache is in web development and how to apply cache when providing web services with static files using AWS S3 and CloudFront."/><link rel="canonical" href="https://deku.posstree.com/en/environment/web/cache-and-aws-s3-cloudfront"/><meta property="og:url" content="https://deku.posstree.com/environment/web/cache-and-aws-s3-cloudfront"/><meta property="og:site_name" content="Deku"/><meta property="og:image" content="https://deku.posstree.com/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/background.jpg"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-08-15T00:00:00+09:00"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="https://deku.posstree.com/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/background.jpg"/><meta property="twitter:title" content="Web Cache and AWS S3, CloudFront"/><script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"dev.yakuza@gmail.com"},"dateModified":"2024-08-21T12:10:16+09:00","datePublished":"2024-08-15T00:00:00+09:00","description":"Let’s see what cache is in web development and how to apply cache when providing web services with static files using AWS S3 and CloudFront.","headline":"Web Cache and AWS S3, CloudFront","image":"https://deku.posstree.com/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/background.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://deku.posstree.com/environment/web/cache-and-aws-s3-cloudfront"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://deku.posstree.com/assets/images/icon.jpg"},"name":"dev.yakuza@gmail.com"},"url":"https://deku.posstree.com/environment/web/cache-and-aws-s3-cloudfront"}</script><link href="https://www.googletagmanager.com/gtag/js?id=UA-125408913-1" rel="preload" as="script"/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125408913-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-125408913-1");</script><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Noto+Sans"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans"/><link rel="preload" as="style" href="/en/assets/vendor/bootstrap/css/bootstrap.min.css"/><link rel="stylesheet" href="/en/assets/vendor/bootstrap/css/bootstrap.min.css"/><link rel="preload" as="style" href="/en/assets/vendor/font-awesome/css/font-awesome.min.css"/><link rel="stylesheet" href="/en/assets/vendor/font-awesome/css/font-awesome.min.css"/><link rel="preload" as="style" href="/en/assets/main.css?v=20241031"/><link rel="stylesheet" href="/en/assets/main.css?v=20241031"/><link rel="alternate" type="application/rss+xml" title="Deku" href="/en/feed.xml"/><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "dev.yakuza",
      "url": "https://deku.posstree.com/",
      "sameAs": [
        "https://www.facebook.com/yakuza.dev.54",
        "https://www.instagram.com/dev_yakuza/",
        "https://twitter.com/DevYakuza"
      ]
    }
  </script><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://deku.posstree.com/",
      "logo": "https://deku.posstree.com/assets/images/icon.jpg"
    }
  </script><script type="application/ld+json">
    {
      "@context":"http://schema.org",
      "@type":"ItemList",
      "itemListElement":[{
          "@type":"ListItem",
          "name": "vagrant installation and usage",
          "description" : "let's see how to install virtualbox, vagrant to create virtual machine in virtual environment and how to usage vagrant to create virtual machine.",
          "position":1,"url": "https://deku.posstree.com/en/environment/vagrant-install-and-usage/",
          "item": "https://deku.posstree.com/en/environment/vagrant-install-and-usage/"},{
          "@type":"ListItem",
          "name": "Ansible installation",
          "description" : "make the environment can be used Ansible by installing Ansible on virtual machine(guest system) created by Vagrant",
          "position":2,"url": "https://deku.posstree.com/en/environment/install-ansible/",
          "item": "https://deku.posstree.com/en/environment/install-ansible/"},{
          "@type":"ListItem",
          "name": "Ansible Playbook",
          "description" : "let's try to use Ansible Playbook to install server programs and to configure the server.",
          "position":3,"url": "https://deku.posstree.com/en/environment/ansible-playbook/",
          "item": "https://deku.posstree.com/en/environment/ansible-playbook/"},{
          "@type":"ListItem",
          "name": "Ansible&Docker",
          "description" : "let's install Docker and Docker Compose on vagrant virtual machine(guest system) by Ansible Playbook.",
          "position":4,"url": "https://deku.posstree.com/en/environment/ansible-docker/",
          "item": "https://deku.posstree.com/en/environment/ansible-docker/"},{
          "@type":"ListItem",
          "name": "Ansible&Laradock",
          "description" : "let's make Laravel development environment by using virtual machine(guest system) created by vagrant and Ansible.",
          "position":5,"url": "https://deku.posstree.com/en/environment/ansible-laradock/",
          "item": "https://deku.posstree.com/en/environment/ansible-laradock/"},{
          "@type":"ListItem",
          "name": "Ansible&Laravel",
          "description" : "let's make development environment by installing Laravel on virtual machine(guest system) that is configured by Ansible and Laradock.",
          "position":6,"url": "https://deku.posstree.com/en/environment/ansible-laravel/",
          "item": "https://deku.posstree.com/en/environment/ansible-laravel/"},{
          "@type":"ListItem",
          "name": "ngrok",
          "description" : "let's see how to access virtual machine(Guest System) from external environment by ngrok.",
          "position":7,"url": "https://deku.posstree.com/en/environment/ngrok/",
          "item": "https://deku.posstree.com/en/environment/ngrok/"},{
          "@type":"ListItem",
          "name": "Development Environment on Mac(1) - iTerm & zsh",
          "description" : "I try to set the development environment on new Mac. in here, I'll introduce how to configure iTerm and zsh for Terminal on new Mac.",
          "position":8,"url": "https://deku.posstree.com/en/environment/mac-iterm-zsh/",
          "item": "https://deku.posstree.com/en/environment/mac-iterm-zsh/"},{
          "@type":"ListItem",
          "name": "Development Environment on Mac(2) - for tools",
          "description" : "now I'm configuring the development environment on new Mac. in here, I'll introduce the tools that I use when I develop.",
          "position":9,"url": "https://deku.posstree.com/en/environment/mac-development-tools/",
          "item": "https://deku.posstree.com/en/environment/mac-development-tools/"},{
          "@type":"ListItem",
          "name": "Development Environment on Mac(3) - for development",
          "description" : "I'm setting the development environment on new Mac. in here, I'll introduce how to configure the development environment what I use.",
          "position":10,"url": "https://deku.posstree.com/en/environment/mac-development-environment/",
          "item": "https://deku.posstree.com/en/environment/mac-development-environment/"},{
          "@type":"ListItem",
          "name": "Configure automatically development environment on Mac via Homebrew and Shell Script",
          "description" : "Let's see how to configure automatically development environment on Mac via Homebrew and Shell Script. and then Let's see how to use Brewfile and Shell script on new Mac for configuring the development environment.",
          "position":11,"url": "https://deku.posstree.com/en/environment/configure-development-environment-on-mac-with-homebrew-and-shell-script/",
          "item": "https://deku.posstree.com/en/environment/configure-development-environment-on-mac-with-homebrew-and-shell-script/"},{
          "@type":"ListItem",
          "name": "(macOS) Manage Node versions via NVM",
          "description" : "Let's see how to install NVM(Node Version Manager) on macOS and how to manage Node versions.",
          "position":12,"url": "https://deku.posstree.com/en/environment/nvm/",
          "item": "https://deku.posstree.com/en/environment/nvm/"},{
          "@type":"ListItem",
          "name": "Manage Python version by pyenv",
          "description" : "Let's see how to use pyenv to use various Python versions on the same machine.",
          "position":13,"url": "https://deku.posstree.com/en/environment/pyenv/",
          "item": "https://deku.posstree.com/en/environment/pyenv/"},{
          "@type":"ListItem",
          "name": "[Project Management] Repository Strategy",
          "description" : "Let's see the repository strategies like Monolith, Multi Repo, and Monorepo for managing projects.",
          "position":14,"url": "https://deku.posstree.com/en/environment/repository_strategy/",
          "item": "https://deku.posstree.com/en/environment/repository_strategy/"},{
          "@type":"ListItem",
          "name": "[JavaScript] Tools for Monorepo",
          "description" : "Let's see what tools are needed to use Monorepo in a project developed in JavaScript.",
          "position":15,"url": "https://deku.posstree.com/en/environment/monorepo/tools/",
          "item": "https://deku.posstree.com/en/environment/monorepo/tools/"},{
          "@type":"ListItem",
          "name": "[Monorepo] Node JS module resolution",
          "description" : "I will explain how NodeJS loads modules as basic knowledge to understand Monorepo.",
          "position":16,"url": "https://deku.posstree.com/en/environment/monorepo/module-resolutions/",
          "item": "https://deku.posstree.com/en/environment/monorepo/module-resolutions/"},{
          "@type":"ListItem",
          "name": "[Monoepo] Symlink",
          "description" : "Let's see what Symlink (Symbolic Link) is, which is the basic knowledge for using Monorepo in a project developed in JavaScript.",
          "position":17,"url": "https://deku.posstree.com/en/environment/monorepo/symlink/",
          "item": "https://deku.posstree.com/en/environment/monorepo/symlink/"},{
          "@type":"ListItem",
          "name": "[Monoepo] Yarn Workspaces",
          "description" : "Let's see how to use Yarn's Workspaces to set up a monorepo for a project developed in JavaScript.",
          "position":18,"url": "https://deku.posstree.com/en/environment/monorepo/yarn_workspaces/",
          "item": "https://deku.posstree.com/en/environment/monorepo/yarn_workspaces/"},{
          "@type":"ListItem",
          "name": "[Monoepo] Dependency Hoisting of Yarn Workspaces",
          "description" : "Let's see how Hoisting works when adding dependencies to each project when configuring a Monorepo using Yarn's Workspaces.",
          "position":19,"url": "https://deku.posstree.com/en/environment/monorepo/yarn_workspaces/hoisting/",
          "item": "https://deku.posstree.com/en/environment/monorepo/yarn_workspaces/hoisting/"},{
          "@type":"ListItem",
          "name": "[Monoepo] Yarn Workspaces command",
          "description" : "Let's see how to execute the commands set in the scripts of each project in a monorepo configured using Yarn's Workspaces.",
          "position":20,"url": "https://deku.posstree.com/en/environment/monorepo/yarn_workspaces/command/",
          "item": "https://deku.posstree.com/en/environment/monorepo/yarn_workspaces/command/"},{
          "@type":"ListItem",
          "name": "[Monoepo] Creating a Monorepo with PnpM",
          "description" : "Let's see how to create a monorepo using PnpM, one of the NodeJS package managers.",
          "position":21,"url": "https://deku.posstree.com/en/environment/monorepo/pnpm/",
          "item": "https://deku.posstree.com/en/environment/monorepo/pnpm/"},{
          "@type":"ListItem",
          "name": "Branch Strategy for Software Development",
          "description" : "Let's see the types and usage of branch strategies for software development.",
          "position":22,"url": "https://deku.posstree.com/en/environment/branch-strategy/",
          "item": "https://deku.posstree.com/en/environment/branch-strategy/"},{
          "@type":"ListItem",
          "name": "Software Development Deployment Strategy",
          "description" : "Let's see the types and usage of service deployment strategies in software development.",
          "position":23,"url": "https://deku.posstree.com/en/environment/deployment-strategy/",
          "item": "https://deku.posstree.com/en/environment/deployment-strategy/"},{
          "@type":"ListItem",
          "name": "Web Cache and AWS S3, CloudFront",
          "description" : "Let's see what cache is in web development and how to apply cache when providing web services with static files using AWS S3 and CloudFront.",
          "position":24,"url": "https://deku.posstree.com/en/environment/web/cache-and-aws-s3-cloudfront",
          "item": "https://deku.posstree.com/en/environment/web/cache-and-aws-s3-cloudfront"},{
          "@type":"ListItem",
          "name": "Hide VSCode Incoming/Outgoing changes graph",
          "description" : "Let's see how to hide the Git Incoming/Outgoing changes graph feature newly added to VSCode in July 2024.",
          "position":25,"url": "https://deku.posstree.com/en/environment/vscode/incoming-outgoing-changes-graph",
          "item": "https://deku.posstree.com/en/environment/vscode/incoming-outgoing-changes-graph"},{
          "@type":"ListItem",
          "name": "ESLint Configuration for Monorepo in VSCode",
          "description" : "Let's see how to configure ESLint in VSCode when developing Monorepo projects.",
          "position":26,"url": "https://deku.posstree.com/en/environment/vscode/eslint-configuration-for-monorepo",
          "item": "https://deku.posstree.com/en/environment/vscode/eslint-configuration-for-monorepo"}]
    }
  </script><link rel="preload" as="style" href="/en/assets/highlight/railscasts.css"/><link rel="stylesheet" href="/en/assets/highlight/railscasts.css"/><script async src="/assets//vendor/lazysizes/lazysizes.min.js" async></script><link href="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" rel="preload" as="script"/><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav"><div class="container"><a class="navbar-brand" href="/en/"><img src="/assets/images/deku.svg" alt="[DeKu] DevYakuza blog logo"/><span class="name">DeKu</span></a><div class="navbar-menu-container"><div class="collapse navbar-collapse"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/en/">Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/en/clog/">Clog</a><a class="dropdown-item" href="/en/ildangongbu/">일단공부(Il-Dan-Gong-Bu)</a><a class="dropdown-item" href="/en/vue/">Vue</a><a class="dropdown-item" href="/en/code_quality/">Code Quality</a><a class="dropdown-item" href="/en/git/">git</a><a class="dropdown-item" href="/en/books/">Writing Books</a><a class="dropdown-item" href="/en/environment/">dev environment</a><a class="dropdown-item" href="/en/share/">Share</a><a class="dropdown-item" href="/en/flutter/">Flutter</a><a class="dropdown-item" href="/en/tensorflow/">TensorFlow</a><a class="dropdown-item" href="/en/github_actions/">GitHub Actions</a><a class="dropdown-item" href="/en/golang/">Golang</a><a class="dropdown-item" href="/en/ruby/">Ruby</a><a class="dropdown-item" href="/en/jest/">Jest</a><a class="dropdown-item" href="/en/kumoncho/">kumoncho</a><a class="dropdown-item" href="/en/blaboo/">BlaBoo</a><a class="dropdown-item" href="/en/jekyll/">jekyll blog</a><a class="dropdown-item" href="/en/essay/">Essay</a><a class="dropdown-item" href="/en/react/">React</a><a class="dropdown-item" href="/en/web/">Knowledge about Web</a><a class="dropdown-item" href="/en/django/">django</a><a class="dropdown-item" href="/en/react-native/">React Native</a><a class="dropdown-item" href="/en/laravel/">Laravel</a><a class="dropdown-item" href="/en/kubernetes/">Kubernetes</a><a class="dropdown-item" href="/en/ruby-on-rails/">Ruby on Rails</a></div></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href=" /app/list/en/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/en/contact/">Contact</a></li></ul></div><div class="btn-group-sm btn-translate-group dropdown"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="change language button"><i class="fa fa-language" aria-hidden="true"></i></button><div class="dropdown-menu"><a class="dropdown-item menu-ko" href="/ko/environment/web/cache-and-aws-s3-cloudfront">한국어</a><a class="dropdown-item menu-en" href="/en/environment/web/cache-and-aws-s3-cloudfront">English</a><a class="dropdown-item menu-ja" href="/en/environment/web/cache-and-aws-s3-cloudfront">日本語</a></div></div><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"> Menu <i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/en/">Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/en/clog/">Clog</a><a class="dropdown-item" href="/en/ildangongbu/">일단공부(Il-Dan-Gong-Bu)</a><a class="dropdown-item" href="/en/vue/">Vue</a><a class="dropdown-item" href="/en/code_quality/">Code Quality</a><a class="dropdown-item" href="/en/git/">git</a><a class="dropdown-item" href="/en/books/">Writing Books</a><a class="dropdown-item" href="/en/environment/">dev environment</a><a class="dropdown-item" href="/en/share/">Share</a><a class="dropdown-item" href="/en/flutter/">Flutter</a><a class="dropdown-item" href="/en/tensorflow/">TensorFlow</a><a class="dropdown-item" href="/en/github_actions/">GitHub Actions</a><a class="dropdown-item" href="/en/golang/">Golang</a><a class="dropdown-item" href="/en/ruby/">Ruby</a><a class="dropdown-item" href="/en/jest/">Jest</a><a class="dropdown-item" href="/en/kumoncho/">kumoncho</a><a class="dropdown-item" href="/en/blaboo/">BlaBoo</a><a class="dropdown-item" href="/en/jekyll/">jekyll blog</a><a class="dropdown-item" href="/en/essay/">Essay</a><a class="dropdown-item" href="/en/react/">React</a><a class="dropdown-item" href="/en/web/">Knowledge about Web</a><a class="dropdown-item" href="/en/django/">django</a><a class="dropdown-item" href="/en/react-native/">React Native</a><a class="dropdown-item" href="/en/laravel/">Laravel</a><a class="dropdown-item" href="/en/kubernetes/">Kubernetes</a><a class="dropdown-item" href="/en/ruby-on-rails/">Ruby on Rails</a></div></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href=" /app/list/en/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/en/contact/">Contact</a></li></ul></div></div></nav><script defer>document.addEventListener("DOMContentLoaded",function(){var e=window.location.pathname;e.indexOf("/en/")>=0?($(".menu-ko").prop("href",e.replace("/en/","/ko/")),$(".menu-en").prop("href",e),$(".menu-ja").prop("href",e.replace("/en/","/"))):e.indexOf("/ko/")>=0?($(".menu-ko").prop("href",e),$(".menu-en").prop("href",e.replace("/ko/","/en/")),$(".menu-ja").prop("href",e.replace("/ko/","/"))):($(".menu-ko").prop("href","/ko"+e),$(".menu-en").prop("href","/en"+e),$(".menu-ja").prop("href",e)),$("body").on("show.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$("body").on("hide.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()})});</script><header class="masthead" style="background-image: url('/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/background.jpg')"><div class="overlay"></div><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><div class="post-heading"><h1>Web Cache and AWS S3, CloudFront</h1><div class="heading-date"><i class="fa fa-calendar" aria-hidden="true"></i> 2024-08-21 <img style="width: inherit;" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fdev-yakuza.github.io%2F/environment/web/cache-and-aws-s3-cloudfront&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false" alt="hit count image"/></div><h2 class="subheading">Let's see what cache is in web development and how to apply cache when providing web services with static files using AWS S3 and CloudFront.</h2><div class="sponsor_container"><a href="https://github.com/sponsors/dev-yakuza" target="_blank" rel="noopener" style=" background-color: #e6ebf1; background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%); background-position: -0.5em; color: #24292e; text-decoration: none; border: 1px solid rgba(27, 31, 35, 0.35); padding: 6px 10px; user-select: none; background-repeat: repeat-x; background-position: -1px -1px; background-size: 110% 110%; border: 1px solid rgba(27, 31, 35, 0.2); border-radius: 0.25em; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; white-space: nowrap; vertical-align: middle; font-size: 17px; font-family: 'Lato', sans-serif !important; margin: 10px; display: inline-block; "><svg style="color: #ea4aaa; vertical-align: text-bottom !important;" viewBox="0 0 12 16" version="1.1" width="16" height="20" aria-hidden="true"><path fill-rule="evenodd" d="M8.727 3C7.091 3 6.001 4.65 6.001 4.65S4.909 3 3.273 3C1.636 3 0 4.1 0 6.3 0 9.6 6 14 6 14s6-4.4 6-7.7C12 4.1 10.364 3 8.727 3z"></path></svg> Github Sponsor </a><style> .bmc-button img { width: 27px !important; margin-bottom: 1px !important; border: none !important; vertical-align: middle !important; } .bmc-button { line-height: 36px !important; height: 37px !important; text-decoration: none !important; display: inline-block !important; color: #ffffff !important; background-color: #ff813f !important; border-radius: 3px !important; border: 1px solid transparent !important; padding: 0px 9px !important; font-size: 17px !important; letter-spacing: -0.08px !important; margin: 10px !important; font-family: 'Lato', sans-serif !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; -o-transition: 0.3s all linear !important; -webkit-transition: 0.3s all linear !important; -moz-transition: 0.3s all linear !important; -ms-transition: 0.3s all linear !important; transition: 0.3s all linear !important; } .bmc-button:hover, .bmc-button:active, .bmc-button:focus { -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; text-decoration: none !important; box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; opacity: 0.85 !important; color: #ffffff !important; }</style><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext"/><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"/><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/j0cXhWiza" rel="noopener noreferrer nofollow"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"/><span style="margin-left:5px">Buy me a coffee</span></a></div></div></div></div></div></header><div class="ads-container"><div class="ads-block ads-left"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="3850742490" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-center"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1496496025" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-right"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="3797155229" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="container container-contents"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><nav aria-label="breadcrumb"><ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="/en/"><span itemprop="name">Home</span></a><meta itemprop="position" content="1"/></li><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="/en/environment"><span itemprop="name">environment</span></a><meta itemprop="position" content="2"/></li><li class="breadcrumb-item active" aria-current="page" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="/en/environment/web/cache-and-aws-s3-cloudfront"><span itemprop="name">Web Cache and AWS S3, CloudFront</span></a><meta itemprop="position" content="3"/></li></ol></nav></div></div><div class="row"><div class="col-lg-2 col-md-1 d-none d-lg-block left-ads"><ins class="adsbygoogle sticky-top" style="display:block; padding-top: 80px; margin-bottom: 80px;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1333703444" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><article class="col-lg-8 col-md-10 mx-auto"><div id="contents_list"><h2 id="contents">Contents</h2><ul><li><a href="#contents">Contents</a></li><li><a href="#outline">Outline</a></li><li><a href="#background-of-web-cache">Background of Web Cache</a></li><li><a href="#web-cache">Web Cache</a><ul><li><a href="#cdncontents-delivery-network">CDNContents Delivery Network</a></li><li><a href="#browser-cache">Browser cache</a></li></ul></li><li><a href="#how-web-cache-works">How web cache works</a></li><li><a href="#web-cache-configuration">Web cache configuration</a></li><li><a href="#aws-s3-and-cloudfront">AWS S3 and CloudFront</a></li><li><a href="#aws-s3-cache-settings">AWS S3 Cache Settings</a></li><li><a href="#github-actions">GitHub Actions</a></li><li><a href="#stale-while-revalidate-for-no-downtime-deployment">stale-while-revalidate for no downtime deployment</a></li><li><a href="#completed">Completed</a></li></ul></div><h2 id="outline">Outline</h2><p>In web development, cache plays an important role. By using cache, you can improve the performance of web services and enhance user experience. In this blog post, I will introduce what cache is in web development and how to apply cache when providing web services with static files using AWS S3.</p><h2 id="background-of-web-cache">Background of Web Cache</h2><p>To get data from the server, clients (PCs, smartphones) use the Internet.</p><picture><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/server-client-internet.avif" type="image/avif"/><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/server-client-internet.webp" type="image/webp"/><img src="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/server-client-internet.png" alt="Web cache and S3 - server and client with internet"/></picture><p>The Internet that connects clients and servers is physically connected, and the global Internet is connected by submarine cables.</p><picture><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/submarine-cable.avif" type="image/avif"/><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/submarine-cable.webp" type="image/webp"/><img src="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/submarine-cable.jpg" alt="Web cache and S3 - internet submarine cable"/></picture><p>Clients and servers are physically connected, so it takes time to send and receive data as the distance increases.</p><h2 id="web-cache">Web Cache</h2><p>Web cache is a technology that reduces data transmission delays by copying and placing content, that changes less frequently (static content: HTML, CSS, JS, Image, Video, etc.), from a server that is physically far away to a server that is physically close.</p><picture><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/web-cache.webp" type="image/avif"/><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/web-cache.webp" type="image/webp"/><img src="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/web-cache.webp" alt="Web cache and S3 - web cache"/></picture><p>In web development, there are three main caches.</p><ol><li>CDN(Contents Delivery Network)</li><li>Browser cache</li><li>Database cache</li></ol><picture><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/web-cache-with-browser.avif" type="image/avif"/><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/web-cache-with-browser.webp" type="image/webp"/><img src="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/web-cache-with-browser.png" alt="Web cache and S3 - web cache with browser"/></picture><p>In this blog post, I will introduce CDN and browser cache.</p><h3 id="cdncontents-delivery-network">CDN(Contents Delivery Network)</h3><p>CDN is a service that provides content by copying less frequently changing content to servers in various parts of the world.</p><p>This reduces the distance between the client and the server, reducing the data transmission and reception delay.</p><p>For example, the world-famous CDN service <code class="language-plaintext highlighter-rouge">Cloudflare</code> has servers around the world as follows.</p><picture><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/cloudflare-server-list.avif" type="image/avif"/><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/cloudflare-server-list.webp" type="image/webp"/><img src="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/cloudflare-server-list.png" alt="Web cache and S3 - cloudflare server list"/></picture><p>If you use <code class="language-plaintext highlighter-rouge">Cloudflare</code>, you can copy static files to the server provided by <code class="language-plaintext highlighter-rouge">Cloudflare</code> and provide content from a server close to the client.</p><h3 id="browser-cache">Browser cache</h3><p>On the client’s side, the nearest server is the client itself. The browser provides a browser cache that stores some content in client storage from a site once accessed and allows this stored content to be used when reaccessed.</p><p>The Chrome browser caches content in the following locations.</p><ul><li>Windows: <code class="language-plaintext highlighter-rouge">C:\Users\&lt;User Name&gt;\AppData\Local\Google\Chrome\User Data\Default\Cache</code></li><li>macOS: <code class="language-plaintext highlighter-rouge">/Users/&lt;User Name&gt;/Library/Caches/Google/Chrome/Default/Cache</code></li></ul><div class="in-feed-ads ads-container"><div class="ads-block ads-left"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-center"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="6492035359"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><h2 id="how-web-cache-works">How web cache works</h2><p>Let’s take a look at how web cache works.</p><picture><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/web-cache-with-browser.avif" type="image/avif"/><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/web-cache-with-browser.webp" type="image/webp"/><img src="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/web-cache-with-browser.png" alt="Web cache and S3 - web cache process"/></picture><ol><li>The user accesses the service from the browser.</li><li>The browser checks if there is anything cached in the browser and displays it if there is a cache.</li><li>If there is no cache in the browser, check if there is a cache in the CDN. If there is a cache in the CDN, use it.</li><li>If there is no cache in the CDN, get the content from the actual server.</li><li>At this time, the CDN checks if it needs to cache and caches it if it can.</li><li>If the browser can cache, it caches the content.</li><li>From the next time the user accesses the same content, the browser and CDN use the cached content.</li></ol><h2 id="web-cache-configuration">Web cache configuration</h2><p>How do browsers and CDNs set caches? Browsers and CDNs determine whether to cache based on <code class="language-plaintext highlighter-rouge">Expires</code>, <code class="language-plaintext highlighter-rouge">Cache-Control</code>, <code class="language-plaintext highlighter-rouge">Etag</code>, <code class="language-plaintext highlighter-rouge">Last-Modified</code>, etc. in the HTTP response headers.</p><p>You can set the cache in the HTTP response header as follows.</p><ul><li>Nginx configuration</li></ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server {
    listen 80;
    server_name example.com;

    location / {
        # Set Cache-Control
        add_header Cache-Control "max-age=3600, public";

        # Set Expires
        expires 1h;
    }
}
</code></pre></div></div><ul><li>Web server configuration(NodeJS’s Express example)</li></ul><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Set Cache-Control</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Cache-Control</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">max-age=3600, public</span><span class="dl">'</span><span class="p">);</span>

    <span class="c1">// Set Expires</span>
    <span class="kd">const</span> <span class="nx">maxAgeInSeconds</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setSeconds</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">()</span> <span class="o">+</span> <span class="nx">seconds</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">expiryDate</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toUTCString</span><span class="p">()</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Expires</span><span class="dl">'</span><span class="p">,</span> <span class="nx">expiryDate</span><span class="p">);</span>

    <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Server is running on port 3000</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div><p>If you set the HTTP response header like this, the CDN and the browser will set the cache.</p><div class="in-feed-ads ads-container"><div class="ads-block ads-left"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-center"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="6492035359"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><h2 id="aws-s3-and-cloudfront">AWS S3 and CloudFront</h2><p>You can provide a static website using AWS’s S3 and CloudFront.</p><ul><li>S3(Simple Storage Service): A storage service for storing static files</li><li>CloudFront: CDN service</li></ul><p>AWS S3 is a storage service, but it also provides server functions that can serve web services with static files.</p><p>Typically, static web pages developed with HTML, CSS, JavaScript or web applications developed with frontend frameworks such as React, Vue, Angular, etc., are uploaded to S3 and served through CloudFront.</p><picture><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/aws-s3-cloudfront-cache.avif" type="image/avif"/><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/aws-s3-cloudfront-cache.webp" type="image/webp"/><img src="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/aws-s3-cloudfront-cache.png" alt="Web cache and S3 - AWS S3 and CloudFront cache"/></picture><p>At this time, you can configure the uploaded files settings to set browser cache and CDN(CloudFront) cache.</p><h2 id="aws-s3-cache-settings">AWS S3 Cache Settings</h2><p>The cache is set by setting <code class="language-plaintext highlighter-rouge">Expires</code> or <code class="language-plaintext highlighter-rouge">Cache-Control</code> in the HTTP response header, so basically, it cannot be set on the frontend side.</p><p>In the case of <code class="language-plaintext highlighter-rouge">CloudFront + S3</code>, since there is no server, you cannot add server code to set HTTP headers.</p><p>However, <code class="language-plaintext highlighter-rouge">S3</code> has server functions, so you can configure the cache by changing the S3 settings.</p><p>When uploading files to S3 using the CLI tool provided by AWS, you can use the following command. In this case, you can set the cache using the <code class="language-plaintext highlighter-rouge">--cache-control</code> option.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">cp</span> &lt;Target directory&gt; s3://&lt;S3 Bucket name&gt; <span class="nt">--recursive</span> <span class="nt">--exclude</span> <span class="s2">"assets/*"</span> <span class="nt">--cache-control</span> <span class="s1">'public,max-age=60,stale-while-revalidate=2592000’
</span></code></pre></div></div><ul><li><code class="language-plaintext highlighter-rouge">Target directory</code>: Local folder path where the build result to be uploaded to S3 is located</li><li><code class="language-plaintext highlighter-rouge">S3 Bucket name</code>: S3’s Bucket name where the file will be uploaded</li><li><code class="language-plaintext highlighter-rouge">--recursive</code> option: <code class="language-plaintext highlighter-rouge">aws s3 cp</code> is a command that copies a single file by default, so use the <code class="language-plaintext highlighter-rouge">--recursive</code> option to upload all files in the specified directory</li><li><code class="language-plaintext highlighter-rouge">--exclude "assets/*"</code>: Set the upload exclusion target</li><li><code class="language-plaintext highlighter-rouge">--cache-control 'public,max-age=60,stale-while-revalidate=2592000'</code>: Cache settings</li><li><code class="language-plaintext highlighter-rouge">max-age=60</code>: Cache for 60 seconds</li><li><code class="language-plaintext highlighter-rouge">stale-while-revalidate</code>: If the cache is expired by <code class="language-plaintext highlighter-rouge">max-age</code>, while revalidating the content in the background, provide the expired cache for up to 30 days</li></ul><h2 id="github-actions">GitHub Actions</h2><p>The following is the code to upload files to S3 using <code class="language-plaintext highlighter-rouge">GitHub Actions</code>.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Configure AWS credentials</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s">aws-actions/configure-aws-credentials@v4</span>
  <span class="na">with</span><span class="pi">:</span>
    <span class="na">role-to-assume</span><span class="pi">:</span> <span class="s">$</span>
    <span class="na">aws-region</span><span class="pi">:</span> <span class="s">ap-northeast-1</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Upload file to S3</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">aws s3 rm s3://$ --recursive</span>
    <span class="s">aws s3 cp apps/dist s3://$ --recursive --exclude "assets/*" --cache-control 'public,max-age=60,stale-while-revalidate=2592000'</span>
    <span class="s">aws s3 sync apps/dist/assets s3://$/assets --cache-control 'public,max-age=60,immutable'</span>
</code></pre></div></div><p>After deleting all files using <code class="language-plaintext highlighter-rouge">aws s3 rm</code>, upload files using <code class="language-plaintext highlighter-rouge">aws s3 cp</code>. Finally, upload the <code class="language-plaintext highlighter-rouge">assets</code> folder using <code class="language-plaintext highlighter-rouge">aws s3 sync</code>.</p><h2 id="stale-while-revalidate-for-no-downtime-deployment">stale-while-revalidate for no downtime deployment</h2><p>AWS introduced the usage of <code class="language-plaintext highlighter-rouge">stale-while-revalidate</code> in the following blog post.</p><ul><li><a href="https://aws.amazon.com/jp/blogs/news/networking-and-content-delivery-host-single-page-applications-spa-with-tiered-ttls-on-cloudfront-and-s3/" rel="nofollow noreferrer" target="_blank">https://aws.amazon.com/jp/blogs/news/networking-and-content-delivery-host-single-page-applications-spa-with-tiered-ttls-on-cloudfront-and-s3/</a></li></ul><p>You can update the service version without interruption by using <code class="language-plaintext highlighter-rouge">stale-while-revalidate</code>.</p><picture><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/stale-while-revalidate.avif" type="image/avif"/><source srcset="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/stale-while-revalidate.webp" type="image/webp"/><img src="/assets/images/category/environment/2024/cache-and-aws-s3-cloudfront/stale-while-revalidate.png" alt="Web cache and S3 - stale-while-revalidate option for no downtime deployment"/></picture><ol><li>The user runs the service in the browser.</li><li>If the user is already using the service in V1 and has a cache of V1 with stale-while-revalidate in the browser, it will be used first.</li><li>The browser requests content that has expired(max-age) from CloudFront(CDN) in the background.</li><li>If there is a cache updated to V2 in CloudFront, it will be provided to the browser.</li><li>The browser caches the content received from CloudFront and uses it from the next time.</li><li>If CloudFront’s cache also needs to be updated(max-age), first provide the cache of V1 with stale-while-revalidate to the browser, and then update the cache by fetching content from the actual server in the background.</li></ol><h2 id="completed">Completed</h2><p>Done! We’ve seen what web cache is and how to apply cache when providing web services with static files using AWS S3 and CloudFront.</p><p>I hope this blog post helps you understand web cache and how to apply cache in AWS.</p><div class="sponsor_container"><a href="https://github.com/sponsors/dev-yakuza" target="_blank" rel="noopener" style=" background-color: #e6ebf1; background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%); background-position: -0.5em; color: #24292e; text-decoration: none; border: 1px solid rgba(27, 31, 35, 0.35); padding: 6px 10px; user-select: none; background-repeat: repeat-x; background-position: -1px -1px; background-size: 110% 110%; border: 1px solid rgba(27, 31, 35, 0.2); border-radius: 0.25em; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; white-space: nowrap; vertical-align: middle; font-size: 17px; font-family: 'Lato', sans-serif !important; margin: 10px; display: inline-block; "><svg style="color: #ea4aaa; vertical-align: text-bottom !important;" viewBox="0 0 12 16" version="1.1" width="16" height="20" aria-hidden="true"><path fill-rule="evenodd" d="M8.727 3C7.091 3 6.001 4.65 6.001 4.65S4.909 3 3.273 3C1.636 3 0 4.1 0 6.3 0 9.6 6 14 6 14s6-4.4 6-7.7C12 4.1 10.364 3 8.727 3z"></path></svg> Github Sponsor </a><style> .bmc-button img { width: 27px !important; margin-bottom: 1px !important; border: none !important; vertical-align: middle !important; } .bmc-button { line-height: 36px !important; height: 37px !important; text-decoration: none !important; display: inline-block !important; color: #ffffff !important; background-color: #ff813f !important; border-radius: 3px !important; border: 1px solid transparent !important; padding: 0px 9px !important; font-size: 17px !important; letter-spacing: -0.08px !important; margin: 10px !important; font-family: 'Lato', sans-serif !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; -o-transition: 0.3s all linear !important; -webkit-transition: 0.3s all linear !important; -moz-transition: 0.3s all linear !important; -ms-transition: 0.3s all linear !important; transition: 0.3s all linear !important; } .bmc-button:hover, .bmc-button:active, .bmc-button:focus { -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; text-decoration: none !important; box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; opacity: 0.85 !important; color: #ffffff !important; }</style><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext"/><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"/><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/j0cXhWiza" rel="noopener noreferrer nofollow"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"/><span style="margin-left:5px">Buy me a coffee</span></a></div><p><code class="language-plaintext highlighter-rouge"> Was my blog helpful? Please leave a comment at the bottom. it will be a great help to me! </code></p><h2>App promotion</h2><div class="book-greeting"> You can use the applications that are created by this blog writer <code class="highlighter-rouge">Deku</code>.<br/><code class="highlighter-rouge">Deku</code> created the applications with Flutter.<br/><br/> If you have interested, please try to download them for free.<br/><br/><div class="row" style="display: flex;"><div class="col-lg-4 col-md-4 col-sm-auto col-auto" style="margin-bottom: 40px; display: flex; align-items: center;"><a class="app_container" href="/en/app/blaboo/en/" target="_blank"><img class="app_logo_image" src="/assets/images/logo/blaboo.png" alt="word learning app for kids, BlaBoo"/><div><div class="app_description">word learning app for kids</div><div class="app_title">BlaBoo</div></div></a></div><div class="col-lg-4 col-md-4 col-sm-auto col-auto" style="margin-bottom: 40px; display: flex; align-items: center;"><a class="app_container" href="/en/app/koreanwords/" target="_blank"><img class="app_logo_image" src="/assets/images/logo/koreanwords.png" alt="Korean vocabulary, TOPIK words"/><div><div class="app_description">Korean TOPIK vocabulary app</div><div class="app_title">TOPIK words</div></div></a></div><div class="col-lg-4 col-md-4 col-sm-auto col-auto" style="margin-bottom: 40px; display: flex; align-items: center;"><a class="app_container" href="/en/app/japanesewords/" target="_blank"><img class="app_logo_image" src="/assets/images/logo/japanesewords.png" alt="Japanese vocabulary app"/><div><div class="app_description">Japanese vocabulary app</div><div class="app_title">Japanese words</div></div></a></div></div><div class="row" style="display: flex;"><div class="col-lg-4 col-md-4 col-sm-auto col-auto" style="margin-bottom: 40px; display: flex; align-items: center;"><a class="app_container" href="/en/app/chinesewords/" target="_blank"><img class="app_logo_image" src="/assets/images/logo/hskwordsen.png" alt="Chinese HSK vocabulary app"/><div><div class="app_description">Chinese HSK vocabulary app</div><div class="app_title">HSK words</div></div></a></div></div></div></article><div class="col-lg-2 col-md-1 d-none d-lg-block right-ads"><ins class="adsbygoogle sticky-top" style="display:block; padding-top: 80px; margin-bottom: 80px;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="9858937018" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="ads-container"><div class="ads-block ads-left"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1936214968" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-center"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1507571483" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-right"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="9369594845" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><div class="post-list-container"><div class="header"><div class="header-title">Posts</div><div id="search-bar"><label for="search" style="width: 0; height: 0; overflow: hidden; float: left;">Search</label><i class="fa fa-search" aria-hidden="true"></i><input id="search" type="text" placeholder="Search..."/></div></div><div class="body"><div class="list-group"></div></div><div class="footer"><ul class="pagination"><li class="page-item page-item--previous"><div class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span><span class="sr-only">Previous</span></div></li><li class="page-item page-item--next"><div class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span><span class="sr-only">Next</span></div></li></ul></div></div><script defer type="text/javascript">document.addEventListener("DOMContentLoaded",function(){function e(e,a){$(".page").remove(),$(".page-item--link").remove();var t=$(".post-list-container .body .list-group");e.forEach(function(e,i){var s=Math.floor(i/8)+1,n=t.find(".page-"+s),o=!1===a&&e.url.indexOf(location.pathname)>=0?"active":"",l="";if(l+='<a href="'+e.url+'" class="list-group-item list-group-item-action flex-column align-items-start '+o+'">',l+='  <div class="d-flex w-100 justify-content-between">',l+='    <div class="mb-1">'+e.title+"</div>",l+="  </div>",l+='  <div class="body-text">'+e.description+"</div>",l+="</a>",n.length>0)n.addClass(!0===a&&1===s?"active":o),n.append(l);else{var p="";p+='<div class="page page-'+s+" "+(!0===a&&1===s?"active":o)+'">',p+=l,p+="</div>",t.append(p)}var d="";d+='<li class="page-item page-item--link '+o+'" data-page="'+s+'">',d+='  <div class="page-link" data-page="'+s+'">',d+=s,d+="  </div>",d+="</li>",0===$('.post-list-container .footer .page-item[data-page="'+s+'"]').length&&$(".post-list-container .footer .page-item--next").before(d),!0===a?$("li[data-page=1]").addClass("active"):"active"===o&&$("li[data-page="+s+"]").addClass(o),s>1&&$(".footer").css("display","flex")})}var a=[];$.get("/en/api/environment/posts.json",function(t){a=t,t.length>0&&($(".post-list-container").show(),e(t,!1))}),$("body").on("click",".page-link",function(){var e=$(".post-list-container .body .list-group"),a=$(".footer .pagination"),t=a.find(".page-item.active"),i=t.find(".page-link").data("page"),s=$(this).data("page");if($(this).closest(".page-item").hasClass("page-item--previous"))s=i>1?i-1:1;else if($(this).closest(".page-item").hasClass("page-item--next")){var n=a.find(".page-item--link").length;s=i<n?i+1:n}else var s=$(this).data("page");e.find(".page").removeClass("active"),e.find(".page-"+s).addClass("active"),a.find(".page-item").removeClass("active"),a.find('.page-link[data-page="'+s+'"]').closest(".page-item").addClass("active")}),$("#search").on("keyup",function(){var t=this.value.toLowerCase(),i=[];if($(".footer .pagination"),t.length>0){for(var s=0;s<a.length;s++){var n=a[s];(n.title.toLowerCase().indexOf(t)>=0||n.description.toLowerCase().indexOf(t)>=0)&&i.push(n)}e(i,!0)}else e(a,!1)})});</script></div><div class="col-lg-8 col-md-10 mx-auto"><hr/><script src="https://utteranc.es/client.js" repo="dev-yakuza/dev-yakuza.github.io" issue-term="title" label="comment" theme="github-light" crossorigin="anonymous" async></script></div></div></div></div><footer><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto share-title"> SHARE </div><div class="col-lg-8 col-md-10 mx-auto"><ul class="list-inline text-center"><li class="list-inline-item"><a href="https://twitter.com/intent/tweet?text=Web Cache and AWS S3, CloudFront&url=https://deku.posstree.com/environment/web/cache-and-aws-s3-cloudfront" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Twitter </div></a></li><li class="list-inline-item"><a href="https://www.facebook.com/sharer/sharer.php?u=https://deku.posstree.com/environment/web/cache-and-aws-s3-cloudfront" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Facebook </div></a></li><li class="list-inline-item"><a href="https://deku.posstree.com/en/feed.xml" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss-square fa-stack-1x fa-inverse" aria-hidden="true"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> RSS </div></a></li></ul><p class="copyright text-muted"> Copyright &copy; dev.yakuza@gmail.com 2024 </p></div></div></div></footer><script src="/assets/vendor/jquery/jquery.min.js"></script><script async src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script><script async src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script><script async src="/assets/scripts.js?v=20241031"></script><link rel="preload" as="style" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/railscasts.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/railscasts.min.css"><script defer src="/assets/highlight/highlight.pack.js"></script><script defer>document.addEventListener("DOMContentLoaded",function(){hljs.initHighlightingOnLoad()});</script></body></html>