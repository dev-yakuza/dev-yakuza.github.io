<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="google-site-verification" content="rHTd8BRbOeSqAskkyVusn529XiwZ2eHbv1tnB1IDnjA"/><link rel="apple-touch-icon" sizes="57x57" href="/en/assets/favicon/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/en/assets/favicon/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/en/assets/favicon/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/en/assets/favicon/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/en/assets/favicon/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/en/assets/favicon/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/en/assets/favicon/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/en/assets/favicon/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/en/assets/favicon/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/en/assets/favicon/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/en/assets/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/en/assets/favicon/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/en/assets/favicon/favicon-16x16.png"/><link rel="manifest" href="/en/assets/favicon/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/assets/favicon/ms-icon-144x144.png"/><meta name="theme-color" content="#ffffff"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="dev-yakuza blog"/><link rel="apple-touch-icon" href="/en/assets/favicon/android-icon-144x144.png"/><meta name="twitter:title" content="Ansible&Docker"/><meta name="twitter:description" content="let's install Docker and Docker Compose on vagrant virtual machine(guest system) by Ansible Playbook."/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@DevYakuza"/><meta name="twitter:creator" content="@DevYakuza"/><title>Ansible&Docker - let's install Docker and Docker Compose on vagrant virtual machine(guest system) by Ansible Playbook.</title><meta name="description" content="let&#39;s install Docker and Docker Compose on vagrant virtual machine(guest system) by Ansible Playbook."/><meta http-equiv="Content-Language" content="en"><link rel="alternate" hreflang="ja" href="https://dev-yakuza.posstree.com/environment/ansible-docker/"/><link rel="alternate" hreflang="ko" href="https://dev-yakuza.posstree.com/ko/environment/ansible-docker/"/><link rel="alternate" hreflang="en" href="https://dev-yakuza.posstree.com/en/environment/ansible-docker/"/><meta property="og:url" content="https://dev-yakuza.posstree.com/en/environment/ansible-docker/"/><meta name="generator" content="Jekyll v3.9.0"/><meta property="og:title" content="Ansible&amp;Docker"/><meta name="author" content="dev.yakuza@gmail.com"/><meta property="og:locale" content="en"/><meta name="description" content="let’s install Docker and Docker Compose on vagrant virtual machine(guest system) by Ansible Playbook."/><meta property="og:description" content="let’s install Docker and Docker Compose on vagrant virtual machine(guest system) by Ansible Playbook."/><link rel="canonical" href="https://dev-yakuza.posstree.com/en/environment/ansible-docker/"/><meta property="og:url" content="https://dev-yakuza.posstree.com/environment/ansible-docker/"/><meta property="og:site_name" content="dev-yakuza"/><meta property="og:image" content="https://dev-yakuza.posstree.com/assets/images/category/environment/2018/ansible-docker/background.jpg"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2018-12-04T00:00:00+09:00"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="https://dev-yakuza.posstree.com/assets/images/category/environment/2018/ansible-docker/background.jpg"/><meta property="twitter:title" content="Ansible&amp;Docker"/><script type="application/ld+json">
{"url":"https://dev-yakuza.posstree.com/environment/ansible-docker/","image":"https://dev-yakuza.posstree.com/assets/images/category/environment/2018/ansible-docker/background.jpg","headline":"Ansible&amp;Docker","dateModified":"2020-12-16T11:10:57+09:00","datePublished":"2018-12-04T00:00:00+09:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://dev-yakuza.posstree.com/assets/images/icon.jpg"},"name":"dev.yakuza@gmail.com"},"author":{"@type":"Person","name":"dev.yakuza@gmail.com"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dev-yakuza.posstree.com/environment/ansible-docker/"},"description":"let’s install Docker and Docker Compose on vagrant virtual machine(guest system) by Ansible Playbook.","@type":"BlogPosting","@context":"https://schema.org"}</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125408913-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-125408913-1");</script><link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet"/><link rel="stylesheet" href="/en/assets/vendor/bootstrap/css/bootstrap.min.css"/><link rel="stylesheet" href="/en/assets/vendor/font-awesome/css/font-awesome.min.css"/><link rel="stylesheet" href="/en/assets/main.css?v=20210419"/><link rel="alternate" type="application/rss+xml" title="dev-yakuza" href="/en/feed.xml"/><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "dev.yakuza",
      "url": "https://dev-yakuza.posstree.com/",
      "sameAs": [
        "https://www.facebook.com/yakuza.dev.54",
        "https://www.instagram.com/dev_yakuza/",
        "https://twitter.com/DevYakuza"
      ]
    }
  </script><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://dev-yakuza.posstree.com/",
      "logo": "https://dev-yakuza.posstree.com/assets/images/icon.jpg"
    }
  </script><script type="application/ld+json">
    {
      "@context":"http://schema.org",
      "@type":"ItemList",
      "itemListElement":[{
          "@type":"ListItem",
          "name": "vagrant installation and usage",
          "description" : "let's see how to install virtualbox, vagrant to create virtual machine in virtual environment and how to usage vagrant to create virtual machine.",
          "position":1,"url": "https://dev-yakuza.posstree.com/en/environment/vagrant-install-and-usage/",
          "item": "https://dev-yakuza.posstree.com/en/environment/vagrant-install-and-usage/"},{
          "@type":"ListItem",
          "name": "Ansible installation",
          "description" : "make the environment can be used Ansible by installing Ansible on virtual machine(guest system) created by Vagrant",
          "position":2,"url": "https://dev-yakuza.posstree.com/en/environment/install-ansible/",
          "item": "https://dev-yakuza.posstree.com/en/environment/install-ansible/"},{
          "@type":"ListItem",
          "name": "Ansible Playbook",
          "description" : "let's try to use Ansible Playbook to install server programs and to configure the server.",
          "position":3,"url": "https://dev-yakuza.posstree.com/en/environment/ansible-playbook/",
          "item": "https://dev-yakuza.posstree.com/en/environment/ansible-playbook/"},{
          "@type":"ListItem",
          "name": "Ansible&Docker",
          "description" : "let's install Docker and Docker Compose on vagrant virtual machine(guest system) by Ansible Playbook.",
          "position":4,"url": "https://dev-yakuza.posstree.com/en/environment/ansible-docker/",
          "item": "https://dev-yakuza.posstree.com/en/environment/ansible-docker/"},{
          "@type":"ListItem",
          "name": "Ansible&Laradock",
          "description" : "let's make Laravel development environment by using virtual machine(guest system) created by vagrant and Ansible.",
          "position":5,"url": "https://dev-yakuza.posstree.com/en/environment/ansible-laradock/",
          "item": "https://dev-yakuza.posstree.com/en/environment/ansible-laradock/"},{
          "@type":"ListItem",
          "name": "Ansible&Laravel",
          "description" : "let's make development environment by installing Laravel on virtual machine(guest system) that is configured by Ansible and Laradock.",
          "position":6,"url": "https://dev-yakuza.posstree.com/en/environment/ansible-laravel/",
          "item": "https://dev-yakuza.posstree.com/en/environment/ansible-laravel/"},{
          "@type":"ListItem",
          "name": "ngrok",
          "description" : "let's see how to access virtual machine(Guest System) from external environment by ngrok.",
          "position":7,"url": "https://dev-yakuza.posstree.com/en/environment/ngrok/",
          "item": "https://dev-yakuza.posstree.com/en/environment/ngrok/"},{
          "@type":"ListItem",
          "name": "Development Environment on Mac(1) - iTerm & zsh",
          "description" : "I try to set the development environment on new Mac. in here, I'll introduce how to configure iTerm and zsh for Terminal on new Mac.",
          "position":8,"url": "https://dev-yakuza.posstree.com/en/environment/mac-iterm-zsh/",
          "item": "https://dev-yakuza.posstree.com/en/environment/mac-iterm-zsh/"},{
          "@type":"ListItem",
          "name": "Development Environment on Mac(2) - for tools",
          "description" : "now I'm configuring the development environment on new Mac. in here, I'll introduce the tools that I use when I develop.",
          "position":9,"url": "https://dev-yakuza.posstree.com/en/environment/mac-development-tools/",
          "item": "https://dev-yakuza.posstree.com/en/environment/mac-development-tools/"},{
          "@type":"ListItem",
          "name": "Development Environment on Mac(3) - for development",
          "description" : "I'm setting the development environment on new Mac. in here, I'll introduce how to configure the development environment what I use.",
          "position":10,"url": "https://dev-yakuza.posstree.com/en/environment/mac-development-environment/",
          "item": "https://dev-yakuza.posstree.com/en/environment/mac-development-environment/"},{
          "@type":"ListItem",
          "name": "Configure automatically development environment on Mac via Homebrew and Shell Script",
          "description" : "Let's see how to configure automatically development environment on Mac via Homebrew and Shell Script. and then Let's see how to use Brewfile and Shell script on new Mac for configuring the development environment.",
          "position":11,"url": "https://dev-yakuza.posstree.com/en/environment/configure-development-environment-on-mac-with-homebrew-and-shell-script/",
          "item": "https://dev-yakuza.posstree.com/en/environment/configure-development-environment-on-mac-with-homebrew-and-shell-script/"},{
          "@type":"ListItem",
          "name": "(macOS) Manage Node versions via NVM",
          "description" : "Let's see how to install NVM(Node Version Manager) on macOS and how to manage Node versions.",
          "position":12,"url": "https://dev-yakuza.posstree.com/en/environment/nvm/",
          "item": "https://dev-yakuza.posstree.com/en/environment/nvm/"}]
    }
  </script><link rel="stylesheet" href="/en/assets/highlight/railscasts.css"/><script src="/assets/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="/assets//vendor/lazysizes/lazysizes.min.js" async=""></script><script data-ad-client="ca-pub-7987914246691031" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav"><div class="container"><a class="navbar-brand" href="/en/"><img src="/assets/images/icon.png" alt="dev.yakuza blog logo"/> ヤクザ </a><div class="navbar-menu-container"><div class="collapse navbar-collapse"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/en/">Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/en/clog/">Clog</a><a class="dropdown-item" href="/en/books/">Writing Books</a><a class="dropdown-item" href="/en/react-native/">React Native</a><a class="dropdown-item" href="/en/kubernetes/">Kubernetes</a><a class="dropdown-item" href="/en/git/">git</a><a class="dropdown-item" href="/en/flutter/">Flutter</a><a class="dropdown-item" href="/en/ildangongbu/">일단공부(Il-Dan-Gong-Bu)</a><a class="dropdown-item" href="/en/environment/">dev environment</a><a class="dropdown-item" href="/en/kumoncho/">kumoncho</a><a class="dropdown-item" href="/en/ruby/">Ruby</a><a class="dropdown-item" href="/en/share/">Share</a><a class="dropdown-item" href="/en/blaboo/">BlaBoo</a><a class="dropdown-item" href="/en/jest/">Jest</a><a class="dropdown-item" href="/en/jekyll/">jekyll blog</a><a class="dropdown-item" href="/en/react/">React</a><a class="dropdown-item" href="/en/laravel/">Laravel</a><a class="dropdown-item" href="/en/ruby-on-rails/">Ruby on Rails</a><a class="dropdown-item" href="/en/django/">django</a></div></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href=" /app/list/en/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/en/contact/">Contact</a></li></ul></div><div class="btn-group-sm btn-translate-group dropdown"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="change language button"><i class="fa fa-language" aria-hidden="true"></i></button><div class="dropdown-menu"><a class="dropdown-item menu-ko" href="/ko/environment/ansible-docker/">한국어</a><a class="dropdown-item menu-en" href="/en/environment/ansible-docker/">English</a><a class="dropdown-item menu-ja" href="/en/environment/ansible-docker/">日本語</a></div></div><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"> Menu <i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/en/">Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/en/clog/">Clog</a><a class="dropdown-item" href="/en/books/">Writing Books</a><a class="dropdown-item" href="/en/react-native/">React Native</a><a class="dropdown-item" href="/en/kubernetes/">Kubernetes</a><a class="dropdown-item" href="/en/git/">git</a><a class="dropdown-item" href="/en/flutter/">Flutter</a><a class="dropdown-item" href="/en/ildangongbu/">일단공부(Il-Dan-Gong-Bu)</a><a class="dropdown-item" href="/en/environment/">dev environment</a><a class="dropdown-item" href="/en/kumoncho/">kumoncho</a><a class="dropdown-item" href="/en/ruby/">Ruby</a><a class="dropdown-item" href="/en/share/">Share</a><a class="dropdown-item" href="/en/blaboo/">BlaBoo</a><a class="dropdown-item" href="/en/jest/">Jest</a><a class="dropdown-item" href="/en/jekyll/">jekyll blog</a><a class="dropdown-item" href="/en/react/">React</a><a class="dropdown-item" href="/en/laravel/">Laravel</a><a class="dropdown-item" href="/en/ruby-on-rails/">Ruby on Rails</a><a class="dropdown-item" href="/en/django/">django</a></div></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href=" /app/list/en/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/en/contact/">Contact</a></li></ul></div></div></nav><script>document.addEventListener("DOMContentLoaded",function(){var e=window.location.pathname;e.indexOf("/en/")>=0?($(".menu-ko").prop("href",e.replace("/en/","/ko/")),$(".menu-en").prop("href",e),$(".menu-ja").prop("href",e.replace("/en/","/"))):e.indexOf("/ko/")>=0?($(".menu-ko").prop("href",e),$(".menu-en").prop("href",e.replace("/ko/","/en/")),$(".menu-ja").prop("href",e.replace("/ko/","/"))):($(".menu-ko").prop("href","/ko"+e),$(".menu-en").prop("href","/en"+e),$(".menu-ja").prop("href",e)),$("body").on("show.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$("body").on("hide.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()})});</script><header class="masthead" style="background-image: url('/assets/images/category/environment/2018/ansible-docker/background.jpg')"><div class="overlay"></div><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><div class="post-heading"><h1>Ansible&Docker</h1><div class="heading-date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-12-16 <img style="width: inherit;" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fdev-yakuza.github.io%2F/environment/ansible-docker/&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false" alt="hit count image"/></div><h2 class="subheading">let's install Docker and Docker Compose on vagrant virtual machine(guest system) by Ansible Playbook.</h2><div class="sponsor_container"><a href="https://github.com/sponsors/dev-yakuza" target="_blank" rel="noopener" style=" background-color: #e6ebf1; background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%); background-position: -0.5em; color: #24292e; text-decoration: none; border: 1px solid rgba(27, 31, 35, 0.35); padding: 6px 10px; user-select: none; background-repeat: repeat-x; background-position: -1px -1px; background-size: 110% 110%; border: 1px solid rgba(27, 31, 35, 0.2); border-radius: 0.25em; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; white-space: nowrap; vertical-align: middle; font-size: 17px; font-family: 'Lato', sans-serif !important; margin: 10px; display: inline-block; "><svg style="color: #ea4aaa; vertical-align: text-bottom !important;" viewBox="0 0 12 16" version="1.1" width="16" height="20" aria-hidden="true"><path fill-rule="evenodd" d="M8.727 3C7.091 3 6.001 4.65 6.001 4.65S4.909 3 3.273 3C1.636 3 0 4.1 0 6.3 0 9.6 6 14 6 14s6-4.4 6-7.7C12 4.1 10.364 3 8.727 3z"></path></svg> Github Sponsor </a><style> .bmc-button img { width: 27px !important; margin-bottom: 1px !important; border: none !important; vertical-align: middle !important; } .bmc-button { line-height: 36px !important; height: 37px !important; text-decoration: none !important; display: inline-block !important; color: #ffffff !important; background-color: #ff813f !important; border-radius: 3px !important; border: 1px solid transparent !important; padding: 0px 9px !important; font-size: 17px !important; letter-spacing: -0.08px !important; margin: 10px !important; font-family: 'Lato', sans-serif !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; -o-transition: 0.3s all linear !important; -webkit-transition: 0.3s all linear !important; -moz-transition: 0.3s all linear !important; -ms-transition: 0.3s all linear !important; transition: 0.3s all linear !important; } .bmc-button:hover, .bmc-button:active, .bmc-button:focus { -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; text-decoration: none !important; box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; opacity: 0.85 !important; color: #ffffff !important; }</style><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"/><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/j0cXhWiza" rel="noopener noreferrer nofollow"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"/><span style="margin-left:5px">Buy me a coffee</span></a></div></div></div></div></div></header><div class="top-ads"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="3850742490" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="container container-contents"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><nav aria-label="breadcrumb"><ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="https://dev-yakuza.posstree.com/en/"><span itemprop="name">Home</span></a><meta itemprop="position" content="1"/></li><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="https://dev-yakuza.posstree.com/en/environment"><span itemprop="name">environment</span></a><meta itemprop="position" content="2"/></li><li class="breadcrumb-item active" aria-current="page" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="https://dev-yakuza.posstree.com/en/environment/ansible-docker/"><span itemprop="name">Ansible&Docker</span></a><meta itemprop="position" content="3"/></li></ol></nav></div></div><div class="row"><div class="col-lg-2 col-md-1 d-none d-lg-block left-ads"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle sticky-top" style="display:block; padding-top: 80px; margin-bottom: 80px;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1333703444" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><article class="col-lg-8 col-md-10 mx-auto"><h2 id="outline">outline</h2><p>we can’t talk server development without Docker recently. in here, it’s difficult to explain all details about Docker. we will introduce Docker by explain it little by little when we need. we will explain how to install Docker and Docker Compose on vagrant by Ansible Playbook in this blog post.</p><p>this blog is based on the assumption that you have done three blogs below.</p><ul><li><a href="https://dev-yakuza.posstree.com/en/environment/vagrant-install-and-usage/" target="_blank">vagrant installation and usage</a></li><li><a href="https://dev-yakuza.posstree.com/en/environment/install-ansible/" target="_blank">Ansible installation</a></li><li><a href="https://dev-yakuza.posstree.com/en/environment/ansible-playbook/" target="_blank">Ansible Playbook</a></li></ul><h2 id="set-docker-in-ansible-playbook">set Docker in Ansible Playbook</h2><p>below is the directory structure for vagrant virtual machine(guest system) we created until now.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|-- ansible
|    |-- init
|    |    |-- tasks
|    |    |    |-- main.yml
|    |-- playbook.yml
|-- Vagrantfile
</code></pre></div></div><p>we’ll define <code class="language-plaintext highlighter-rouge">role</code> about Docker installation and add Ansible Playbook in here. create <code class="language-plaintext highlighter-rouge">docker/tasks/main.yml</code> file in <code class="language-plaintext highlighter-rouge">ansible</code> folder.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|-- ansible
|    |-- init
|    |    |-- tasks
|    |    |    |-- main.yml
|    |-- docker
|    |    |-- tasks
|    |    |    |-- main.yml
|    |-- playbook.yml
|-- Vagrantfile
</code></pre></div></div><p>modify <code class="language-plaintext highlighter-rouge">playbook.yml</code> that is Ansible Playbook’s start point like below.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span> <span class="s">localhost</span>
  <span class="na">connection</span><span class="pi">:</span> <span class="s">local</span>
  <span class="na">roles</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">init</span>
    <span class="pi">-</span> <span class="s">docker</span>
</code></pre></div></div><p>add below codes to <code class="language-plaintext highlighter-rouge">docker/tasks/main.yml</code> we created.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install docker</span>
  <span class="na">shell</span><span class="pi">:</span> <span class="s">curl https://get.docker.com | sh</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Modify privilege</span>
  <span class="na">become</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">shell</span><span class="pi">:</span> <span class="s">usermod -aG docker $USER</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Change privilege of docker</span>
  <span class="na">become</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">file</span><span class="pi">:</span> <span class="s">dest=/usr/bin/docker mode=+x</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">python docker / docker-compse module</span>
  <span class="na">pip</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">docker</span>
        <span class="pi">-</span> <span class="s">docker-compose</span>
</code></pre></div></div><p>let’s see Ansible commands one by one.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install docker</span>
  <span class="na">shell</span><span class="pi">:</span> <span class="s">curl https://get.docker.com | sh</span>
</code></pre></div></div><p>this command is to install Docker by using Docker install script.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Modify privilege</span>
  <span class="na">become</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">shell</span><span class="pi">:</span> <span class="s">usermod -aG docker $USER</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Change privilege of docker</span>
  <span class="na">become</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">command</span><span class="pi">:</span> <span class="s">chmod +x /usr/bin/docker</span>
</code></pre></div></div><p>this is to change user and permission of Docker.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">python docker / docker-compse module</span>
  <span class="na">pip</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">docker</span>
        <span class="pi">-</span> <span class="s">docker-compose</span>
</code></pre></div></div><p>this command is to install python docker module and Docker Compose</p><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h2 id="execute-ansible">execute Ansible</h2><p>execute below Ansible command in virtual machine(guest system) to execute Docker installation <code class="language-plaintext highlighter-rouge">role</code> we added in Ansible Playbook above.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vagrant ssh

<span class="nb">sudo </span>ansible-playbook /vagrant/ansible/playbook.yml
</code></pre></div></div><p>we executed Ansible Playbook because we already have virtual machine(guest system). if we make new environment, Ansible Playbook is automatically executed because we already added provision shell.</p><p>execute below vagrant command in local machine(host system) for testing.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vagrant destroy
vagrant up
</code></pre></div></div><h2 id="check-docker-is-installed">check Docker is installed</h2><p>execute below commands to check Docker is installed well on virtual machine(guest system) by Ansible Playbook.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vagrant ssh

docker <span class="nt">--version</span>
docker-compose <span class="nt">--version</span>
</code></pre></div></div><h2 id="completed">completed</h2><p>we saw how to install Docker and Docker Compose by Ansible Playbook. now, we can make development environment via Docker. next blog post, we will introduce how to configure Laravel development environment by Docker and Docker Compose.</p><div class="sponsor_container"><a href="https://github.com/sponsors/dev-yakuza" target="_blank" rel="noopener" style=" background-color: #e6ebf1; background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%); background-position: -0.5em; color: #24292e; text-decoration: none; border: 1px solid rgba(27, 31, 35, 0.35); padding: 6px 10px; user-select: none; background-repeat: repeat-x; background-position: -1px -1px; background-size: 110% 110%; border: 1px solid rgba(27, 31, 35, 0.2); border-radius: 0.25em; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; white-space: nowrap; vertical-align: middle; font-size: 17px; font-family: 'Lato', sans-serif !important; margin: 10px; display: inline-block; "><svg style="color: #ea4aaa; vertical-align: text-bottom !important;" viewBox="0 0 12 16" version="1.1" width="16" height="20" aria-hidden="true"><path fill-rule="evenodd" d="M8.727 3C7.091 3 6.001 4.65 6.001 4.65S4.909 3 3.273 3C1.636 3 0 4.1 0 6.3 0 9.6 6 14 6 14s6-4.4 6-7.7C12 4.1 10.364 3 8.727 3z"></path></svg> Github Sponsor </a><style> .bmc-button img { width: 27px !important; margin-bottom: 1px !important; border: none !important; vertical-align: middle !important; } .bmc-button { line-height: 36px !important; height: 37px !important; text-decoration: none !important; display: inline-block !important; color: #ffffff !important; background-color: #ff813f !important; border-radius: 3px !important; border: 1px solid transparent !important; padding: 0px 9px !important; font-size: 17px !important; letter-spacing: -0.08px !important; margin: 10px !important; font-family: 'Lato', sans-serif !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; -o-transition: 0.3s all linear !important; -webkit-transition: 0.3s all linear !important; -moz-transition: 0.3s all linear !important; -ms-transition: 0.3s all linear !important; transition: 0.3s all linear !important; } .bmc-button:hover, .bmc-button:active, .bmc-button:focus { -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; text-decoration: none !important; box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; opacity: 0.85 !important; color: #ffffff !important; }</style><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"/><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/j0cXhWiza" rel="noopener noreferrer nofollow"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"/><span style="margin-left:5px">Buy me a coffee</span></a></div><p><code class="language-plaintext highlighter-rouge"> Was my blog helpful? Please leave a comment at the bottom. it will be a great help to me! </code></p></article><div class="col-lg-2 col-md-1 d-none d-lg-block right-ads"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle sticky-top" style="display:block; padding-top: 80px; margin-bottom: 80px;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="9858937018" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1936214968" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><div class="post-list-container"><div class="header"><div class="header-title">Posts</div><div id="search-bar"><label for="search" style="width: 0; height: 0; overflow: hidden; float: left;">Search</label><i class="fa fa-search" aria-hidden="true"></i><input id="search" type="text" placeholder="Search..."/></div></div><div class="body"><div class="list-group"></div></div><div class="footer"><ul class="pagination"><li class="page-item page-item--previous"><div class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span><span class="sr-only">Previous</span></div></li><li class="page-item page-item--next"><div class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span><span class="sr-only">Next</span></div></li></ul></div></div><script type="text/javascript">document.addEventListener("DOMContentLoaded",function(){function e(e,a){$(".page").remove(),$(".page-item--link").remove();var t=$(".post-list-container .body .list-group");e.forEach(function(e,i){var s=Math.floor(i/8)+1,n=t.find(".page-"+s),o=!1===a&&e.url.indexOf(location.pathname)>=0?"active":"",l="";if(l+='<a href="'+e.url+'" class="list-group-item list-group-item-action flex-column align-items-start '+o+'">',l+='  <div class="d-flex w-100 justify-content-between">',l+='    <div class="mb-1">'+e.title+"</div>",l+="  </div>",l+='  <div class="body-text">'+e.description+"</div>",l+="</a>",n.length>0)n.addClass(!0===a&&1===s?"active":o),n.append(l);else{var p="";p+='<div class="page page-'+s+" "+(!0===a&&1===s?"active":o)+'">',p+=l,p+="</div>",t.append(p)}var d="";d+='<li class="page-item page-item--link '+o+'" data-page="'+s+'">',d+='  <div class="page-link" data-page="'+s+'">',d+=s,d+="  </div>",d+="</li>",0===$('.post-list-container .footer .page-item[data-page="'+s+'"]').length&&$(".post-list-container .footer .page-item--next").before(d),!0===a?$("li[data-page=1]").addClass("active"):"active"===o&&$("li[data-page="+s+"]").addClass(o),s>1&&$(".footer").css("display","flex")})}var a=[];$.get("/en/api/environment/posts.json",function(t){a=t,t.length>0&&($(".post-list-container").show(),e(t,!1))}),$("body").on("click",".page-link",function(){var e=$(".post-list-container .body .list-group"),a=$(".footer .pagination"),t=a.find(".page-item.active"),i=t.find(".page-link").data("page"),s=$(this).data("page");if($(this).closest(".page-item").hasClass("page-item--previous"))s=i>1?i-1:1;else if($(this).closest(".page-item").hasClass("page-item--next")){var n=a.find(".page-item--link").length;s=i<n?i+1:n}else var s=$(this).data("page");e.find(".page").removeClass("active"),e.find(".page-"+s).addClass("active"),a.find(".page-item").removeClass("active"),a.find('.page-link[data-page="'+s+'"]').closest(".page-item").addClass("active")}),$("#search").on("keyup",function(){var t=this.value.toLowerCase(),i=[];if($(".footer .pagination"),t.length>0){for(var s=0;s<a.length;s++){var n=a[s];(n.title.toLowerCase().indexOf(t)>=0||n.description.toLowerCase().indexOf(t)>=0)&&i.push(n)}e(i,!0)}else e(a,!1)})});</script></div><div class="col-lg-8 col-md-10 mx-auto"><hr/><div id="disqus_thread"></div><script>var disqus_config=function(){this.page.url="https://dev-yakuza.posstree.com/environment/ansible-docker/",this.page.identifier="https://dev-yakuza.posstree.com/environment/ansible-docker/"};!function(){var e=document,t=e.createElement("script");t.src="https://https-dev-yakuza-github-io-en.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div></div><footer><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto share-title"> SHARE </div><div class="col-lg-8 col-md-10 mx-auto"><ul class="list-inline text-center"><li class="list-inline-item"><a href="https://twitter.com/intent/tweet?text=Ansible&Docker&url=https://dev-yakuza.posstree.com/environment/ansible-docker/" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Twitter </div></a></li><li class="list-inline-item"><a href="https://www.facebook.com/sharer/sharer.php?u=https://dev-yakuza.posstree.com/environment/ansible-docker/" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Facebook </div></a></li><li class="list-inline-item"><a href="https://dev-yakuza.posstree.com/en/feed.xml" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss-square fa-stack-1x fa-inverse" aria-hidden="true"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> RSS </div></a></li></ul><p class="copyright text-muted"> Copyright &copy; dev.yakuza@gmail.com 2021 </p></div></div></div></footer><script src="/assets/vendor/jquery/jquery.min.js"></script><script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script><script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script><script src="/assets/scripts.js?v=20210419"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/railscasts.min.css"></body></html>