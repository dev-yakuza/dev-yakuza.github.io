<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/><link rel="preconnect" href="https://www.googletagmanager.com/"/><link rel="preconnect" href="https://pagead2.googlesyndication.com/"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="google-site-verification" content="rHTd8BRbOeSqAskkyVusn529XiwZ2eHbv1tnB1IDnjA"/><link rel="apple-touch-icon" sizes="57x57" href="/en/assets/favicon/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/en/assets/favicon/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/en/assets/favicon/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/en/assets/favicon/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/en/assets/favicon/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/en/assets/favicon/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/en/assets/favicon/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/en/assets/favicon/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/en/assets/favicon/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/en/assets/favicon/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/en/assets/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/en/assets/favicon/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/en/assets/favicon/favicon-16x16.png"/><link rel="manifest" href="/en/assets/favicon/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/assets/favicon/ms-icon-144x144.png"/><meta name="theme-color" content="#ffffff"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="DeKu blog"/><link rel="apple-touch-icon" href="/en/assets/favicon/android-icon-144x144.png"/><meta name="twitter:title" content="[Code Quality] Lighthouse CI"/><meta name="twitter:description" content="Let's see how to execute Lighthouse provided Google Chrome on the local or the CI environment and how to measure automatically the performance of the web page in the CI environment."/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@DevYakuza"/><meta name="twitter:creator" content="@DevYakuza"/><title>[Code Quality] Lighthouse CI - Let's see how to execute Lighthouse provided Google Chrome on the local or the CI environment and how to measure automatically the performance of the web page in the CI environment.</title><meta name="description" content="Let&#39;s see how to execute Lighthouse provided Google Chrome on the local or the CI environment and how to measure automatically the performance of the web pag..."/><meta http-equiv="Content-Language" content="en"><link rel="alternate" hreflang="ja" href="https://deku.posstree.com/code_quality/lighthouse_ci/"/><link rel="alternate" hreflang="ko" href="https://deku.posstree.com/ko/code_quality/lighthouse_ci/"/><link rel="alternate" hreflang="en" href="https://deku.posstree.com/en/code_quality/lighthouse_ci/"/><meta property="og:url" content="https://deku.posstree.com/en/code_quality/lighthouse_ci/"/><meta name="generator" content="Jekyll v3.9.5"/><meta property="og:title" content="[Code Quality] Lighthouse CI"/><meta name="author" content="dev.yakuza@gmail.com"/><meta property="og:locale" content="en"/><meta name="description" content="Let’s see how to execute Lighthouse provided Google Chrome on the local or the CI environment and how to measure automatically the performance of the web page in the CI environment."/><meta property="og:description" content="Let’s see how to execute Lighthouse provided Google Chrome on the local or the CI environment and how to measure automatically the performance of the web page in the CI environment."/><link rel="canonical" href="https://deku.posstree.com/en/code_quality/lighthouse_ci/"/><meta property="og:url" content="https://deku.posstree.com/code_quality/lighthouse_ci/"/><meta property="og:site_name" content="Deku"/><meta property="og:image" content="https://deku.posstree.com/assets/images/category/code_quality/lighthouse_ci/background.jpg"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2023-03-11T00:00:00+09:00"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="https://deku.posstree.com/assets/images/category/code_quality/lighthouse_ci/background.jpg"/><meta property="twitter:title" content="[Code Quality] Lighthouse CI"/><script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"dev.yakuza@gmail.com"},"dateModified":"2025-01-11T12:45:15+09:00","datePublished":"2023-03-11T00:00:00+09:00","description":"Let’s see how to execute Lighthouse provided Google Chrome on the local or the CI environment and how to measure automatically the performance of the web page in the CI environment.","headline":"[Code Quality] Lighthouse CI","image":"https://deku.posstree.com/assets/images/category/code_quality/lighthouse_ci/background.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://deku.posstree.com/code_quality/lighthouse_ci/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://deku.posstree.com/assets/images/icon.jpg"},"name":"dev.yakuza@gmail.com"},"url":"https://deku.posstree.com/code_quality/lighthouse_ci/"}</script><link href="https://www.googletagmanager.com/gtag/js?id=UA-125408913-1" rel="preload" as="script"/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125408913-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-125408913-1");</script><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Noto+Sans"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans"/><link rel="preload" as="style" href="/en/assets/vendor/bootstrap/css/bootstrap.min.css"/><link rel="stylesheet" href="/en/assets/vendor/bootstrap/css/bootstrap.min.css"/><link rel="preload" as="style" href="/en/assets/vendor/font-awesome/css/font-awesome.min.css"/><link rel="stylesheet" href="/en/assets/vendor/font-awesome/css/font-awesome.min.css"/><link rel="preload" as="style" href="/en/assets/main.css?v=20250120"/><link rel="stylesheet" href="/en/assets/main.css?v=20250120"/><link rel="alternate" type="application/rss+xml" title="Deku" href="/en/feed.xml"/><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "dev.yakuza",
      "url": "https://deku.posstree.com/",
      "sameAs": [
        "https://www.facebook.com/yakuza.dev.54",
        "https://www.instagram.com/dev_yakuza/",
        "https://twitter.com/DevYakuza"
      ]
    }
  </script><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://deku.posstree.com/",
      "logo": "https://deku.posstree.com/assets/images/icon.jpg"
    }
  </script><script type="application/ld+json">
    {
      "@context":"http://schema.org",
      "@type":"ItemList",
      "itemListElement":[{
          "@type":"ListItem",
          "name": "[Code Quality] remark-lint",
          "description" : "Let's see how to use the remark-lint to make the same style of the Markdown.",
          "position":1,"url": "https://deku.posstree.com/en/code_quality/remark-lint/",
          "item": "https://deku.posstree.com/en/code_quality/remark-lint/"},{
          "@type":"ListItem",
          "name": "[Code Quality] Stylelint V14",
          "description" : "Let's see how to install and configure Stylelint to check code style of CSS, SCSS files, and CSS-in-JS.",
          "position":2,"url": "https://deku.posstree.com/en/code_quality/stylelint/",
          "item": "https://deku.posstree.com/en/code_quality/stylelint/"},{
          "@type":"ListItem",
          "name": "[Code Quality] CSpell",
          "description" : "Let's see how to check typo by CSpell.",
          "position":3,"url": "https://deku.posstree.com/en/code_quality/cspell/",
          "item": "https://deku.posstree.com/en/code_quality/cspell/"},{
          "@type":"ListItem",
          "name": "[ESLint] eslint-plugin-import",
          "description" : "Let's see how to clean up the import part using ESLint's eslint-plugin-import.",
          "position":4,"url": "https://deku.posstree.com/en/code_quality/eslint/eslint-plugin-import/",
          "item": "https://deku.posstree.com/en/code_quality/eslint/eslint-plugin-import/"},{
          "@type":"ListItem",
          "name": "[GitLab] Dependabot",
          "description" : "Let's see how to add Dependabot to GitLab for checking automatically the version updating of the libraries in the project.",
          "position":5,"url": "https://deku.posstree.com/en/gitlab/dependabot/",
          "item": "https://deku.posstree.com/en/gitlab/dependabot/"},{
          "@type":"ListItem",
          "name": "[Code Quality] Lighthouse CI",
          "description" : "Let's see how to execute Lighthouse provided Google Chrome on the local or the CI environment and how to measure automatically the performance of the web page in the CI environment.",
          "position":6,"url": "https://deku.posstree.com/en/code_quality/lighthouse_ci/",
          "item": "https://deku.posstree.com/en/code_quality/lighthouse_ci/"},{
          "@type":"ListItem",
          "name": "[Code Quality] Stylelint V15",
          "description" : "Let's see how to check the style code in the CSS, SCSS, and CSS-in-JS files by using StyleLint V15.",
          "position":7,"url": "https://deku.posstree.com/en/code_quality/stylelint/v15/",
          "item": "https://deku.posstree.com/en/code_quality/stylelint/v15/"},{
          "@type":"ListItem",
          "name": "[Code Quality] Check Code using Semgrep with Regular Expression",
          "description" : "Let's see how to check the code quality by using Semgrep with regular expression.",
          "position":8,"url": "https://deku.posstree.com/en/code_quality/semgrep/",
          "item": "https://deku.posstree.com/en/code_quality/semgrep/"}]
    }
  </script><link rel="preload" as="style" href="/en/assets/highlight/railscasts.css"/><link rel="stylesheet" href="/en/assets/highlight/railscasts.css"/><script async src="/assets//vendor/lazysizes/lazysizes.min.js" async></script><link href="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" rel="preload" as="script"/><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav"><div class="container"><a class="navbar-brand" href="/en/"><img src="/assets/images/deku.svg" alt="[DeKu] DevYakuza blog logo"/><span class="name">DeKu</span></a><div class="navbar-menu-container"><div class="collapse navbar-collapse"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/en/">Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/en/clog/">Clog</a><a class="dropdown-item" href="/en/ildangongbu/">일단공부(Il-Dan-Gong-Bu)</a><a class="dropdown-item" href="/en/vue/">Vue</a><a class="dropdown-item" href="/en/code_quality/">Code Quality</a><a class="dropdown-item" href="/en/git/">git</a><a class="dropdown-item" href="/en/books/">Writing Books</a><a class="dropdown-item" href="/en/environment/">dev environment</a><a class="dropdown-item" href="/en/share/">Share</a><a class="dropdown-item" href="/en/flutter/">Flutter</a><a class="dropdown-item" href="/en/tensorflow/">TensorFlow</a><a class="dropdown-item" href="/en/github_actions/">GitHub Actions</a><a class="dropdown-item" href="/en/golang/">Golang</a><a class="dropdown-item" href="/en/ruby/">Ruby</a><a class="dropdown-item" href="/en/jest/">Jest</a><a class="dropdown-item" href="/en/kumoncho/">kumoncho</a><a class="dropdown-item" href="/en/blaboo/">BlaBoo</a><a class="dropdown-item" href="/en/jekyll/">jekyll blog</a><a class="dropdown-item" href="/en/essay/">Essay</a><a class="dropdown-item" href="/en/react/">React</a><a class="dropdown-item" href="/en/web/">Knowledge about Web</a><a class="dropdown-item" href="/en/django/">django</a><a class="dropdown-item" href="/en/react-native/">React Native</a><a class="dropdown-item" href="/en/laravel/">Laravel</a><a class="dropdown-item" href="/en/kubernetes/">Kubernetes</a><a class="dropdown-item" href="/en/ruby-on-rails/">Ruby on Rails</a></div></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href=" /app/list/en/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/en/contact/">Contact</a></li></ul></div><div class="btn-group-sm btn-translate-group dropdown"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="change language button"><i class="fa fa-language" aria-hidden="true"></i></button><div class="dropdown-menu"><a class="dropdown-item menu-ko" href="/ko/code_quality/lighthouse_ci/">한국어</a><a class="dropdown-item menu-en" href="/en/code_quality/lighthouse_ci/">English</a><a class="dropdown-item menu-ja" href="/en/code_quality/lighthouse_ci/">日本語</a></div></div><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"> Menu <i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/en/">Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/en/clog/">Clog</a><a class="dropdown-item" href="/en/ildangongbu/">일단공부(Il-Dan-Gong-Bu)</a><a class="dropdown-item" href="/en/vue/">Vue</a><a class="dropdown-item" href="/en/code_quality/">Code Quality</a><a class="dropdown-item" href="/en/git/">git</a><a class="dropdown-item" href="/en/books/">Writing Books</a><a class="dropdown-item" href="/en/environment/">dev environment</a><a class="dropdown-item" href="/en/share/">Share</a><a class="dropdown-item" href="/en/flutter/">Flutter</a><a class="dropdown-item" href="/en/tensorflow/">TensorFlow</a><a class="dropdown-item" href="/en/github_actions/">GitHub Actions</a><a class="dropdown-item" href="/en/golang/">Golang</a><a class="dropdown-item" href="/en/ruby/">Ruby</a><a class="dropdown-item" href="/en/jest/">Jest</a><a class="dropdown-item" href="/en/kumoncho/">kumoncho</a><a class="dropdown-item" href="/en/blaboo/">BlaBoo</a><a class="dropdown-item" href="/en/jekyll/">jekyll blog</a><a class="dropdown-item" href="/en/essay/">Essay</a><a class="dropdown-item" href="/en/react/">React</a><a class="dropdown-item" href="/en/web/">Knowledge about Web</a><a class="dropdown-item" href="/en/django/">django</a><a class="dropdown-item" href="/en/react-native/">React Native</a><a class="dropdown-item" href="/en/laravel/">Laravel</a><a class="dropdown-item" href="/en/kubernetes/">Kubernetes</a><a class="dropdown-item" href="/en/ruby-on-rails/">Ruby on Rails</a></div></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href=" /app/list/en/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/en/contact/">Contact</a></li></ul></div></div></nav><script defer>document.addEventListener("DOMContentLoaded",function(){var e=window.location.pathname;e.indexOf("/en/")>=0?($(".menu-ko").prop("href",e.replace("/en/","/ko/")),$(".menu-en").prop("href",e),$(".menu-ja").prop("href",e.replace("/en/","/"))):e.indexOf("/ko/")>=0?($(".menu-ko").prop("href",e),$(".menu-en").prop("href",e.replace("/ko/","/en/")),$(".menu-ja").prop("href",e.replace("/ko/","/"))):($(".menu-ko").prop("href","/ko"+e),$(".menu-en").prop("href","/en"+e),$(".menu-ja").prop("href",e)),$("body").on("show.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$("body").on("hide.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()})});</script><header class="masthead" style="background-image: url('/assets/images/category/code_quality/lighthouse_ci/background.jpg')"><div class="overlay"></div><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><div class="post-heading"><h1>[Code Quality] Lighthouse CI</h1><div class="heading-date"><i class="fa fa-calendar" aria-hidden="true"></i> 2025-01-11 <img style="width: inherit;" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fdev-yakuza.github.io%2F/code_quality/lighthouse_ci/&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false" alt="hit count image"/></div><h2 class="subheading">Let's see how to execute Lighthouse provided Google Chrome on the local or the CI environment and how to measure automatically the performance of the web page in the CI environment.</h2><div class="sponsor_container"><a href="https://github.com/sponsors/dev-yakuza" target="_blank" rel="noopener" style=" background-color: #e6ebf1; background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%); background-position: -0.5em; color: #24292e; text-decoration: none; border: 1px solid rgba(27, 31, 35, 0.35); padding: 6px 10px; user-select: none; background-repeat: repeat-x; background-position: -1px -1px; background-size: 110% 110%; border: 1px solid rgba(27, 31, 35, 0.2); border-radius: 0.25em; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; white-space: nowrap; vertical-align: middle; font-size: 17px; font-family: 'Lato', sans-serif !important; margin: 10px; display: inline-block; "><svg style="color: #ea4aaa; vertical-align: text-bottom !important;" viewBox="0 0 12 16" version="1.1" width="16" height="20" aria-hidden="true"><path fill-rule="evenodd" d="M8.727 3C7.091 3 6.001 4.65 6.001 4.65S4.909 3 3.273 3C1.636 3 0 4.1 0 6.3 0 9.6 6 14 6 14s6-4.4 6-7.7C12 4.1 10.364 3 8.727 3z"></path></svg> Github Sponsor </a><style> .bmc-button img { width: 27px !important; margin-bottom: 1px !important; border: none !important; vertical-align: middle !important; } .bmc-button { line-height: 36px !important; height: 37px !important; text-decoration: none !important; display: inline-block !important; color: #ffffff !important; background-color: #ff813f !important; border-radius: 3px !important; border: 1px solid transparent !important; padding: 0px 9px !important; font-size: 17px !important; letter-spacing: -0.08px !important; margin: 10px !important; font-family: 'Lato', sans-serif !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; -o-transition: 0.3s all linear !important; -webkit-transition: 0.3s all linear !important; -moz-transition: 0.3s all linear !important; -ms-transition: 0.3s all linear !important; transition: 0.3s all linear !important; } .bmc-button:hover, .bmc-button:active, .bmc-button:focus { -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; text-decoration: none !important; box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; opacity: 0.85 !important; color: #ffffff !important; }</style><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext"/><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"/><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/j0cXhWiza" rel="noopener noreferrer nofollow"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"/><span style="margin-left:5px">Buy me a coffee</span></a></div></div></div></div></div></header><div class="ads-container"><div class="ads-block ads-left"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="3850742490" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-center"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1496496025" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-right"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="3797155229" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="container container-contents"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><nav aria-label="breadcrumb"><ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="/en/"><span itemprop="name">Home</span></a><meta itemprop="position" content="1"/></li><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="/en/code_quality"><span itemprop="name">code_quality</span></a><meta itemprop="position" content="2"/></li><li class="breadcrumb-item active" aria-current="page" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="/en/code_quality/lighthouse_ci/"><span itemprop="name">[Code Quality] Lighthouse CI</span></a><meta itemprop="position" content="3"/></li></ol></nav></div></div><div class="row"><div class="col-lg-2 col-md-1 d-none d-lg-block left-ads"><ins class="adsbygoogle sticky-top" style="display:block; padding-top: 80px; margin-bottom: 80px;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1333703444" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><article class="col-lg-8 col-md-10 mx-auto"><div id="contents_list"><h2 id="contents">Contents</h2><ul><li><a href="#outline">Outline</a></li><li><a href="#lighthouse-ci">Lighthouse CI</a></li><li><a href="#install-lighthouse-ci">Install Lighthouse CI</a></li><li><a href="#configure-lighthouse-ci">Configure Lighthouse CI</a></li><li><a href="#configure-target">Configure target</a><ul><li><a href="#static-files">Static files</a></li><li><a href="#specific-url">Specific URL</a></li><li><a href="#subfolder-issue">Subfolder issue</a></li></ul></li><li><a href="#execute-lighthouse">Execute Lighthouse</a></li><li><a href="#execute-on-ci-environment">Execute on CI environment</a><ul><li><a href="#github-actions">GitHub Actions</a></li><li><a href="#gitlab-ci">GitLab CI</a></li></ul></li><li><a href="#basic-authentication">Basic authentication</a></li><li><a href="#completed">Completed</a></li></ul></div><h2 id="outline">Outline</h2><p><code class="language-plaintext highlighter-rouge">Google Chrome</code> provides a feature named <code class="language-plaintext highlighter-rouge">Lighthouse</code>, and we can use it to measure the performance of the web app or web page.</p><picture><source srcset="/assets/images/category/code_quality/lighthouse_ci/google_chrome_lighthouse.avif" type="image/avif"/><source srcset="/assets/images/category/code_quality/lighthouse_ci/google_chrome_lighthouse.webp" type="image/webp"/><img src="/assets/images/category/code_quality/lighthouse_ci/google_chrome_lighthouse.png" alt="Lighthouse CI - Google Chrome Lighthouse"/></picture><p><code class="language-plaintext highlighter-rouge">Lighthouse</code> is a tool to analyze the performance of the web app or web page, and show the best practices.</p><ul><li>Lighthouse: <a href="https://github.com/GoogleChrome/lighthouse" rel="nofollow noreferrer" target="_blank">https://github.com/GoogleChrome/lighthouse</a></li></ul><p>In this blog post, I will introduce how to execute <code class="language-plaintext highlighter-rouge">Lighthouse</code> on the local or the <code class="language-plaintext highlighter-rouge">CI</code> environment.</p><h2 id="lighthouse-ci">Lighthouse CI</h2><p><code class="language-plaintext highlighter-rouge">Lighthouse CI</code> is a tool for us to execute <code class="language-plaintext highlighter-rouge">Lighthouse</code> and check the result of it on the <code class="language-plaintext highlighter-rouge">CI</code> environment.</p><ul><li>Lighthouse CI: <a href="https://github.com/GoogleChrome/lighthouse-ci" rel="nofollow noreferrer" target="_blank">https://github.com/GoogleChrome/lighthouse-ci</a></li></ul><p>To execute <code class="language-plaintext highlighter-rouge">Lighthouse CI</code> on the local or the <code class="language-plaintext highlighter-rouge">CI</code> environment, The environment of <code class="language-plaintext highlighter-rouge">16</code> or higher of <code class="language-plaintext highlighter-rouge">NodeJS</code> is required.</p><h2 id="install-lighthouse-ci">Install Lighthouse CI</h2><p>Execute the following command on the <code class="language-plaintext highlighter-rouge">NodeJS</code> environment to install <code class="language-plaintext highlighter-rouge">Lighthouse CI</code>.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save-dev</span> @lhci/cli
</code></pre></div></div><p>If you don’t have the <code class="language-plaintext highlighter-rouge">package.json</code>, you can install <code class="language-plaintext highlighter-rouge">Lighthouse CI</code> on the global environment by executing the following command.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">-g</span> @lhci/cli
</code></pre></div></div><div class="in-feed-ads ads-container"><div class="ads-block ads-left"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-center"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="6492035359"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><h2 id="configure-lighthouse-ci">Configure Lighthouse CI</h2><p>To use <code class="language-plaintext highlighter-rouge">Lighthouse CI</code>, we need to configure <code class="language-plaintext highlighter-rouge">Lighthouse</code>. Make the <code class="language-plaintext highlighter-rouge">.lighthouserc.js</code> file on the root directory of the project, and modify it like the following.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">ci</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">assert</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">preset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lighthouse:recommended</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div><p>If you configure it like this, you can use the recommended configuration provided <code class="language-plaintext highlighter-rouge">Lighthouse</code>.</p><h2 id="configure-target">Configure target</h2><p>Now, we need to configure the scan target of <code class="language-plaintext highlighter-rouge">Lighthouse</code>. You can set the static files or <code class="language-plaintext highlighter-rouge">URL</code> to the target.</p><h3 id="static-files">Static files</h3><p>Static files are a way to inspect the build results of a web site or web page under development. Open the <code class="language-plaintext highlighter-rouge">.lighthouserc.js</code> file that is the configuration file of <code class="language-plaintext highlighter-rouge">Lighthouse</code>, and modify it like the following to scan the static files.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">ci</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">collect</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">staticDistDir</span><span class="p">:</span> <span class="dl">'</span><span class="s1">_site/</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">assert</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">preset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lighthouse:recommended</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div><p>I use <code class="language-plaintext highlighter-rouge">Jekyll</code> to manage the blog. <code class="language-plaintext highlighter-rouge">Jekyll</code> can build blog posts written in <code class="language-plaintext highlighter-rouge">Markdown</code> into <code class="language-plaintext highlighter-rouge">HTML</code> files using the command <code class="language-plaintext highlighter-rouge">bundle exec jekyll build</code>. The files built in this way are created in a folder called <code class="language-plaintext highlighter-rouge">_site</code>.</p><p>By setting the folder of static files created in this way to the <code class="language-plaintext highlighter-rouge">staticDistDir</code> option of <code class="language-plaintext highlighter-rouge">collect</code>, you can set what <code class="language-plaintext highlighter-rouge">Lighthouse</code> will scan.</p><h3 id="specific-url">Specific URL</h3><p>If you can’t set the static files, you can set the <code class="language-plaintext highlighter-rouge">URL</code> of the target pages to make <code class="language-plaintext highlighter-rouge">Lighthouse</code> inspect them. To scan the specific URL, open the <code class="language-plaintext highlighter-rouge">.lighthouserc.js</code> file that is the <code class="language-plaintext highlighter-rouge">Lighthouse</code> configuration file, and modify it like the following.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">ci</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">collect</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">url</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1">// Korean</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/ko/flutter/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/ko/react/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/ko/react-native/</span><span class="dl">'</span><span class="p">,</span>
        <span class="c1">// English</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/en/flutter/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/en/react/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/en/react-native/</span><span class="dl">'</span><span class="p">,</span>
        <span class="c1">// Japanese</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/flutter/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/react/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/react-native/</span><span class="dl">'</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="na">assert</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">preset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lighthouse:recommended</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div><p>After setting it like this, <code class="language-plaintext highlighter-rouge">Lighthouse</code> will inspect the target <code class="language-plaintext highlighter-rouge">URL</code>.</p><h3 id="subfolder-issue">Subfolder issue</h3><p>I configured the target folder to <code class="language-plaintext highlighter-rouge">staticDistDir</code>, there is an issue with the files under sub-folders not being scanned. To solve this issue, I decided to use <code class="language-plaintext highlighter-rouge">sitemap.xml</code>.</p><p>On <code class="language-plaintext highlighter-rouge">JavaScript</code> to read the <code class="language-plaintext highlighter-rouge">sitemap.xml</code> file, I use the <code class="language-plaintext highlighter-rouge">xml-js</code> library.</p><ul><li>xml-js: <a href="https://github.com/nashwaan/xml-js" rel="nofollow noreferrer" target="_blank">https://github.com/nashwaan/xml-js</a></li></ul><p>So, executing the following command to install the <code class="language-plaintext highlighter-rouge">xml-js</code> library.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save-dev</span> xml-js
</code></pre></div></div><p>And then, open the <code class="language-plaintext highlighter-rouge">.lighthouserc.js</code> file and modify it like the following.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">convert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">xml-js</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">SITEMAP_PATH</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">./_site/sitemap.xml</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SITE_URL</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://deku.posstree.com</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">SITEMAP_PATH</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">convert</span><span class="p">.</span><span class="nx">xml2json</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span> <span class="na">compact</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">spaces</span><span class="p">:</span> <span class="mi">4</span> <span class="p">});</span>
<span class="kd">const</span> <span class="nx">json</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">urlset</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">loc</span><span class="p">.</span><span class="nx">_text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">SITE_URL</span><span class="p">,</span> <span class="dl">''</span><span class="p">));</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">ci</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">collect</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">staticDistDir</span><span class="p">:</span> <span class="dl">'</span><span class="s1">./_site/</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">assert</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">preset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lighthouse:recommended</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div><p>You can use it by modifying <code class="language-plaintext highlighter-rouge">SITEMAP_PATH</code> and <code class="language-plaintext highlighter-rouge">SITE_URL</code> according to your project. After modifying the file and executing it, the <code class="language-plaintext highlighter-rouge">Lighthouse</code> configuration reads the <code class="language-plaintext highlighter-rouge">sitemap.xml</code> and removes unnecessary part(<code class="language-plaintext highlighter-rouge">SITE_URL</code>), and configures it to the <code class="language-plaintext highlighter-rouge">Lighthouse</code> option to inspect them by <code class="language-plaintext highlighter-rouge">Lighthouse</code>.</p><p>After modifying the <code class="language-plaintext highlighter-rouge">.lighthouserc.js</code> file and executing <code class="language-plaintext highlighter-rouge">Lighthouse</code>, you can see all pages on <code class="language-plaintext highlighter-rouge">sitemap.xml</code> are scanned well.</p><div class="in-feed-ads ads-container"><div class="ads-block ads-left"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-center"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="6492035359"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><h2 id="execute-lighthouse">Execute Lighthouse</h2><p>All configuration of using <code class="language-plaintext highlighter-rouge">Lighthouse</code> is done. Now, open the <code class="language-plaintext highlighter-rouge">package.json</code> file and add the execution script like the following to prepare executing <code class="language-plaintext highlighter-rouge">Lighthouse</code>.</p><div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"lighthouse"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lhci autorun"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@lhci/cli"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^0.11.0"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div><p>And then, execute the following command to run <code class="language-plaintext highlighter-rouge">Lighthouse</code>.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run lighthouse
</code></pre></div></div><p>If you don’t have the <code class="language-plaintext highlighter-rouge">package.json</code> file, you can execute the command of <code class="language-plaintext highlighter-rouge">Lighthouse</code> directly like the following.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lhci autorun
<span class="c"># npx lhci autorun</span>
</code></pre></div></div><p>If there is no problem, you can see the <code class="language-plaintext highlighter-rouge">.lighthouseci</code> folder is created and the results stored in it. Also, you can see the result of <code class="language-plaintext highlighter-rouge">Lighthouse</code> on the terminal like the following.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
  ✘  viewport failure <span class="k">for </span>minScore assertion
       Does not have a <span class="sb">`</span>&lt;meta <span class="nv">name</span><span class="o">=</span><span class="s2">"viewport"</span><span class="o">&gt;</span><span class="sb">`</span> tag with <span class="sb">`</span>width<span class="sb">`</span> or <span class="sb">`</span>initial-scale<span class="sb">`</span>
       https://web.dev/viewport/

        expected: <span class="o">&gt;=</span>0.9
           found: 0
      all values: 0, 0, 0
</code></pre></div></div><p>You can fix them by seeing the results on the terminal or opening the result files(<code class="language-plaintext highlighter-rouge">.html</code>) in the <code class="language-plaintext highlighter-rouge">.lighthouseci</code> folder on the browser.</p><h2 id="execute-on-ci-environment">Execute on CI environment</h2><p>Next, you can measure the performance with <code class="language-plaintext highlighter-rouge">Lighthouse</code> configured above on the <code class="language-plaintext highlighter-rouge">CI</code> environment.</p><h3 id="github-actions">GitHub Actions</h3><p>Let’s see how to use <code class="language-plaintext highlighter-rouge">GitHub Actions</code> to execute <code class="language-plaintext highlighter-rouge">Lighthouse</code>. To execute <code class="language-plaintext highlighter-rouge">Lighthouse</code> by <code class="language-plaintext highlighter-rouge">GitHub Actions</code>, make the <code class="language-plaintext highlighter-rouge">.github/workflows/ci.yml</code> file and modify it like the following.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">CI</span>
<span class="na">on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">push</span><span class="pi">]</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">lighthouseci</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-node@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">node-version</span><span class="pi">:</span> <span class="m">16</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">npm install</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">npm run lighthouse</span>
</code></pre></div></div><p>If you don’t have the <code class="language-plaintext highlighter-rouge">package.json</code> file, modify the parts of <code class="language-plaintext highlighter-rouge">npm install</code> and <code class="language-plaintext highlighter-rouge">npm run lighthouse</code> like the following.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">npm install -g @lhci/cli</span>
<span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">lhci autorun</span>
</code></pre></div></div><p>If you configured <code class="language-plaintext highlighter-rouge">Lighthouse</code> inspects the static files, you should add the build command to build the static files before executing the <code class="language-plaintext highlighter-rouge">npm run lighthouse</code> or <code class="language-plaintext highlighter-rouge">lhci autorun</code> commands.</p><h3 id="gitlab-ci">GitLab CI</h3><p>To execute <code class="language-plaintext highlighter-rouge">Lighthouse</code> on <code class="language-plaintext highlighter-rouge">GitLab CI</code>, make the <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> file and modify it like the following.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">lighthouse</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">node:16-slim</span>
  <span class="na">script</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">apt-get update</span>
    <span class="pi">-</span> <span class="s">apt-get install -y libgtk-3.0 libgbm-dev libnss3 libatk-bridge2.0-0 libasound2</span>
    <span class="pi">-</span> <span class="s">npm install --global npm@latest</span>
    <span class="pi">-</span> <span class="s">npm install</span>
    <span class="pi">-</span> <span class="s">npm run lighthouse</span>
  <span class="na">only</span><span class="pi">:</span>
    <span class="na">refs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">merge_requests</span>
</code></pre></div></div><p>If you don’t have the <code class="language-plaintext highlighter-rouge">package.json</code> file, modify the parts of <code class="language-plaintext highlighter-rouge">npm install</code> and <code class="language-plaintext highlighter-rouge">npm run lighthouse</code> like the following.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="s">npm install -g @lhci/cli</span>
<span class="pi">-</span> <span class="s">lhci autorun</span>
</code></pre></div></div><p>If you configured <code class="language-plaintext highlighter-rouge">Lighthouse</code> inspects the static files, you should add the build command to build the static files before executing the <code class="language-plaintext highlighter-rouge">npm run lighthouse</code> or <code class="language-plaintext highlighter-rouge">lhci autorun</code> commands.</p><div class="in-feed-ads ads-container"><div class="ads-block ads-left"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-center"><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="6492035359"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><h2 id="basic-authentication">Basic authentication</h2><p>When using <code class="language-plaintext highlighter-rouge">Lighthouse</code> to scan web pages with <code class="language-plaintext highlighter-rouge">URL</code>, sometimes web pages with <code class="language-plaintext highlighter-rouge">Basic authentication</code> enabled are needed to scan.</p><p>To use <code class="language-plaintext highlighter-rouge">Lighthouse</code> to inspect the web pages with <code class="language-plaintext highlighter-rouge">Basic authentication</code> enabled, you need to add some more configuration. First, execute the following command to install <code class="language-plaintext highlighter-rouge">puppeteer</code>.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save-dev</span> puppeteer
</code></pre></div></div><p>And then, make the <code class="language-plaintext highlighter-rouge">puppeteerScript.js</code> file on the root directory of the project and modify it like the following.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">BASIC_AUTH_USER_NAME</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">BASIC_AUTH_USER_NAME</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASIC_AUTH_PASSWORD</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">BASIC_AUTH_PASSWORD</span><span class="p">;</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">main</span><span class="p">(</span><span class="nx">browser</span><span class="p">,</span> <span class="p">{</span> <span class="nx">url</span> <span class="p">})</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">page</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">browser</span><span class="p">.</span><span class="nx">newPage</span><span class="p">();</span>
  <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">({</span>
    <span class="na">username</span><span class="p">:</span> <span class="nx">BASIC_AUTH_USER_NAME</span><span class="p">,</span>
    <span class="na">password</span><span class="p">:</span> <span class="nx">BASIC_AUTH_PASSWORD</span><span class="p">,</span>
  <span class="p">});</span>
  <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">goto</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">main</span><span class="p">;</span>
</code></pre></div></div><p>Store the ID and password of <code class="language-plaintext highlighter-rouge">Basic authentication</code> to the environment variables named <code class="language-plaintext highlighter-rouge">BASIC_AUTH_USER_NAME</code> and <code class="language-plaintext highlighter-rouge">BASIC_AUTH_PASSWORD</code>. And then, open the <code class="language-plaintext highlighter-rouge">.lighthouserc.js</code> file and configure <code class="language-plaintext highlighter-rouge">puppeteer</code> like the following.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">ci</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">collect</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">url</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1">// Korean</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/ko/flutter/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/ko/react/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/ko/react-native/</span><span class="dl">'</span><span class="p">,</span>
        <span class="c1">// English</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/en/flutter/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/en/react/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/en/react-native/</span><span class="dl">'</span><span class="p">,</span>
        <span class="c1">// Japanese</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/flutter/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/react/</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">https://deku.posstree.com/react-native/</span><span class="dl">'</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="na">puppeteerScript</span><span class="p">:</span> <span class="dl">'</span><span class="s1">./puppeteerScript.js</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">puppeteerLaunchOptions</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">defaultViewport</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="na">args</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">--no-sandbox</span><span class="dl">'</span><span class="p">],</span>
      <span class="na">headless</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">assert</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">preset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lighthouse:recommended</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div><p>After modifying it, you can see the page pages with <code class="language-plaintext highlighter-rouge">Basic authentication</code> enabled are scanned well by <code class="language-plaintext highlighter-rouge">Lighthouse</code> when you execute it.</p><h2 id="completed">Completed</h2><p>Done! we’ve seen how to use <code class="language-plaintext highlighter-rouge">Lighthouse CI</code> to run <code class="language-plaintext highlighter-rouge">Lighthouse</code> on the local or the <code class="language-plaintext highlighter-rouge">CI</code> environment. Fast web pages or web apps have a huge impact on user experience (UX). Also, The items measured by <code class="language-plaintext highlighter-rouge">Lighthouse</code> have a great impact on <code class="language-plaintext highlighter-rouge">SEO</code>, so I recommend that you use <code class="language-plaintext highlighter-rouge">Lighthouse</code> to improve the performance of your web pages or web apps.</p><div class="sponsor_container"><a href="https://github.com/sponsors/dev-yakuza" target="_blank" rel="noopener" style=" background-color: #e6ebf1; background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%); background-position: -0.5em; color: #24292e; text-decoration: none; border: 1px solid rgba(27, 31, 35, 0.35); padding: 6px 10px; user-select: none; background-repeat: repeat-x; background-position: -1px -1px; background-size: 110% 110%; border: 1px solid rgba(27, 31, 35, 0.2); border-radius: 0.25em; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; white-space: nowrap; vertical-align: middle; font-size: 17px; font-family: 'Lato', sans-serif !important; margin: 10px; display: inline-block; "><svg style="color: #ea4aaa; vertical-align: text-bottom !important;" viewBox="0 0 12 16" version="1.1" width="16" height="20" aria-hidden="true"><path fill-rule="evenodd" d="M8.727 3C7.091 3 6.001 4.65 6.001 4.65S4.909 3 3.273 3C1.636 3 0 4.1 0 6.3 0 9.6 6 14 6 14s6-4.4 6-7.7C12 4.1 10.364 3 8.727 3z"></path></svg> Github Sponsor </a><style> .bmc-button img { width: 27px !important; margin-bottom: 1px !important; border: none !important; vertical-align: middle !important; } .bmc-button { line-height: 36px !important; height: 37px !important; text-decoration: none !important; display: inline-block !important; color: #ffffff !important; background-color: #ff813f !important; border-radius: 3px !important; border: 1px solid transparent !important; padding: 0px 9px !important; font-size: 17px !important; letter-spacing: -0.08px !important; margin: 10px !important; font-family: 'Lato', sans-serif !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; -o-transition: 0.3s all linear !important; -webkit-transition: 0.3s all linear !important; -moz-transition: 0.3s all linear !important; -ms-transition: 0.3s all linear !important; transition: 0.3s all linear !important; } .bmc-button:hover, .bmc-button:active, .bmc-button:focus { -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; text-decoration: none !important; box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; opacity: 0.85 !important; color: #ffffff !important; }</style><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext"/><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"/><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/j0cXhWiza" rel="noopener noreferrer nofollow"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"/><span style="margin-left:5px">Buy me a coffee</span></a></div><p><code class="language-plaintext highlighter-rouge"> Was my blog helpful? Please leave a comment at the bottom. it will be a great help to me! </code></p><h2>App promotion</h2><div class="book-greeting"> You can use the applications that are created by this blog writer <code class="highlighter-rouge">Deku</code>.<br/><code class="highlighter-rouge">Deku</code> created the applications with Flutter.<br/><br/> If you have interested, please try to download them for free.<br/><br/><div class="row" style="display: flex;"><div class="col-lg-4 col-md-4 col-sm-auto col-auto" style="margin-bottom: 40px; display: flex; align-items: center;"><a class="app_container" href="/en/app/blaboo/en/" target="_blank"><img class="app_logo_image" src="/assets/images/logo/blaboo.png" alt="word learning app for kids, BlaBoo"/><div><div class="app_description">word learning app for kids</div><div class="app_title">BlaBoo</div></div></a></div><div class="col-lg-4 col-md-4 col-sm-auto col-auto" style="margin-bottom: 40px; display: flex; align-items: center;"><a class="app_container" href="/en/app/koreanwords/" target="_blank"><img class="app_logo_image" src="/assets/images/logo/koreanwords.png" alt="Korean vocabulary, TOPIK words"/><div><div class="app_description">Korean TOPIK vocabulary app</div><div class="app_title">TOPIK words</div></div></a></div><div class="col-lg-4 col-md-4 col-sm-auto col-auto" style="margin-bottom: 40px; display: flex; align-items: center;"><a class="app_container" href="/en/app/japanesewords/" target="_blank"><img class="app_logo_image" src="/assets/images/logo/japanesewords.png" alt="Japanese vocabulary app"/><div><div class="app_description">Japanese vocabulary app</div><div class="app_title">Japanese words</div></div></a></div></div><div class="row" style="display: flex;"><div class="col-lg-4 col-md-4 col-sm-auto col-auto" style="margin-bottom: 40px; display: flex; align-items: center;"><a class="app_container" href="/en/app/chinesewords/" target="_blank"><img class="app_logo_image" src="/assets/images/logo/hskwordsen.png" alt="Chinese HSK vocabulary app"/><div><div class="app_description">Chinese HSK vocabulary app</div><div class="app_title">HSK words</div></div></a></div></div></div></article><div class="col-lg-2 col-md-1 d-none d-lg-block right-ads"><ins class="adsbygoogle sticky-top" style="display:block; padding-top: 80px; margin-bottom: 80px;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="9858937018" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="ads-container"><div class="ads-block ads-left"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1936214968" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-center"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1507571483" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="ads-block ads-right"><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="9369594845" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><div class="post-list-container"><div class="header"><div class="header-title">Posts</div><div id="search-bar"><label for="search" style="width: 0; height: 0; overflow: hidden; float: left;">Search</label><i class="fa fa-search" aria-hidden="true"></i><input id="search" type="text" placeholder="Search..."/></div></div><div class="body"><div class="list-group"></div></div><div class="footer"><ul class="pagination"><li class="page-item page-item--previous"><div class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span><span class="sr-only">Previous</span></div></li><li class="page-item page-item--next"><div class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span><span class="sr-only">Next</span></div></li></ul></div></div><script defer type="text/javascript">document.addEventListener("DOMContentLoaded",function(){function e(e,a){$(".page").remove(),$(".page-item--link").remove();var t=$(".post-list-container .body .list-group");e.forEach(function(e,i){var s=Math.floor(i/8)+1,n=t.find(".page-"+s),o=!1===a&&e.url.indexOf(location.pathname)>=0?"active":"",l="";if(l+='<a href="'+e.url+'" class="list-group-item list-group-item-action flex-column align-items-start '+o+'">',l+='  <div class="d-flex w-100 justify-content-between">',l+='    <div class="mb-1">'+e.title+"</div>",l+="  </div>",l+='  <div class="body-text">'+e.description+"</div>",l+="</a>",n.length>0)n.addClass(!0===a&&1===s?"active":o),n.append(l);else{var d="";d+='<div class="page page-'+s+" "+(!0===a&&1===s?"active":o)+'">',d+=l,d+="</div>",t.append(d)}var p="";p+='<li class="page-item page-item--link '+o+'" data-page="'+s+'">',p+='  <div class="page-link" data-page="'+s+'">',p+=s,p+="  </div>",p+="</li>",0===$('.post-list-container .footer .page-item[data-page="'+s+'"]').length&&$(".post-list-container .footer .page-item--next").before(p),!0===a?$("li[data-page=1]").addClass("active"):"active"===o&&$("li[data-page="+s+"]").addClass(o),s>1&&$(".footer").css("display","flex")})}var a=[];$.get("/en/api/code_quality/posts.json",function(t){a=t,t.length>0&&($(".post-list-container").show(),e(t,!1))}),$("body").on("click",".page-link",function(){var e=$(".post-list-container .body .list-group"),a=$(".footer .pagination"),t=a.find(".page-item.active"),i=t.find(".page-link").data("page"),s=$(this).data("page");if($(this).closest(".page-item").hasClass("page-item--previous"))s=i>1?i-1:1;else if($(this).closest(".page-item").hasClass("page-item--next")){var n=a.find(".page-item--link").length;s=i<n?i+1:n}else var s=$(this).data("page");e.find(".page").removeClass("active"),e.find(".page-"+s).addClass("active"),a.find(".page-item").removeClass("active"),a.find('.page-link[data-page="'+s+'"]').closest(".page-item").addClass("active")}),$("#search").on("keyup",function(){var t=this.value.toLowerCase(),i=[];if($(".footer .pagination"),t.length>0){for(var s=0;s<a.length;s++){var n=a[s];(n.title.toLowerCase().indexOf(t)>=0||n.description.toLowerCase().indexOf(t)>=0)&&i.push(n)}e(i,!0)}else e(a,!1)})});</script></div><div class="col-lg-8 col-md-10 mx-auto"><hr/><script src="https://utteranc.es/client.js" repo="dev-yakuza/dev-yakuza.github.io" issue-term="title" label="comment" theme="github-light" crossorigin="anonymous" async></script></div></div></div></div><footer><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto share-title"> SHARE </div><div class="col-lg-8 col-md-10 mx-auto"><ul class="list-inline text-center"><li class="list-inline-item"><a href="https://twitter.com/intent/tweet?text=[Code Quality] Lighthouse CI&url=https://deku.posstree.com/code_quality/lighthouse_ci/" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Twitter </div></a></li><li class="list-inline-item"><a href="https://www.facebook.com/sharer/sharer.php?u=https://deku.posstree.com/code_quality/lighthouse_ci/" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Facebook </div></a></li><li class="list-inline-item"><a href="https://deku.posstree.com/en/feed.xml" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss-square fa-stack-1x fa-inverse" aria-hidden="true"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> RSS </div></a></li></ul><p class="copyright text-muted"> Copyright &copy; dev.yakuza@gmail.com 2025 </p></div></div></div></footer><script src="/assets/vendor/jquery/jquery.min.js"></script><script async src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script><script async src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script><script async src="/assets/scripts.js?v=20250120"></script><link rel="preload" as="style" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/railscasts.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/railscasts.min.css"><script defer src="/assets/highlight/highlight.pack.js"></script><script defer>document.addEventListener("DOMContentLoaded",function(){hljs.initHighlightingOnLoad()});</script></body></html>