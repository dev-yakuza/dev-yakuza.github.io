<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"/> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/> <meta name="twitter:title" content="django ORM"/> <meta name="twitter:description" content="let's see what ORM(Object-Relational Mapping) is and how to create, read, update, delete a data via django ORM(Object-Relational Mapping)."/> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:site" content="@DevYakuza"/> <meta name="twitter:creator" content="@DevYakuza"/> <title>django ORM - let's see what ORM(Object-Relational Mapping) is and how to create, read, update, delete a data via django ORM(Object-Relational Mapping).</title> <meta name="description" content="let&#39;s see what ORM(Object-Relational Mapping) is and how to create, read, update, delete a data via django ORM(Object-Relational Mapping)."/> <meta property="og:url" content="http://localhost:4000/en/django/orm/"/> <meta name="generator" content="Jekyll v3.8.5"/> <meta property="og:title" content="django ORM"/> <meta name="author" content="dev.yakuza@gmail.com"/> <meta property="og:locale" content="en"/> <meta name="description" content="let’s see what ORM(Object-Relational Mapping) is and how to create, read, update, delete a data via django ORM(Object-Relational Mapping)."/> <meta property="og:description" content="let’s see what ORM(Object-Relational Mapping) is and how to create, read, update, delete a data via django ORM(Object-Relational Mapping)."/> <link rel="canonical" href="http://localhost:4000/en/django/orm/"/> <meta property="og:url" content="http://localhost:4000/django/orm/"/> <meta property="og:site_name" content="Dreams the art through programming"/> <meta property="og:image" content="http://localhost:4000/assets/images/category/django/2019/orm/background.jpg"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2019-05-21T00:00:00+09:00"/> <script type="application/ld+json">
{"description":"let’s see what ORM(Object-Relational Mapping) is and how to create, read, update, delete a data via django ORM(Object-Relational Mapping).","author":{"@type":"Person","name":"dev.yakuza@gmail.com"},"@type":"BlogPosting","url":"http://localhost:4000/django/orm/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://dev-yakuza.github.io/assets/images/icon.png"},"name":"dev.yakuza@gmail.com"},"image":"http://localhost:4000/assets/images/category/django/2019/orm/background.jpg","headline":"django ORM","dateModified":"2019-06-03T18:42:46+09:00","datePublished":"2019-05-21T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/django/orm/"},"@context":"http://schema.org"}</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125408913-1"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-125408913-1");</script> <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet"/> <link rel="stylesheet" href="/en/assets/vendor/bootstrap/css/bootstrap.min.css"/> <link rel="stylesheet" href="/en/assets/vendor/font-awesome/css/font-awesome.min.css"/> <link rel="stylesheet" href="/en/assets/main.css?v=20190926"/> <link rel="alternate" type="application/rss+xml" title="Dreams the art through programming" href="/en/feed.xml"/> <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "dev.yakuza",
      "url": "http://localhost:4000",
      "sameAs": [
        "https://www.facebook.com/yakuza.dev.54",
        "https://www.instagram.com/dev_yakuza/",
        "https://twitter.com/DevYakuza"
      ]
    }
  </script> <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000",
      "logo": "https://dev-yakuza.github.io/assets/images/icon.png"
    }
  </script><script type="application/ld+json">
    {
      "@context":"http://schema.org",
      "@type":"ItemList",
      "itemListElement":[{
          "@type":"ListItem",
          "position":1,"url": "http://localhost:4000/en/django/installation/"},{
          "@type":"ListItem",
          "position":2,"url": "http://localhost:4000/en/django/start/"},{
          "@type":"ListItem",
          "position":3,"url": "http://localhost:4000/en/django/models/"},{
          "@type":"ListItem",
          "position":4,"url": "http://localhost:4000/en/django/admin/"},{
          "@type":"ListItem",
          "position":5,"url": "http://localhost:4000/en/django/routing/"},{
          "@type":"ListItem",
          "position":6,"url": "http://localhost:4000/en/django/orm/"},{
          "@type":"ListItem",
          "position":7,"url": "http://localhost:4000/en/django/view/"},{
          "@type":"ListItem",
          "position":8,"url": "http://localhost:4000/en/django/form/"},{
          "@type":"ListItem",
          "position":9,"url": "http://localhost:4000/en/django/heroku/"},{
          "@type":"ListItem",
          "position":10,"url": "http://localhost:4000/en/django/data-seed/"},{
          "@type":"ListItem",
          "position":11,"url": "http://localhost:4000/en/django/response-model-to-json/"},{
          "@type":"ListItem",
          "position":12,"url": "http://localhost:4000/en/django/jwt/"},{
          "@type":"ListItem",
          "position":13,"url": "http://localhost:4000/en/django/custom-user-model/"}]
    }
  </script><link rel="stylesheet" href="/en/assets/highlight/railscasts.css"/> <script src="/assets/highlight/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> </head> <body> <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav"> <div class="container"> <a class="navbar-brand" href="/en/"> <img src="/assets/images/icon.png" alt="dev.yakuza blog logo"/> ヤクザ </a> <div class="navbar-menu-container"> <div class="collapse navbar-collapse"> <ul class="navbar-nav ml-auto"> <li class="nav-item"> <a class="nav-link" href="/en/">Home</a> </li> <li class="nav-item dropdown"> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a> <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/en/ildangongbu/">일단공부(Il-Dan-Gong-Bu)</a> <a class="dropdown-item" href="/en/laravel/">Laravel</a> <a class="dropdown-item" href="/en/books/">Writing Books</a> <a class="dropdown-item" href="/en/blaboo/">BlaBoo</a> <a class="dropdown-item" href="/en/environment/">dev environment</a> <a class="dropdown-item" href="/en/react-native/">React Native</a> <a class="dropdown-item" href="/en/react/">React</a> <a class="dropdown-item" href="/en/kumoncho/">kumoncho</a> <a class="dropdown-item" href="/en/django/">djanog</a> <a class="dropdown-item" href="/en/git/">git</a> <a class="dropdown-item" href="/en/jekyll/">jekyll blog</a> </div> </li> <li class="nav-item"> <a class="nav-link" target="_blank" rel="noopener" href=" /app/list/en/">Apps</a> </li> <li class="nav-item"> <a class="nav-link" href="/en/contact/">Contact</a> </li> </ul> </div> <div class="btn-group-sm btn-translate-group dropdown"> <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="fa fa-language" aria-hidden="true"></i> </button> <div class="dropdown-menu"> <a class="dropdown-item menu-ko" href="/ko/django/orm/">한국어</a> <a class="dropdown-item menu-en" href="/en/django/orm/">English</a> <a class="dropdown-item menu-ja" href="/en/django/orm/">日本語</a> </div> </div> <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"> Menu <i class="fa fa-bars"></i> </button> </div> <div class="collapse navbar-collapse" id="navbarResponsive"> <ul class="navbar-nav ml-auto"> <li class="nav-item"> <a class="nav-link" href="/en/">Home</a> </li> <li class="nav-item dropdown"> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a> <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/en/ildangongbu/">일단공부(Il-Dan-Gong-Bu)</a> <a class="dropdown-item" href="/en/laravel/">Laravel</a> <a class="dropdown-item" href="/en/books/">Writing Books</a> <a class="dropdown-item" href="/en/blaboo/">BlaBoo</a> <a class="dropdown-item" href="/en/environment/">dev environment</a> <a class="dropdown-item" href="/en/react-native/">React Native</a> <a class="dropdown-item" href="/en/react/">React</a> <a class="dropdown-item" href="/en/kumoncho/">kumoncho</a> <a class="dropdown-item" href="/en/django/">djanog</a> <a class="dropdown-item" href="/en/git/">git</a> <a class="dropdown-item" href="/en/jekyll/">jekyll blog</a> </div> </li> <li class="nav-item"> <a class="nav-link" target="_blank" rel="noopener" href=" /app/list/en/">Apps</a> </li> <li class="nav-item"> <a class="nav-link" href="/en/contact/">Contact</a> </li> </ul> </div> </div> </nav> <script>document.addEventListener("DOMContentLoaded",function(){var e=window.location.pathname;e.indexOf("/en/")>=0?($(".menu-ko").prop("href",e.replace("/en/","/ko/")),$(".menu-en").prop("href",e),$(".menu-ja").prop("href",e.replace("/en/","/"))):e.indexOf("/ko/")>=0?($(".menu-ko").prop("href",e),$(".menu-en").prop("href",e.replace("/ko/","/en/")),$(".menu-ja").prop("href",e.replace("/ko/","/"))):($(".menu-ko").prop("href","/ko"+e),$(".menu-en").prop("href","/en"+e),$(".menu-ja").prop("href",e)),$("body").on("show.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$("body").on("hide.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()})});</script> <header class="masthead" style="background-image: url('/assets/images/category/django/2019/orm/background.jpg')"> <div class="overlay"></div> <div class="container"> <div class="row"> <div class="col-lg-8 col-md-10 mx-auto"> <div class="post-heading"> <h1>django ORM</h1> <div class="heading-date"> <i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-03 </div> <h2 class="subheading">let's see what ORM(Object-Relational Mapping) is and how to create, read, update, delete a data via django ORM(Object-Relational Mapping).</h2> </div> </div> </div> </div> </header> <div class="top-ads"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7987914246691031" data-ad-slot="3850742490" data-ad-format="auto" data-full-width-responsive="true"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <div class="container"> <div class="row"> <div class="col-lg-8 col-md-10 mx-auto"> <nav aria-label="breadcrumb"> <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"> <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a itemtype="http://schema.org/Thing" itemprop="item" href="http://localhost:4000"> <span itemprop="name">Home</span> </a> <meta itemprop="position" content="1"/> </li> <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a itemtype="http://schema.org/Thing" itemprop="item" href="http://localhost:4000/en/django"> <span itemprop="name">django</span> </a> <meta itemprop="position" content="2"/> </li> <li class="breadcrumb-item active" aria-current="page" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a itemtype="http://schema.org/Thing" itemprop="item" href="http://localhost:4000/en/django/orm/"> <span itemprop="name">django ORM</span> </a> <meta itemprop="position" content="3"/> </li> </ol> </nav> </div> </div> <div class="row"> <div class="col-lg-2 col-md-1 d-none d-lg-block left-ads"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:120px;height:600px" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1333703444"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <article class="col-lg-8 col-md-10 mx-auto"> <h2 id="outline">Outline</h2> <p>in this blog post, we’ll see what is ORM(Object-Relational Mapping) and how to use it to create, read, update, delete(CRUD - Create Read Update Delete) a data to the database.</p> <p>this blog is a series. if you want to check other blog posts of the series, see the links below.</p> <ul> <li><a href="http://localhost:4000/en/django/installation/" target="_blank">django installation</a></li> <li><a href="http://localhost:4000/en/django/start/" target="_blank">Start django Project</a></li> <li><a href="http://localhost:4000/en/django/models/" target="_blank">Use Models in django</a></li> <li><a href="http://localhost:4000/en/django/admin/" target="_blank">django Administrator Page</a></li> <li><a href="http://localhost:4000/en/django/routing/" target="_blank">django Routing</a></li> <li>django ORM</li> <li><a href="http://localhost:4000/en/django/view/" target="_blank">django View</a></li> <li><a href="http://localhost:4000/en/django/form/" target="_blank">django Form</a></li> <li><a href="http://localhost:4000/en/django/heroku/" target="_blank">Upload django project to Heroku</a></li> </ul> <p>also, this blog series source code is opened on Github. you can see full source code via the link below.</p> <ul> <li>github: <a href="https://github.com/dev-yakuza/django_exercise" target="_blank">https://github.com/dev-yakuza/django_exercise</a></li> </ul> <h2 id="what-is-orm">What Is ORM?</h2> <p><code class="highlighter-rouge">ORM(Object-Relational Mapping)</code> means to <code class="highlighter-rouge">Map(ping)</code> <code class="highlighter-rouge">Object</code> and <code class="highlighter-rouge">Relational database</code>. simply, to map the database table and object makes CRUD is possible without SQL query.</p> <p>we’ve already prepared to use django ORM(Object-Relational Mapping) in the previous blog post(<a href="http://localhost:4000/en/django/models/" target="_blank">Use Models in django</a>). in the previous blog post, we’ve been mapping the <code class="highlighter-rouge">Post</code> Models to the database <code class="highlighter-rouge">blog_post</code> table. we’ll use this Models to understand how to <code class="highlighter-rouge">CRUD</code> with django ORM(Object-Relational Mapping).</p> <p>execute the djanog command below to execute Shell that django basically provides.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># source venv/bin/activate</span>
<span class="c"># cd django_exercise</span>
python manage.py shell
</code></pre></div></div> <p>import <code class="highlighter-rouge">Post</code> Models to execute the code below.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">blog.models</span> <span class="kn">import</span> <span class="n">Post</span>
</code></pre></div></div> <h2 id="read-data">Read Data</h2> <p>execute the code below to <code class="highlighter-rouge">Read</code> all <code class="highlighter-rouge">Post</code> data.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>
</code></pre></div></div> <p>after executing well, you can see the result like below.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> Post.objects.all<span class="o">()</span>
&lt;QuerySet <span class="o">[</span>&lt;Post: this is a test1 title&gt;, &lt;Post: this is a test2 title&gt;]&gt;
</code></pre></div></div> <p>execute the code below to import User Models and store User data to a variable for later.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">admin</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">'dev-yakuza'</span><span class="p">)</span>
</code></pre></div></div> <div class="in-feed-ads"> <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <h2 id="create-data">Create Data</h2> <p>execute the code below to <code class="highlighter-rouge">Create</code> a new <code class="highlighter-rouge">Post</code> data.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">admin</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'This is a test title from django shell'</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="s">'This is a test title from django shell. This is a test title from django shell.'</span><span class="p">)</span>
</code></pre></div></div> <p>after it, you can see the result like below.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> Post.objects.create<span class="o">(</span><span class="nv">author</span><span class="o">=</span>admin, <span class="nv">title</span><span class="o">=</span><span class="s1">'This is a test title from django shell'</span>, <span class="nv">content</span><span class="o">=</span><span class="s1">'This is a test title from django shell. This is a test title from django shell.'</span><span class="o">)</span>
&lt;Post: This is a <span class="nb">test </span>title from django shell&gt;
</code></pre></div></div> <h2 id="check-data-creation">Check Data Creation</h2> <p>execute the code below to check the data stored well in <code class="highlighter-rouge">Post</code> Models.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> Post.objects.all<span class="o">()</span>
&lt;QuerySet <span class="o">[</span>&lt;Post: this is a test1 title&gt;, &lt;Post: this is a test2 title&gt;, &lt;Post: This is a <span class="nb">test </span>title from django shell&gt;]&gt;
</code></pre></div></div> <p>open the new terminal and execute the django command below to start the test server. and then, when you see the administrator page, you can see the data stored well in the screen below.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># source venv/bin/activate</span>
<span class="c"># cd django_exercise</span>
python manage.py runserver
</code></pre></div></div> <p><img src="/assets/images/category/django/2019/orm/check-data-in-administrator-page.png" alt="check the data in django administrator page"/></p> <p>you can use database tools to check the data stored well.</p> <p><img src="/assets/images/category/django/2019/orm/check-data-in-database-tool.png" alt="use database tools to check data stored well"/></p> <h2 id="update-data">Update Data</h2> <p>execute the code below to Read and <code class="highlighter-rouge">Update</code> the data.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'This is a test title from django shell'</span><span class="p">)</span>
<span class="n">post</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">'This is a test title updated from django shell'</span>
<span class="n">post</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div></div> <p>execute the code below to check the data updated.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'updated'</span><span class="p">)</span>
<span class="c"># or</span>
<span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'updated'</span><span class="p">)</span>
</code></pre></div></div> <p>also, we can use the function we defined before in the <code class="highlighter-rouge">Post</code> Models to update.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'updated'</span><span class="p">)</span>
<span class="c"># post.published_at</span>
<span class="n">post</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
<span class="c"># &gt;&gt;&gt; post.published_at</span>
<span class="c"># datetime.datetime(2019, 5, 21, 13, 1, 58, 970677)</span>
</code></pre></div></div> <h2 id="delete-data">Delete Data</h2> <p>execute the code below to <code class="highlighter-rouge">Delete</code> the data we created above.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'updated'</span><span class="p">)</span>
<span class="n">post</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="c"># &gt;&gt;&gt; Post.objects.all()</span>
<span class="c"># &lt;QuerySet [&lt;Post: this is a test1 title&gt;, &lt;Post: this is a test2 title&gt;]&gt;</span>
</code></pre></div></div> <div class="in-feed-ads"> <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <h2 id="selectread-condition">Select(Read) Condition</h2> <p>so far, we saw how to <code class="highlighter-rouge">CRUD(Create Read Update Delete)</code> to the database. below is about selection conditions to select(read) a data</p> <ul> <li>Selection(Read) Condition</li> </ul> <table> <thead> <tr> <th>Condition</th> <th>Description</th> <th>Usage</th> </tr> </thead> <tbody> <tr> <td>__contains</td> <td>query data contains the condition text.</td> <td>Post.objects.filter(title__contains=’test’)</td> </tr> <tr> <td>__icontains</td> <td>query data contains the condition text without distinction of upper-lower case.</td> <td>Post.objects.filter(title__icontains=’this’)</td> </tr> <tr> <td>__lt</td> <td>query data less than(lt) condition value</td> <td>Post.objects.filter(published_at__lt=timezone.now())</td> </tr> <tr> <td>__lte</td> <td>query data less than or equal(lte) condition value</td> <td>Post.objects.filter(published_at__lt=timezone.now())</td> </tr> <tr> <td>__gt</td> <td>query data greater than(gt) condition value</td> <td>Post.objects.filter(published_at__gt=timezone.now())</td> </tr> <tr> <td>__gte</td> <td>query data greater than or equal(gte) condition value</td> <td>Post.objects.filter(published_at__gte=timezone.now())</td> </tr> <tr> <td>__in</td> <td>query data by condition value list.</td> <td>Post.objects.filter(id__in=[1, 2, 3])</td> </tr> <tr> <td>__year</td> <td>query data by condition year</td> <td>Post.objects.filter(created_at__year=’2019’)</td> </tr> <tr> <td>__year</td> <td>query data by condition month</td> <td>Post.objects.filter(created_at__month=’5’)</td> </tr> <tr> <td>__day</td> <td>query data by condition day</td> <td>Post.objects.filter(created_at__day=’21’)</td> </tr> <tr> <td>__isnull</td> <td>query data by null condition</td> <td>Post.objects.filter(published_at__isnull=True)</td> </tr> <tr> <td>__startswith</td> <td>query data starting with condition text.</td> <td>Post.objects.filter(title__startswith=’This’)</td> </tr> <tr> <td>__istartswith</td> <td>query data starting with condition text without deistinction of upper-lower case</td> <td>Post.objects.filter(title__istartswith=’this’)</td> </tr> <tr> <td>__endswith</td> <td>query data ending with condition text.</td> <td>Post.objects.filter(title__endswith=’title’)</td> </tr> <tr> <td>__iendswith</td> <td>query data ending condition text without distinction of upper-lower case</td> <td>Post.objects.filter(title__iendswith=’title’)</td> </tr> <tr> <td>__range</td> <td>query data by condition range(= SQL between feature)</td> <td>Post.objects.filter(id__range=(1, 10))</td> </tr> </tbody> </table> <ul> <li>Exclusion Condition: we can select the data with exclusion condition.</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'This'</span><span class="p">)</span>
</code></pre></div></div> <ul> <li>Multiple Condition: we can select the data with multiple condition like below.</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'this'</span><span class="p">,</span> <span class="n">title__endswith</span><span class="o">=</span><span class="s">'title'</span><span class="p">)</span>
<span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'this'</span><span class="p">)</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">title__endswith</span><span class="o">=</span><span class="s">'title'</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Q</span>
<span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">Q</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'this'</span><span class="p">)</span> <span class="o">|</span> <span class="n">Q</span><span class="p">(</span><span class="n">title__endswith</span><span class="o">=</span><span class="s">'title'</span><span class="p">))</span>
<span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">Q</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'this'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Q</span><span class="p">(</span><span class="n">title__endswith</span><span class="o">=</span><span class="s">'title'</span><span class="p">))</span>
</code></pre></div></div> <ul> <li>조회 범위: 아래와 같이 가져올 데이터의 범위(limit)을 지정할 수 있다.</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s">'This'</span><span class="p">)[:</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div></div> <h2 id="orderingsorting">Ordering(Sorting)</h2> <p>we can order(sort) the data ascending or descending.</p> <ul> <li>Ascending: Post.objects.order_by(‘created_at’)</li> <li>Descending: Post.objects.order_by(‘-created_at’)</li> </ul> <h2 id="exit-shell">Exit Shell</h2> <p>so far, we exercised django ORM(Object-Relational Mapping) with django Shell. execute the code below to exit django Shell.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">exit</span><span class="p">()</span>
</code></pre></div></div> <h2 id="completed">Completed</h2> <p>we saw what is ORM(Object-Relational Mapping) and how to use it on django. ORM(Object-Relational Mapping) is the concept used in many frameworks, so I think remembering it is good for us. anyway, now we can create, read update and delete(CRUD - Create Read Update Delete) the data with django Models!</p> <div class="buy_me_a_coffee_container"> <style> .bmc-button img { width: 27px !important; margin-bottom: 1px !important; box-shadow: none !important; border: none !important; vertical-align: middle !important; } .bmc-button { line-height: 36px !important; height: 37px !important; text-decoration: none !important; display: inline-flex !important; color: #ffffff !important; background-color: #ff813f !important; border-radius: 3px !important; border: 1px solid transparent !important; padding: 0px 9px !important; font-size: 17px !important; letter-spacing: -0.08px !important; box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important; -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; margin: 0 auto !important; font-family: 'Lato', sans-serif !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; -o-transition: 0.3s all linear !important; -webkit-transition: 0.3s all linear !important; -moz-transition: 0.3s all linear !important; -ms-transition: 0.3s all linear !important; transition: 0.3s all linear !important; } .bmc-button:hover, .bmc-button:active, .bmc-button:focus { -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; text-decoration: none !important; box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; opacity: 0.85 !important; color: #ffffff !important; }</style><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"/><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/j0cXhWiza" rel="noopener noreferrer nofollow"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"/><span style="margin-left:5px">Buy me a coffee</span></a> </div> </article> <div class="col-lg-2 col-md-1 d-none d-lg-block right-ads"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:120px;height:600px" data-ad-client="ca-pub-7987914246691031" data-ad-slot="9858937018"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> </div> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1936214968" data-ad-format="auto" data-full-width-responsive="true"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> <div class="row"> <div class="col-lg-8 col-md-10 mx-auto"> <div class="post-list-container"> <div class="header"> <div class="header-title">Posts</div> </div> <div class="body"> <div class="list-group"></div> </div> <div class="footer"> <ul class="pagination"> <li class="page-item page-item--previous"> <div class="page-link" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> <span class="sr-only">Previous</span> </div> </li> <li class="page-item page-item--next"> <div class="page-link" aria-label="Next"> <span aria-hidden="true">&raquo;</span> <span class="sr-only">Next</span> </div> </li> </ul> </div> </div> <script type="text/javascript">document.addEventListener("DOMContentLoaded",function(){$.get("/en/api/django/posts.json",function(e){e.length>0&&($(".post-list-container").show(),e.forEach(function(e){var a=$(".post-list-container .body .list-group"),t=a.find(".page-"+e.page),i=e.url.indexOf(location.pathname)>=0?"active":"",s="";if(s+='<a href="'+e.url+'" class="list-group-item list-group-item-action flex-column align-items-start '+i+'">',s+='  <div class="d-flex w-100 justify-content-between">',s+='    <div class="mb-1">'+e.title+"</div>",s+="  </div>",s+='  <div class="body-text">'+e.description+"</div>",s+="</a>",t.length>0)t.addClass(i),t.append(s);else{var n="";n+='<div class="page page-'+e.page+" "+i+'">',n+=s,n+="</div>",a.append(n)}var p="";p+='<li class="page-item page-item--link '+i+'" data-page="'+e.page+'">',p+='  <div class="page-link" data-page="'+e.page+'">',p+=e.page,p+="  </div>",p+="</li>",0===$('.post-list-container .footer .page-item[data-page="'+e.page+'"]').length&&$(".post-list-container .footer .page-item--next").before(p),"active"===i&&$("li[data-page="+e.page+"]").addClass(i),e.page>1&&$(".footer").css("display","flex")}))}),$("body").on("click",".page-link",function(){var e=$(".post-list-container .body .list-group"),a=$(".footer .pagination"),t=a.find(".page-item.active"),i=t.find(".page-link").data("page"),s=$(this).data("page");if($(this).closest(".page-item").hasClass("page-item--previous"))s=i>1?i-1:1;else if($(this).closest(".page-item").hasClass("page-item--next")){var n=a.find(".page-item--link").length;s=i<n?i+1:n}else var s=$(this).data("page");e.find(".page").removeClass("active"),e.find(".page-"+s).addClass("active"),a.find(".page-item").removeClass("active"),a.find('.page-link[data-page="'+s+'"]').closest(".page-item").addClass("active")})});</script> </div> <div class="col-lg-8 col-md-10 mx-auto"> <hr/> <div id="disqus_thread"></div> <script>var disqus_config=function(){this.page.url="http://localhost:4000/django/orm/",this.page.identifier="http://localhost:4000/django/orm/"};!function(){var t=document,e=t.createElement("script");e.src="https://https-dev-yakuza-github-io-en.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> </div> </div> <hr/> <footer> <div class="container"> <div class="row"> <div class="col-lg-8 col-md-10 mx-auto share-title"> SHARE </div> <div class="col-lg-8 col-md-10 mx-auto"> <ul class="list-inline text-center"> <li class="list-inline-item"> <a href="https://twitter.com/intent/tweet?text=django ORM&url=http://localhost:4000/django/orm/" rel="nofollow noreferrer noopener" target="_blank"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </li> <li class="list-inline-item"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/django/orm/" rel="nofollow noreferrer noopener" target="_blank"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> </a> </li> <li class="list-inline-item"> <a href="http://localhost:4000/en/feed.xml" rel="nofollow noreferrer noopener" target="_blank"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss-square fa-stack-1x fa-inverse" aria-hidden="true"></i> </span> </a> </li> </ul> <p class="copyright text-muted"> Copyright &copy; dev.yakuza@gmail.com 2019 </p> </div> </div> </div> </footer> <script src="/assets/vendor/jquery/jquery.min.js"></script> <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script> <script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script> <script src="/assets/scripts.js"></script> </body> </html>