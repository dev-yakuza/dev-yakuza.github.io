<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="https://jekyllrb.com/" version="3.9.3">Jekyll</generator><link href="https://deku.posstree.com/en/feed.xml" rel="self" type="application/atom+xml"/><link href="https://deku.posstree.com/en/" rel="alternate" type="text/html"/><updated>2024-03-13T07:29:42+09:00</updated><id>https://deku.posstree.com/feed.xml</id><title type="html">Deku</title><subtitle>『Programming Artist, DeKu』</subtitle><author><name>dev.yakuza@gmail.com</name></author><entry xml:lang="en"><title type="html">[GitHub Actions] Set Reviewers Automatically</title><link href="https://deku.posstree.com/en/share/github-actions/set-reviewers/" rel="alternate" type="text/html" title="[GitHub Actions] Set Reviewers Automatically"/><published>2024-02-03T00:00:00+09:00</published><updated>2024-02-23T11:35:27+09:00</updated><id>https://deku.posstree.com/share/github-actions/github-actions-set-reviewers-en</id><content type="html" xml:base="https://deku.posstree.com/share/github-actions/set-reviewers/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#github-actions&quot;&gt;GitHub Actions&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#github-actions-for-dependabot&quot;&gt;GitHub Actions for Dependabot&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#actionsgithub-script&quot;&gt;actions/github-script&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;When I create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub&lt;/code&gt;, I manually set the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Reviewers&lt;/code&gt; as follows.&lt;/p&gt; &lt;picture&gt; &lt;source srcset=&quot;/assets/images/category/share/2024/set-reviewers/pull_request_reviewers.avif&quot; type=&quot;image/avif&quot; /&gt; &lt;source srcset=&quot;/assets/images/category/share/2024/set-reviewers/pull_request_reviewers.webp&quot; type=&quot;image/webp&quot; /&gt; &lt;img src=&quot;/assets/images/category/share/2024/set-reviewers/pull_request_reviewers.png&quot; alt=&quot;GitHub Actions - Set reviewers&quot; /&gt; &lt;/picture&gt; &lt;p&gt;In this blog post, I will introduce how to set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Reviewers&lt;/code&gt; automatically in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt;.&lt;/p&gt; &lt;h2 id=&quot;github-actions&quot;&gt;GitHub Actions&lt;/h2&gt; &lt;p&gt;To set the reviewers automatically in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt;, create the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.github/workflows/set_reviewers.yml&lt;/code&gt; file and modify it as follows.&lt;/p&gt; &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set reviewers&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pull_request&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;set-reviewers&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set reviewers&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;timeout-minutes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set reviewers&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actor=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;reviewers=(&quot;USER_1&quot; &quot;USER_2&quot; &quot;USER_3&quot;)&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;reviewers=($(printf &quot;%s\n&quot; &quot;${reviewers[@]}&quot; | grep -v &quot;$actor&quot; | shuf -n 2))&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;reviewers=$(printf &apos;%s\n&apos; &quot;${reviewers[@]}&quot; | jq -R . | jq -s .)&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;curl -X POST \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-H &quot;Content-Type: application/json&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-H &quot;Authorization: token $&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-d &quot;{ \&quot;reviewers\&quot;: $reviewers }&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://api.github.com/repos/$/pulls/$/requested_reviewers&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;This &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt; is designed to randomly set 2 people as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Reviewers&lt;/code&gt; by excluding the person who created the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;USER_1&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;USER_2&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;USER_3&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;actor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reviewers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;USER_1&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;USER_2&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;USER_3&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reviewers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;%s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;reviewers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[@]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$actor&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;shuf&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 2&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;The reviewers of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; cannot be set to the person who created the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; by default.&lt;/p&gt; &lt;p&gt;When using this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt;, you can set reviewers randomly every time the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; is created and reduce the time to select reviewers.&lt;/p&gt; &lt;div class=&quot;in-feed-ads ads-container&quot;&gt; &lt;div class=&quot;ads-block ads-left&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;div class=&quot;ads-block ads-center&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;6492035359&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;/div&gt; &lt;h2 id=&quot;github-actions-for-dependabot&quot;&gt;GitHub Actions for Dependabot&lt;/h2&gt; &lt;p&gt;The previous &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt; does not work with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dependabot&lt;/code&gt; creates. To make it work, you need to modify the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pull_request&lt;/code&gt; part to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pull_request_target&lt;/code&gt;. Open the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.github/workflows/set_reviewers.yml&lt;/code&gt; file and modify it as follows.&lt;/p&gt; &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set reviewers&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pull_request_target&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;set-reviewers&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set reviewers&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;timeout-minutes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set reviewers&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actor=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;reviewers=(&quot;USER_1&quot; &quot;USER_2&quot; &quot;USER_3&quot;)&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;reviewers=($(printf &quot;%s\n&quot; &quot;${reviewers[@]}&quot; | grep -v &quot;$actor&quot; | shuf -n 2))&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;reviewers=$(printf &apos;%s\n&apos; &quot;${reviewers[@]}&quot; | jq -R . | jq -s .)&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;curl -X POST \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-H &quot;Content-Type: application/json&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-H &quot;Authorization: token $&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-d &quot;{ \&quot;reviewers\&quot;: $reviewers }&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://api.github.com/repos/$/pulls/$/requested_reviewers&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;You can use any &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;secrets&lt;/code&gt; in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dependabot&lt;/code&gt; creates, and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; created by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dependabot&lt;/code&gt; will run with read-only permissions, so an error occurs.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.blog/changelog/2021-02-19-github-actions-workflows-triggered-by-dependabot-prs-will-run-with-read-only-permissions/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;GitHub Actions: Workflows triggered by Dependabot PRs will run with read-only permissions&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://securitylab.github.com/research/github-actions-preventing-pwn-requests/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;Keeping your GitHub Actions and workflows secure Part 1: Preventing pwn requests&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;To fix this, you need to modify the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pull_request&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pull_request_target&lt;/code&gt; in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on&lt;/code&gt; condition.&lt;/p&gt; &lt;h2 id=&quot;actionsgithub-script&quot;&gt;actions/github-script&lt;/h2&gt; &lt;p&gt;If you use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;actions/github-script&lt;/code&gt; provided by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub&lt;/code&gt;, you can write more readable code.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/actions/github-script&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;actions/github-script&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;To use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;actions/github-script&lt;/code&gt;, you can modify it as follows.&lt;/p&gt; &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set reviewers&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pull_request_target&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;set-reviewers&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set reviewers&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;timeout-minutes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set reviewers&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/github-script@v5&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;github-token&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const reviewers = [&quot;USER_1&quot;, &quot;USER_2&quot;, &quot;USER_3&quot;];&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const actor = context.payload.pull_request.user.login;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const { owner, repo } = context.repo;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const prNumber = context.payload.pull_request.number;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const { data: assignedReviewers } = await github.rest.pulls.listRequestedReviewers({&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;owner,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;repo,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pull_number: prNumber,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;if (assignedReviewers.length === 0) {&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const filteredReviewers = reviewers.filter(reviewer =&amp;gt; reviewer !== actor);&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const selectedReviewers = filteredReviewers.sort(() =&amp;gt; Math.random() - 0.5).slice(0, 2);&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const prNumber = context.payload.pull_request.number;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;await github.rest.pulls.requestReviewers({&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;owner,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;repo,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pull_number: prNumber,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;reviewers: selectedReviewers&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;Done! We’ve seen how to set reviewers automatically in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt;. By using this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt;, you can reduce the time to set reviewers and prevent focusing on specific users for review requests.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="share"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/share/github-actions/background.jpg"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/share/github-actions/background.jpg" xmlns:media="http://search.yahoo.com/mrss/"/></entry><entry xml:lang="en"><title type="html">[GitHub Actions] Set Assignees automatically</title><link href="https://deku.posstree.com/en/share/github-actions/set-assignees/" rel="alternate" type="text/html" title="[GitHub Actions] Set Assignees automatically"/><published>2024-02-03T00:00:00+09:00</published><updated>2024-02-20T19:51:52+09:00</updated><id>https://deku.posstree.com/share/github-actions/github-actions-set-assignees-en</id><content type="html" xml:base="https://deku.posstree.com/share/github-actions/set-assignees/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#create-github-actions&quot;&gt;Create GitHub Actions&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#dependabot-specific-github-actions&quot;&gt;Dependabot-specific GitHub Actions&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#actionsgithub-script&quot;&gt;actions/github-script&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;When creating a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub&lt;/code&gt;, I was manually setting the creator of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; as follows.&lt;/p&gt; &lt;picture&gt; &lt;source srcset=&quot;/assets/images/category/share/2024/set-assignees/pull_request_assignees.avif&quot; type=&quot;image/avif&quot; /&gt; &lt;source srcset=&quot;/assets/images/category/share/2024/set-assignees/pull_request_assignees.webp&quot; type=&quot;image/webp&quot; /&gt; &lt;img src=&quot;/assets/images/category/share/2024/set-assignees/pull_request_assignees.png&quot; alt=&quot;GitHub Actions - Set assignees&quot; /&gt; &lt;/picture&gt; &lt;p&gt;Since the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; is ultimately the person who created the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt;, I think it would be good to automatically set the person who created the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; every time a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; is created.&lt;/p&gt; &lt;p&gt;In this blog post, I will introduce how to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt; to automatically set the person who created the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt;.&lt;/p&gt; &lt;h2 id=&quot;create-github-actions&quot;&gt;Create GitHub Actions&lt;/h2&gt; &lt;p&gt;Then let’s create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt; that automatically sets the person who created the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt;. Create the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.github/workflows/set_assignees.yml&lt;/code&gt; file and modify it as follows.&lt;/p&gt; &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assigness&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pull_request&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;types&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;opened&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;set-assignees&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assignees&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;timeout-minutes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assignees&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;OWNER=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;REPOSITORY=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;TOKEN=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;PULL_REQUEST_NUMBER=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ASSIGNEES=$(curl -s \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://api.github.com/repos/$OWNER/$REPOSITORY/issues/$PULL_REQUEST_NUMBER&quot; | \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;jq --raw-output &apos;.assignees // [] | .[].login&apos;)&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;if [ -z &quot;$ASSIGNEES&quot; ]; then&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ASSIGNEE=$&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;curl -X POST \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-H &quot;Content-Type: application/json&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-H &quot;Authorization: token $TOKEN&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-d &quot;{ \&quot;assignees\&quot;: \&quot;${ASSIGNEE}\&quot; }&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;https://api.github.com/repos/$REPOSITORY/issues/$PULL_REQUEST_NUMBER/assignees&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fi&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;I made it to use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;API&lt;/code&gt; provided by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub&lt;/code&gt; to set the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; creator (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;github.actor&lt;/code&gt;) to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt;.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Official document: &lt;a href=&quot;https://docs.github.com/en/rest/issues/assignees?apiVersion=2022-11-28#list-assignees&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;List assignees&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Official document: &lt;a href=&quot;https://docs.github.com/en/rest/issues/assignees?apiVersion=2022-11-28#add-assignees-to-an-issue&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;Add assignees to an issue&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads ads-container&quot;&gt; &lt;div class=&quot;ads-block ads-left&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;div class=&quot;ads-block ads-center&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;6492035359&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;/div&gt; &lt;h2 id=&quot;dependabot-specific-github-actions&quot;&gt;Dependabot-specific GitHub Actions&lt;/h2&gt; &lt;p&gt;I use &lt;a href=&quot;https://docs.github.com/en/code-security/dependabot/working-with-dependabot&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;Dependabot&lt;/a&gt; in my personal project. I wanted to set the project &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Owner&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; created by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dependabot&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;For this, I modified the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt; as follows.&lt;/p&gt; &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assigness&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pull_request&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;types&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;opened&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;set-assignees&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assignees&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;timeout-minutes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assignees&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;OWNER=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;REPOSITORY=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;TOKEN=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;PULL_REQUEST_NUMBER=&quot;$&quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ASSIGNEES=$(curl -s \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://api.github.com/repos/$OWNER/$REPOSITORY/issues/$PULL_REQUEST_NUMBER&quot; | \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;jq --raw-output &apos;.assignees // [] | .[].login&apos;)&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;if [ -z &quot;$ASSIGNEES&quot; ]; then&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ASSIGNEE=$&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;BRANCH_NAME=$&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;if [[ &quot;${BRANCH_NAME}&quot; == &quot;dependabot/&quot;* ]]; then&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ASSIGNEE=$OWNER&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fi&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;curl -X POST \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-H &quot;Content-Type: application/json&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-H &quot;Authorization: token $TOKEN&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;-d &quot;{ \&quot;assignees\&quot;: \&quot;${ASSIGNEE}\&quot; }&quot; \&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;https://api.github.com/repos/$REPOSITORY/issues/$PULL_REQUEST_NUMBER/assignees&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fi&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;I added &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dependabot/&lt;/code&gt; to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;branch&lt;/code&gt; name and set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;github.repository_owner&lt;/code&gt; as follows.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;BRANCH_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;BRANCH_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;dependabot/&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ASSIGNEE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$OWNER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;However this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt; did not work properly in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dependabot&lt;/code&gt;. For security reasons, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dependabot&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; cannot use any &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;secrets&lt;/code&gt; and can only perform &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Readonly&lt;/code&gt; operations, so an error occurred.&lt;/p&gt; &lt;p&gt;To fix this, you need to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pull_request_target&lt;/code&gt; instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pull_request&lt;/code&gt; in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on&lt;/code&gt;.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.blog/changelog/2021-02-19-github-actions-workflows-triggered-by-dependabot-prs-will-run-with-read-only-permissions/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;GitHub Actions: Workflows triggered by Dependabot PRs will run with read-only permissions&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://securitylab.github.com/research/github-actions-preventing-pwn-requests/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;Keeping your GitHub Actions and workflows secure Part 1: Preventing pwn requests&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assigness&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pull_request_target&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;types&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;opened&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;actionsgithub-script&quot;&gt;actions/github-script&lt;/h2&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub&lt;/code&gt; provides &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;actions/github-script&lt;/code&gt; that allows you to write more readable code.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/actions/github-script&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;actions/github-script&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;By using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;actions/github-script&lt;/code&gt;, you can modify it as follows.&lt;/p&gt; &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assignees&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pull_request_target&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;types&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;opened&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;set-assignees&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assignees&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;timeout-minutes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/checkout@v4&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set assignees&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/github-script@v6&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;github-token&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const { owner, repo } = context.repo;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const prNumber = context.payload.pull_request.number;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const response = await github.rest.issues.get({&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;owner,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;repo,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;issue_number: prNumber,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const { assignees } = response.data;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;if (assignees.length === 0) {&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;let assignee = context.actor;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;const branchName = context.payload.pull_request.head.ref;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;if (branchName.startsWith(&apos;dependabot/&apos;)) {&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;assignee = owner;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;await github.rest.issues.addAssignees({&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;owner: owner,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;repo: repo,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;issue_number: prNumber,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;assignees: [assignee]&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;Done! We’ve seen how to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt; to automatically set the person who created the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt;. If you are manually setting the person who created the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Assignees&lt;/code&gt; every time you create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pull request&lt;/code&gt;, try using this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt; to automate it.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="share"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/share/github-actions/background.jpg"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/share/github-actions/background.jpg" xmlns:media="http://search.yahoo.com/mrss/"/></entry><entry xml:lang="en"><title type="html">[macOS] Command to Prevent Sleep Mode</title><link href="https://deku.posstree.com/en/share/macos/caffeinate/" rel="alternate" type="text/html" title="[macOS] Command to Prevent Sleep Mode"/><published>2024-01-31T00:00:00+09:00</published><updated>2024-02-02T21:52:29+09:00</updated><id>https://deku.posstree.com/share/macos/caffeinate-en</id><content type="html" xml:base="https://deku.posstree.com/share/macos/caffeinate/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#caffeinate&quot;&gt;Caffeinate&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#terminate-caffeinate&quot;&gt;Terminate Caffeinate&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#why-use-caffeinate&quot;&gt;Why Use Caffeinate&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;macOS&lt;/code&gt; is set to sleep mode by default. Sleep mode automatically turns off the screen or switches the machine to sleep mode after a certain period of time, helping to reduce power consumption, extend the battery life of a notebook, or increase the energy efficiency of a desktop.&lt;/p&gt; &lt;p&gt;In this blog post, I will introduce how to prevent sleep mode from automatically switching using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command.&lt;/p&gt; &lt;h2 id=&quot;caffeinate&quot;&gt;Caffeinate&lt;/h2&gt; &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command is a command that prevents sleep mode from automatically switching in macOS. This command keeps the system active, preventing the screen from turning off or the computer from automatically entering sleep mode.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;caffeinate &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;options] &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;If you want to prevent the computer from switching to sleep mode when no operation is performed, you can run the command as follows.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;caffeinate &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 3600 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-d&lt;/code&gt;: Prevents the screen from turning off.&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t&lt;/code&gt;: Sets how long to keep the system active. The above command keeps the system active for 1 hour.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;You can see that the computer maintains an active state without switching to sleep mode by running the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command in the terminal and running a time-consuming task in another terminal.&lt;/p&gt; &lt;h2 id=&quot;terminate-caffeinate&quot;&gt;Terminate Caffeinate&lt;/h2&gt; &lt;p&gt;When a time-consuming task is completed, you must terminate the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command. You can terminate the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command by pressing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl + C&lt;/code&gt; in the terminal where the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command is executed, or by closing the terminal where the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command is executed.&lt;/p&gt; &lt;h2 id=&quot;why-use-caffeinate&quot;&gt;Why Use Caffeinate&lt;/h2&gt; &lt;p&gt;There is also a way to disable sleep mode in the settings, but it is generally better to keep it enabled because disabling sleep mode can increase power consumption and shorten battery life. If you forget to enable sleep mode after disabling it in the settings, the computer will continue to be used with sleep mode disabled, which can cause problems such as shortened battery life.&lt;/p&gt; &lt;p&gt;Also, in the case of a company computer, settings are forced to turn off the screen automatically when you leave your seat for security reasons.&lt;/p&gt; &lt;p&gt;At this time, if you need to run a time-consuming task (command) temporarily, you can use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command to prevent sleep mode from automatically switching, and terminate the command after the task is completed to keep the default settings.&lt;/p&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;Done! We’ve seen how to prevent sleep mode from automatically switching in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;macOS&lt;/code&gt; using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command. If you want to prevent sleep mode from automatically switching while keeping the default settings, try using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Caffeinate&lt;/code&gt; command.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="share"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/share/github-actions/background.jpg"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/share/github-actions/background.jpg" xmlns:media="http://search.yahoo.com/mrss/"/></entry><entry xml:lang="en"><title type="html">[Flutter] Fix Lexical or Preprocessor Issue (Xcode): *.h file not found error</title><link href="https://deku.posstree.com/en/flutter/error/lexical_or_preprocessor_file_not_found/" rel="alternate" type="text/html" title="[Flutter] Fix Lexical or Preprocessor Issue (Xcode): *.h file not found error"/><published>2024-01-26T00:00:00+09:00</published><updated>2024-02-01T11:50:51+09:00</updated><id>https://deku.posstree.com/flutter/error/test-concurrency-en</id><content type="html" xml:base="https://deku.posstree.com/flutter/error/lexical_or_preprocessor_file_not_found/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#cause-of-error&quot;&gt;Cause of error&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#solve-error&quot;&gt;Solve error&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;When I was working on a Flutter project, I suddenly encountered the following error.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;flutter Lexical or Preprocessor Issue &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Xcode&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: &lt;span class=&quot;s1&quot;&gt;&apos;FirebaseABTesting/FirebaseABTesting.h&apos;&lt;/span&gt; file not found &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Even if there was no modification, such an error occurred, and the project could not be built on iOS. In this blog post, I will introduce how to fix the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flutter Lexical or Preprocessor Issue (Xcode): *.h file not found&lt;/code&gt; error that suddenly occurs in Flutter.&lt;/p&gt; &lt;h2 id=&quot;cause-of-error&quot;&gt;Cause of error&lt;/h2&gt; &lt;p&gt;If you encounter the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flutter Lexical or Preprocessor Issue (Xcode): *.h file not found&lt;/code&gt; error while developing a project in Flutter, it is likely due to an Xcode update.&lt;/p&gt; &lt;p&gt;In most cases, this is a problem caused by the version of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; being lowered due to an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Xcode&lt;/code&gt; update. Therefore, even projects that were built normally may experience the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flutter Lexical or Preprocessor Issue (Xcode): *.h file not found&lt;/code&gt; error due to the version of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; being lowered due to an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Xcode&lt;/code&gt; update.&lt;/p&gt; &lt;h2 id=&quot;solve-error&quot;&gt;Solve error&lt;/h2&gt; &lt;p&gt;In this case, you can solve the problem by updating the version of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt;. Since I installed &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Homebrew&lt;/code&gt;, I updated the version of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Homebrew&lt;/code&gt; as follows.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew upgrade cocoapods &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After updating &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt;, move to the problematic project and reinstall &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; by running the following command.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pod &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;If necessary, delete the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; folder and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt; file, and then reinstall &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; by running the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; command again.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; Pods Podfile.lock pod &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Now, if you rebuild the project, you can see that it is built normally.&lt;/p&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;Done! we’ve seen how to fix the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flutter Lexical or Preprocessor Issue (Xcode): *.h file not found&lt;/code&gt; error that suddenly occurs in Flutter. If you encounter the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flutter Lexical or Preprocessor Issue (Xcode): *.h file not found&lt;/code&gt; error, try updating the version of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; to solve it.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="flutter"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/flutter/background.png"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/flutter/background.png" xmlns:media="http://search.yahoo.com/mrss/"/></entry><entry xml:lang="en"><title type="html">[Flutter] Improve test execution speed with concurrency option</title><link href="https://deku.posstree.com/en/flutter/test/concurrency/" rel="alternate" type="text/html" title="[Flutter] Improve test execution speed with concurrency option"/><published>2024-01-26T00:00:00+09:00</published><updated>2024-01-28T20:31:50+09:00</updated><id>https://deku.posstree.com/flutter/test/test-concurrency-en</id><content type="html" xml:base="https://deku.posstree.com/flutter/test/concurrency/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#concurency-option&quot;&gt;concurency option&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#check-the-number-of-cores&quot;&gt;Check the number of cores&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#compare-test-execution-speed&quot;&gt;Compare test execution speed&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#compare-test-execution-speed-in-github-actions&quot;&gt;Compare test execution speed in GitHub Actions&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;When developing an app in Flutter, you write test code and run it to improve the stability of the service. However, as the size of the project grows, the amount of test code also increases. So, the time it takes to run test code also increases.&lt;/p&gt; &lt;p&gt;In this blog post, I will introduce how to run test code in parallel using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option to improve the test execution speed.&lt;/p&gt; &lt;h2 id=&quot;concurency-option&quot;&gt;concurency option&lt;/h2&gt; &lt;p&gt;When running a test in Flutter, you can run the test code in parallel using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option. This reduces the time it takes to run the test code.&lt;/p&gt; &lt;p&gt;When you run the following command, you can check the options available in the Flutter test command.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;flutter &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Among the various options, you can check the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option as follows.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt;, &lt;span class=&quot;nt&quot;&gt;--concurrency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;&lt;span class=&quot;nb&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; The number of concurrent &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;processes to run. This will be ignored when running integration tests. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;You can also check the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option in the official documentation.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Officail document: &lt;a href=&quot;https://pub.dev/packages/test#test-concurrency&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;Test concurrency&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;check-the-number-of-cores&quot;&gt;Check the number of cores&lt;/h2&gt; &lt;p&gt;By default, Flutter test command is set to use half of the host CPU cores.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Test suites run concurrently by default, using half of the host’s CPU cores.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Therefore, if you set the cores less than half of the host machine’s cores to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option, the performance may be worse than when you run it without setting the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option.&lt;/p&gt; &lt;p&gt;So, you need to check the number of cores of the current machine and set the appropriate number of cores. You can check the number of cores of the machine by running the following command.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;nproc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--all&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;compare-test-execution-speed&quot;&gt;Compare test execution speed&lt;/h2&gt; &lt;p&gt;Let’s see how much the test code execution speed improves by using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option. Run the following command in your Flutter project to run the test code.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;flutter &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After running the test code, you can check the time it took to run the test code as follows.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;02:10 +657: All tests passed! &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Without the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option, it takes &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2 minutes and 10 seconds&lt;/code&gt; to run the test code. Now, let’s run the test code using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option as follows..&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;flutter &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--concurrency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nproc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--all&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After running the test code, you can check the time it took to run the test code as follows.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;02:02 +657: All tests passed! &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;You can see that the time it takes to run the test code is reduced by about &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;8 seconds&lt;/code&gt; when using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option.&lt;/p&gt; &lt;h2 id=&quot;compare-test-execution-speed-in-github-actions&quot;&gt;Compare test execution speed in GitHub Actions&lt;/h2&gt; &lt;p&gt;In my case, the performance of the local machine (12 cores) is so good that I can’t see much effect, but you can see a bigger effect in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CI/CD&lt;/code&gt; environment. When running the test code in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt; without using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option, you can see that it takes about &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;7 minutes&lt;/code&gt; as follows.&lt;/p&gt; &lt;picture&gt; &lt;source srcset=&quot;/assets/images/category/flutter/2024/test-concurrency/time_without_concurrency_option.avif&quot; type=&quot;image/avif&quot; /&gt; &lt;source srcset=&quot;/assets/images/category/flutter/2024/test-concurrency/time_without_concurrency_option.webp&quot; type=&quot;image/webp&quot; /&gt; &lt;img src=&quot;/assets/images/category/flutter/2024/test-concurrency/time_without_concurrency_option.png&quot; alt=&quot;Flutter - test without concurrency option&quot; /&gt; &lt;/picture&gt; &lt;p&gt;If you run the test code using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GitHub Actions&lt;/code&gt;, you can see that it takes about &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;4 minutes&lt;/code&gt; as follows.&lt;/p&gt; &lt;picture&gt; &lt;source srcset=&quot;/assets/images/category/flutter/2024/test-concurrency/time_with_concurrency_option.avif&quot; type=&quot;image/avif&quot; /&gt; &lt;source srcset=&quot;/assets/images/category/flutter/2024/test-concurrency/time_with_concurrency_option.webp&quot; type=&quot;image/webp&quot; /&gt; &lt;img src=&quot;/assets/images/category/flutter/2024/test-concurrency/time_with_concurrency_option.png&quot; alt=&quot;Flutter - test with concurrency option&quot; /&gt; &lt;/picture&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;Done! we’ve seen how to improve the test execution speed in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Flutter&lt;/code&gt; by using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option in the test. If you’re not using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option yet, try adding the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;concurrency&lt;/code&gt; option to improve the test execution speed.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="flutter"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/flutter/background.png"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/flutter/background.png" xmlns:media="http://search.yahoo.com/mrss/"/></entry><entry xml:lang="en"><title type="html">[Monoepo] Yarn Workspaces</title><link href="https://deku.posstree.com/en/environment/monorepo/yarn_workspaces/" rel="alternate" type="text/html" title="[Monoepo] Yarn Workspaces"/><published>2024-01-18T00:00:00+09:00</published><updated>2024-03-10T11:36:58+09:00</updated><id>https://deku.posstree.com/environment/monorepo/monorepo-yarn_workspaces-en</id><content type="html" xml:base="https://deku.posstree.com/environment/monorepo/yarn_workspaces/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#contents&quot;&gt;Contents&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#blog-series&quot;&gt;Blog Series&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#yarn-workspaces&quot;&gt;Yarn Workspaces&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#example&quot;&gt;Example&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#yarn-workspaces-setup&quot;&gt;Yarn Workspaces Setup&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#check-yarn-workspaces&quot;&gt;Check Yarn Workspaces&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#gitignore&quot;&gt;gitignore&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;In this blog post, I will introduce how to set up a monorepo using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt;.&lt;/p&gt; &lt;h2 id=&quot;blog-series&quot;&gt;Blog Series&lt;/h2&gt; &lt;p&gt;This blog is a series. Please check other blog posts through the following links.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/repository_strategy/&quot; target=&quot;\_blank&quot;&gt;[Project Management] Repository Strategy&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/tools/&quot; target=&quot;\_blank&quot;&gt;[JavaScript] Tools for Monorepo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/module-resolutions/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Node JS module resolution&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/symlink/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Symlink&lt;/a&gt;&lt;/li&gt; &lt;li&gt;[Monorepo] Yarn Workspaces&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;yarn-workspaces&quot;&gt;Yarn Workspaces&lt;/h2&gt; &lt;p&gt;In the previous blog post(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Tools for Monorepo&lt;/code&gt;), I introduced &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt;.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/tools/&quot; target=&quot;\_blank&quot;&gt;[JavaScript] Tools for Monorepo&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;In this blog post, I will introduce how to set up a monorepo using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt;.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Office document: &lt;a href=&quot;https://yarnpkg.com/features/workspaces&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;Workspaces&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt; is a feature that allows you to manage multiple projects in a single codebase using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; introduced in the previous blog post. This feature makes it easy to set up a monorepo.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/symlink/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Symlink&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt; &lt;p&gt;Let’s create an example to check the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspace&lt;/code&gt; feature provided by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yarn&lt;/code&gt;. First, create a folder and file structure as follows.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; └── src/ ├── module-a/ │ ├── index.js │ └── package.json └── module-b/ ├── index.js └── package.json &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;src/module-a/package.json&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;module-a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;src/module-b/package.json&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;module-b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;And the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.js&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// src/module-b/index.js&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-b&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Finally, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.js&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// src/module-a/index.js&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-a&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-b&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After configuring the files like this, run the following command to check if the module is loaded correctly.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;node src/module-a/index.js &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After running the command, you can see the following error.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module-a node:internal/modules/cjs/loader:1073 throw err&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; ^ Error: Cannot find module &lt;span class=&quot;s1&quot;&gt;&apos;module-b&apos;&lt;/span&gt; Require stack: - /Users/deku/temp/temp/src/module-a/index.js at Module._resolveFilename &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1070:15&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._load &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:923:27&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module.require &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1137:19&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at require &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/helpers:121:18&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Object.&amp;lt;anonymous&amp;gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;/Users/deku/temp/temp/src/module-a/index.js:3:1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._compile &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1255:14&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._extensions..js &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1309:10&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module.load &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1113:32&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._load &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:960:12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Function.executeUserEntryPoint &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;as runMain] &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/run_main:83:12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; code: &lt;span class=&quot;s1&quot;&gt;&apos;MODULE_NOT_FOUND&apos;&lt;/span&gt;, requireStack: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;/Users/deku/temp/temp/src/module-a/index.js&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads ads-container&quot;&gt; &lt;div class=&quot;ads-block ads-left&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;div class=&quot;ads-block ads-center&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;6492035359&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;/div&gt; &lt;h2 id=&quot;yarn-workspaces-setup&quot;&gt;Yarn Workspaces Setup&lt;/h2&gt; &lt;p&gt;Now let’s use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt; to make &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt;. First, run the following command in the root folder(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt;) to prepare to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;yarn init &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After that, the following &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; will be created in the root folder.&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;monorepo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;license&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MIT&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;In order to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt;, you need to modify this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; file as follows.&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;monorepo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;license&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MIT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;private&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;workspaces&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;packages&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;src/module-a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;src/module-b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Monorepo has multiple projects, so it is not necessary to deploy to places like the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm&lt;/code&gt; registry. Therefore, set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;private&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt; to prevent the monorepo from being deployed. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn V1&lt;/code&gt; requires this setting, but &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn V2&lt;/code&gt; does not require it. It is recommended to set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;private&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt; to manage it safely. Of course, individual projects in the monorepo do not need to set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;private&lt;/code&gt; because they can be deployed.&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt; can be set as an array(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[]&lt;/code&gt;) or an object(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{}&lt;/code&gt;). &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt; recommends writing it in object format. In &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt;, an array is created with the key &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;packages&lt;/code&gt; and each module is added. You can specify each one like this, but you can also specify all modules simply by using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*&lt;/code&gt; as follows.&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;monorepo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;license&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MIT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;private&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;workspaces&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;packages&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;src/*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;check-yarn-workspaces&quot;&gt;Check Yarn Workspaces&lt;/h2&gt; &lt;p&gt;We are now ready to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt;. Now run the following command to install the packages.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;yarn &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then you can see that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; folder is created in the root folder and each module is connected via &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; ├── node_modules │ ├── module-a -&amp;gt; ../src/module-a │ └── module-b -&amp;gt; ../src/module-b ├── package.json ├── src │ ├── module-a │ │ ├── index.js │ │ └── package.json │ └── module-b │ ├── index.js │ └── package.json └── yarn.lock &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Now let’s check if &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; by running the following command.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;node src/module-a/index.js &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then you can see that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; is executed without any problems.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module-a module-b &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Of course, since it is connected via &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt;, if you modify the code of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt;, you can use the modified code in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt;. Open the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/module-b/index.js&lt;/code&gt; file and modify it as follows.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;console.log&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;module-b!!!&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then run the following command to check if &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; works correctly.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;node src/module-a/index.js &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After running the command, you can see that the modified content is displayed correctly.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module-a module-b!!! &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;gitignore&quot;&gt;.gitignore&lt;/h2&gt; &lt;p&gt;If you are managing the source code with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Git&lt;/code&gt;, create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt; file and modify it as follows to exclude the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; folder from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Git&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# .gitignore&lt;/span&gt; node_modules &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;Done! We’ve seen how to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt; to set up a monorepo. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt; basically works with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt;, so it’s good to understand &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt;. If you want to know more about &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt;, please see to the previous blog post.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/symlink/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Symlink&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Now you can try using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yarn&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspaces&lt;/code&gt; to set up a monorepo.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="environment"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/environment/2024/monorepo/background.jpg"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/environment/2024/monorepo/background.jpg" xmlns:media="http://search.yahoo.com/mrss/"/></entry><entry xml:lang="en"><title type="html">[Monoepo] Symlink</title><link href="https://deku.posstree.com/en/environment/monorepo/symlink/" rel="alternate" type="text/html" title="[Monoepo] Symlink"/><published>2024-01-17T00:00:00+09:00</published><updated>2024-03-10T11:36:58+09:00</updated><id>https://deku.posstree.com/environment/monorepo/monorepo-symlink-en</id><content type="html" xml:base="https://deku.posstree.com/environment/monorepo/symlink/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#contents&quot;&gt;Contents&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#blog-series&quot;&gt;Blog Series&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#symlink&quot;&gt;Symlink&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#example&quot;&gt;Example&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#create-symlink&quot;&gt;Create Symlink&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#check-symlink&quot;&gt;Check Symlink&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;When connecting the dependencies of various modules in Monorepo, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; is used. In this blog post, I will explain &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink (Symbolic Link)&lt;/code&gt;, which is the basic knowledge for understanding Monorepo.&lt;/p&gt; &lt;h2 id=&quot;blog-series&quot;&gt;Blog Series&lt;/h2&gt; &lt;p&gt;This blog is a series. Please check other blog posts through the following links.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/repository_strategy/&quot; target=&quot;\_blank&quot;&gt;[Project Management] Repository Strategy&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/tools/&quot; target=&quot;\_blank&quot;&gt;[JavaScript] Tools for Monorepo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/module-resolutions/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Node JS module resolution&lt;/a&gt;&lt;/li&gt; &lt;li&gt;[Monorepo] Symlink&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/yarn_workspaces/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Yarn Workspaces&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;symlink&quot;&gt;Symlink&lt;/h2&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; is an abbreviation for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symbolic Link&lt;/code&gt;, and you can think of it as a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;shortcut (System shortcut)&lt;/code&gt; for a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;directory&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; is a basic feature supported by major OS (macOS, Windows, Linux). In addition, it is also supported by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yarn&lt;/code&gt;, which are package managers for JavaScript.&lt;/p&gt; &lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt; &lt;p&gt;Let’s create an example to check the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; feature provided by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yarn&lt;/code&gt;. First, create the following folder and file structure.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; └── src/ ├── module-a/ │ ├── index.js │ └── package.json └── module-b/ ├── index.js └── package.json &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;src/module-a/package.json&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;module-a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;src/module-b/package.json&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;module-b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;And the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.js&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// src/module-b/index.js&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-b&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Finally, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.js&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// src/module-a/index.js&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-a&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-b&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After creating the file structure like this, run the following command to check if the module is imported well.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;node src/module-a/index.js &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then, you can see the following error.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module-a node:internal/modules/cjs/loader:1073 throw err&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; ^ Error: Cannot find module &lt;span class=&quot;s1&quot;&gt;&apos;module-b&apos;&lt;/span&gt; Require stack: - /Users/deku/temp/temp/src/module-a/index.js at Module._resolveFilename &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1070:15&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._load &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:923:27&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module.require &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1137:19&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at require &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/helpers:121:18&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Object.&amp;lt;anonymous&amp;gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;/Users/deku/temp/temp/src/module-a/index.js:3:1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._compile &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1255:14&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._extensions..js &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1309:10&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module.load &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1113:32&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._load &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:960:12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Function.executeUserEntryPoint &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;as runMain] &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/run_main:83:12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; code: &lt;span class=&quot;s1&quot;&gt;&apos;MODULE_NOT_FOUND&apos;&lt;/span&gt;, requireStack: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;/Users/deku/temp/temp/src/module-a/index.js&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads ads-container&quot;&gt; &lt;div class=&quot;ads-block ads-left&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;div class=&quot;ads-block ads-center&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;6492035359&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;/div&gt; &lt;h2 id=&quot;create-symlink&quot;&gt;Create Symlink&lt;/h2&gt; &lt;p&gt;Now, let’s create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; to check the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; feature. First, go to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; folder.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;src/module-b &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After then, run the following command to prepare to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm &lt;span class=&quot;nb&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# yarn link&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then, go to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; folder that uses &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; .. &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;module-a &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After then, run the following command to create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm &lt;span class=&quot;nb&quot;&gt;link &lt;/span&gt;module-b &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then, you can see that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; folder of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; folder is created as follows, and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; is created in it.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; ├── index.js ├── node_modules │ └── module-b -&amp;gt; ../../module-b └── package.json &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;This &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; folder is not a copy of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt;, but is linked to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; itself. Therefore, if you modify the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/module-b/index.js&lt;/code&gt; file, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/module-a/node_modules/module-b/index.js&lt;/code&gt; file will also be modified. Of course, if you modify the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/module-a/node_modules/module-b/index.js&lt;/code&gt; file, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/module-b/index.js&lt;/code&gt; file will also be modified.&lt;/p&gt; &lt;h2 id=&quot;check-symlink&quot;&gt;Check Symlink&lt;/h2&gt; &lt;p&gt;Now, go to the root folder (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt;) of the project and run the following command to check if the module is imported well.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd ../..&lt;/span&gt; node src/module-a/index.js &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then, you can see the following output without any problems.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module-a module-b &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Next, let’s modify the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/module-b/index.js&lt;/code&gt; file as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-b!!!!&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then, when you open the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/module-a/node_modules/module-b/index.js&lt;/code&gt; file, you can see that the modified content is reflected. Of course, if you run the following command, you can see that the modified content is shown well.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;node src/module-a/index.js module-a module-b!!!! &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;Done! We’ve seem what &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; is, which is the basic knowledge for using Monorepo. When connecting the dependencies of various modules in Monorepo, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; is used. Therefore, if you understand &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symlink&lt;/code&gt; in here, it will be helpful to use Monorepo.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="environment"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/environment/2024/monorepo/background.jpg"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/environment/2024/monorepo/background.jpg" xmlns:media="http://search.yahoo.com/mrss/"/></entry><entry xml:lang="en"><title type="html">[Monorepo] Node JS module resolution</title><link href="https://deku.posstree.com/en/environment/monorepo/module-resolutions/" rel="alternate" type="text/html" title="[Monorepo] Node JS module resolution"/><published>2024-01-16T00:00:00+09:00</published><updated>2024-03-10T11:36:58+09:00</updated><id>https://deku.posstree.com/environment/monorepo/monorepo-resolution-en</id><content type="html" xml:base="https://deku.posstree.com/environment/monorepo/module-resolutions/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#blog-series&quot;&gt;Blog series&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#module&quot;&gt;Module&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#loading-modules&quot;&gt;Loading modules&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#file-path&quot;&gt;File path&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#package-name&quot;&gt;Package name&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#module-resolution-priority&quot;&gt;Module resolution priority&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#example&quot;&gt;Example&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;In this blog post, I will explain how &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NodeJS&lt;/code&gt; loads modules as basic knowledge to understand Monorepo.&lt;/p&gt; &lt;h2 id=&quot;blog-series&quot;&gt;Blog series&lt;/h2&gt; &lt;p&gt;This blog is a series. Please check other blog posts through the following links.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/repository_strategy/&quot; target=&quot;\_blank&quot;&gt;[Project Management] Repository Strategy&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/tools/&quot; target=&quot;\_blank&quot;&gt;[JavaScript] Tools for Monorepo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;[Monorepo] Node JS module resolution&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/symlink/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Symlink&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/yarn_workspaces/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Yarn Workspaces&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;module&quot;&gt;Module&lt;/h2&gt; &lt;p&gt;In JavaScript, modules are features used to organize and separate code into reusable units. Modules make it easier to maintain and extend code. A module system that was originally not in JavaScript was introduced from ECMAScript 2015(ES6).&lt;/p&gt; &lt;p&gt;Modules encapsulate code at the file level and allow you to import the required functionality from other files. Modules prevent conflicts in the global scope and allow you to clearly manage code dependencies.&lt;/p&gt; &lt;p&gt;To use modules in JavaScript, you can use the following keywords.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;import&lt;/code&gt;: Imports features exported from other modules into the current module.&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export&lt;/code&gt;: Specifies functions, variables, classes, etc. to be exported from the current module to the outside.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;You can create modules in JavaScript as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// math.js&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;subtract&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Modules created in this way can be used as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// main.js&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;subtract&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./math&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 8&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subtract&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 5&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;loading-modules&quot;&gt;Loading modules&lt;/h2&gt; &lt;p&gt;There are two ways to load modules in JavaScript.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;File path&lt;/code&gt;&lt;/li&gt; &lt;li&gt;Using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Package name&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;file-path&quot;&gt;File path&lt;/h3&gt; &lt;p&gt;When adding a module using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;File path&lt;/code&gt;, you can use relative path or absolute path as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Relative path&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;subtract&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;../some/file/path/math&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Absolute path&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;subtract&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/src/math&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;package-name&quot;&gt;Package name&lt;/h3&gt; &lt;p&gt;Modules in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; folder can be loaded using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Package name&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// react module exists in node_modules&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads ads-container&quot;&gt; &lt;div class=&quot;ads-block ads-left&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;div class=&quot;ads-block ads-center&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;6492035359&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;/div&gt; &lt;h2 id=&quot;module-resolution-priority&quot;&gt;Module resolution priority&lt;/h2&gt; &lt;p&gt;When &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NodeJS&lt;/code&gt; loads a module, first it checks if the module exists in the same folder, and then checks if the module exists in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; in the same folder. If it does not exist in the same folder, it checks the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; folder int the parent folder, and if it does not exist in the parent folder, it checks the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; in the parnet folder of the parent folder.&lt;/p&gt; &lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt; &lt;p&gt;To check how &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NodeJS&lt;/code&gt; loads modules, let’s create the following folder structure.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; └── src/ ├── module-a/ │ ├── index.js │ └── package.json └── module-b/ ├── index.js └── package.json &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;src/module-a/package.json&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;module-a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.js&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;src/module-b/package.json&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;module-b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.js&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// src/module-b/index.js&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-b&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Lastly, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.js&lt;/code&gt; of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; is as follows.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// src/module-a/index.js&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-a&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;module-b&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;After configuring the files like this, run the following command to check if the module is loaded well.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;node src/module-a/index.js &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then, you can see the following error.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module-a node:internal/modules/cjs/loader:1073 throw err&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; ^ Error: Cannot find module &lt;span class=&quot;s1&quot;&gt;&apos;module-b&apos;&lt;/span&gt; Require stack: - /Users/deku/temp/temp/src/module-a/index.js at Module._resolveFilename &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1070:15&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._load &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:923:27&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module.require &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1137:19&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at require &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/helpers:121:18&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Object.&amp;lt;anonymous&amp;gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;/Users/deku/temp/temp/src/module-a/index.js:3:1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._compile &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1255:14&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._extensions..js &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1309:10&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module.load &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:1113:32&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Module._load &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/cjs/loader:960:12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; at Function.executeUserEntryPoint &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;as runMain] &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;node:internal/modules/run_main:83:12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; code: &lt;span class=&quot;s1&quot;&gt;&apos;MODULE_NOT_FOUND&apos;&lt;/span&gt;, requireStack: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;/Users/deku/temp/temp/src/module-a/index.js&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Next, change the folder name &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; and run it again.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;node node_modules/module-a/index.js &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then, you can see that it runs without any problems as follows.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module-a module-b &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;In the case that the folder name is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src&lt;/code&gt;, when &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; loads &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require(&apos;module-b&apos;);&lt;/code&gt;, it can not load the file path, so it looks for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; of the same folder. Since &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; does not exist in the current folder, it checks the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; in the parent folder. Since there is no &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; in the parent folder, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MODULE_NOT_FOUND&lt;/code&gt; error occurs.&lt;/p&gt; &lt;p&gt;In the case that the folder name is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt;, when &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-a&lt;/code&gt; loads &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require(&apos;module-b&apos;);&lt;/code&gt;, it can not load the file path, so it looks for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; of the same folder. Since &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; does not exist in the current folder, it checks the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; in the parent folder. In the parent folder, there is a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; folder that we’ve changed the name, and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module-b&lt;/code&gt; exists in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; folder, so it can be loaded without any problems.&lt;/p&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;Done! we’ve senn how &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NodeJS&lt;/code&gt; loads modules. How &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NodeJS&lt;/code&gt; loads modules is knowledge that helps to configure a project as a Monorepo, so I introduced it in this blog post. I hope you take this opportunity to understand how &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NodeJS&lt;/code&gt; loads modules again.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="environment"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/environment/2024/monorepo/background.jpg"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/environment/2024/monorepo/background.jpg" xmlns:media="http://search.yahoo.com/mrss/"/></entry><entry xml:lang="en"><title type="html">[JavaScript] Tools for Monorepo</title><link href="https://deku.posstree.com/en/environment/monorepo/tools/" rel="alternate" type="text/html" title="[JavaScript] Tools for Monorepo"/><published>2024-01-11T00:00:00+09:00</published><updated>2024-03-10T11:36:58+09:00</updated><id>https://deku.posstree.com/environment/monorepo/monorepo_tools-en</id><content type="html" xml:base="https://deku.posstree.com/environment/monorepo/tools/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#blog-series&quot;&gt;Blog Series&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#how-to-start-monorepo&quot;&gt;How to start Monorepo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#package-manager&quot;&gt;Package Manager&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#monorepo-tool&quot;&gt;Monorepo Tool&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#lerna&quot;&gt;Lerna&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#nx&quot;&gt;Nx&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#turborepo&quot;&gt;Turborepo&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;In this blog post, I will introduce the tools needed to use Monorepo in a project developed in JavaScript.&lt;/p&gt; &lt;h2 id=&quot;blog-series&quot;&gt;Blog Series&lt;/h2&gt; &lt;p&gt;This blog is a series. You can check other blog posts through the following links.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/repository_strategy/&quot; target=&quot;\_blank&quot;&gt;[Project Management] Repository Strategy&lt;/a&gt;&lt;/li&gt; &lt;li&gt;[JavaScript] Tools for Monorepo&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/module-resolutions/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Node JS module resolution&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/symlink/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Symlink&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/yarn_workspaces/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Yarn Workspaces&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;how-to-start-monorepo&quot;&gt;How to start Monorepo&lt;/h2&gt; &lt;p&gt;There are two ways to start Monorepo.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Using a package manager&lt;/li&gt; &lt;li&gt;Using a tool for Monorepo&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;In this blog post, I will introduce the package manager and the Monorepo tool to support Monorepo in a JavaScript project.&lt;/p&gt; &lt;h2 id=&quot;package-manager&quot;&gt;Package Manager&lt;/h2&gt; &lt;p&gt;To configure Monorepo in a JavaScript project, you can use a package manager that supports Monorepo. The package managers that support Monorepo are &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pnpm&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yarn&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Package managers that support Monorepo have the following characteristics.&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;기능&lt;/th&gt; &lt;th&gt;pnpm&lt;/th&gt; &lt;th&gt;yarn&lt;/th&gt; &lt;th&gt;npm&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;Support workspace&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Isolated node_modules&lt;/td&gt; &lt;td&gt;✅(default)&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Hoisted node_modules&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;✅(default)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Peer auto install&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;❌&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Plug’n’Play&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;✅(default)&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Zero-Installs&lt;/td&gt; &lt;td&gt;❌&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;❌&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;dependent patches&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;❌&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;NodeJS version management&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;❌&lt;/td&gt; &lt;td&gt;❌&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Lockfile&lt;/td&gt; &lt;td&gt;✅(pnpm-lock.yaml)&lt;/td&gt; &lt;td&gt;✅(yarn.lock)&lt;/td&gt; &lt;td&gt;✅(package-lock.json)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Overwrite support&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;✅(resolution)&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Content-addressable repository&lt;/td&gt; &lt;td&gt;✅&lt;/td&gt; &lt;td&gt;❌&lt;/td&gt; &lt;td&gt;❌&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Dynamic package execution&lt;/td&gt; &lt;td&gt;✅(pnpm dlx)&lt;/td&gt; &lt;td&gt;✅(yarn dlx)&lt;/td&gt; &lt;td&gt;✅(npx)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Listing licenses&lt;/td&gt; &lt;td&gt;✅(pnpm licenses list)&lt;/td&gt; &lt;td&gt;✅(Via a plugin)&lt;/td&gt; &lt;td&gt;❌&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;in-feed-ads ads-container&quot;&gt; &lt;div class=&quot;ads-block ads-left&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;div class=&quot;ads-block ads-center&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;6492035359&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;/div&gt; &lt;h2 id=&quot;monorepo-tool&quot;&gt;Monorepo Tool&lt;/h2&gt; &lt;p&gt;You can configure Monorepo with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Workspace&lt;/code&gt; feature provided by the package manager, but using a tool for Monorepo makes it easier to configure Monorepo. Also, using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Cache&lt;/code&gt; feature provided by the Monorepo tool, you can perform &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Build&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CI&lt;/code&gt; faster.&lt;/p&gt; &lt;p&gt;There are &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Lerna&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Turborepo&lt;/code&gt; tools for Monorepo in JavaScript projects.&lt;/p&gt; &lt;h3 id=&quot;lerna&quot;&gt;Lerna&lt;/h3&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Lerna&lt;/code&gt; is developed and managed as open source. It was acquired by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; because it was difficult to manage with only the open source community.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Lerna: &lt;a href=&quot;https://lerna.js.org/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;https://lerna.js.org/&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Currently, you can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Lerna&lt;/code&gt; as it is, but since it has been incorporated into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt;, it is not certain whether &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; will support &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Lerna&lt;/code&gt; as much as their tool, so if you plan to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Lerna&lt;/code&gt;, consider using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; or watching the trend a little more.&lt;/p&gt; &lt;h3 id=&quot;nx&quot;&gt;Nx&lt;/h3&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; is developed and provided by a company called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Narwhal Technologies Inc.&lt;/code&gt;. This company provides tools and services related to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Angular&lt;/code&gt; framework. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; was developed by a company that develops tools related to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Angular&lt;/code&gt; framework, so &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; was originally developed as a monorepo management tool for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Angular&lt;/code&gt; applications. Currently, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; also supports other frameworks such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;React&lt;/code&gt;.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Nx: &lt;a href=&quot;https://nx.dev/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;https://nx.dev/&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;If you are going to develop a project with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Angular&lt;/code&gt; framework, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; is a great choice. Of course, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; can be a good choice in other frameworks, but &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; developed around the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Angular&lt;/code&gt; framework and the company that develops tools focused on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Angular&lt;/code&gt; developed &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt;, so it will perform better in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Angular&lt;/code&gt; framework.&lt;/p&gt; &lt;p&gt;The frameworks supported by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nx&lt;/code&gt; can be found through the following link.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Recipes: &lt;a href=&quot;https://nx.dev/recipes&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;https://nx.dev/recipes&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;turborepo&quot;&gt;Turborepo&lt;/h3&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Turborepo&lt;/code&gt; was developed by &lt;a href=&quot;https://twitter.com/jaredpalmer&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;Jared Palmer&lt;/a&gt;, but in 2021, &lt;a href=&quot;https://vercel.com/blog/vercel-acquires-turborepo&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;Vercel&lt;/a&gt; that develops and operates &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NextJS&lt;/code&gt; acquired it.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Turbo: &lt;a href=&quot;https://turbo.build/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;https://turbo.build/&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;If you are going to develop a project with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NextJS&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;React&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Turborepo&lt;/code&gt; is a great choice. Especially, if you use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NextJS&lt;/code&gt;, using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Turborepo&lt;/code&gt; developed and managed by the same company will be better than using other tools.&lt;/p&gt; &lt;p&gt;The frameworks supported by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Turborepo&lt;/code&gt; can be found through the following link.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Turborepo Examples: &lt;a href=&quot;https://turbo.build/repo/docs/getting-started/from-example&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;\_blank&quot;&gt;https://turbo.build/repo/docs/getting-started/from-example&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;In this blog post, I introduced the tools needed to use Monorepo in a project developed in JavaScript. You can configure Monorepo with the features provided by the package manager, but using a tool for Monorepo makes it easier to configure Monorepo and use various features.&lt;/p&gt; &lt;p&gt;If you are planning to configure a project as Monorepo, please consider introducing a tool for Monorepo in addition to the features of the package manager.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="environment"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/environment/2024/monorepo/background.jpg"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/environment/2024/monorepo/background.jpg" xmlns:media="http://search.yahoo.com/mrss/"/></entry><entry xml:lang="en"><title type="html">[Project Management] Repository Strategy</title><link href="https://deku.posstree.com/en/environment/repository_strategy/" rel="alternate" type="text/html" title="[Project Management] Repository Strategy"/><published>2024-01-04T00:00:00+09:00</published><updated>2024-03-10T11:36:58+09:00</updated><id>https://deku.posstree.com/environment/repository_strategy-en</id><content type="html" xml:base="https://deku.posstree.com/environment/repository_strategy/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#outline&quot;&gt;Outline&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#blog-series&quot;&gt;Blog Series&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#repository-strategy&quot;&gt;Repository Strategy&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#monolith&quot;&gt;Monolith&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#advantages-of-monolith&quot;&gt;Advantages of Monolith&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#disadvantages-of-monolith&quot;&gt;Disadvantages of Monolith&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#considerations-when-introducing-monolith&quot;&gt;Considerations when introducing Monolith&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#multi-repo&quot;&gt;Multi Repo&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#advantages-of-multi-repo&quot;&gt;Advantages of Multi Repo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#disadvantages-of-multi-repo&quot;&gt;Disadvantages of Multi Repo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#considerations-when-introducing-multi-repo&quot;&gt;Considerations when introducing Multi Repo&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#monorepo&quot;&gt;Monorepo&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#advantages-of-monorepo&quot;&gt;Advantages of Monorepo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#disadvantages-of-monorepo&quot;&gt;Disadvantages of Monorepo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#considerations-when-introducing-monorepo&quot;&gt;Considerations when introducing Monorepo&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;outline&quot;&gt;Outline&lt;/h2&gt; &lt;p&gt;When developing a project, you will decide whether to use a single repository or multiple repositories. In this blog post, I will introduce repository strategies for managing projects, such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Monolith&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Multi Repo&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Monorepo&lt;/code&gt;.&lt;/p&gt; &lt;h2 id=&quot;blog-series&quot;&gt;Blog Series&lt;/h2&gt; &lt;p&gt;This blog is a series. You can check other blog posts through the following links.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;[Project Management] Repository Strategy&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/tools/&quot; target=&quot;\_blank&quot;&gt;[JavaScript] Tools for Monorepo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/module-resolutions/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Node JS module resolution&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/symlink/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Symlink&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://deku.posstree.com/environment/monorepo/yarn_workspaces/&quot; target=&quot;\_blank&quot;&gt;[Monorepo] Yarn Workspaces&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;repository-strategy&quot;&gt;Repository Strategy&lt;/h2&gt; &lt;p&gt;There are &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Monolith&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Multi Repo&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Monorepo&lt;/code&gt; as repository strategies like the following.&lt;/p&gt; &lt;picture&gt; &lt;source srcset=&quot;/assets/images/category/environment/2024/repository_strategy/repository_strategy.avif&quot; type=&quot;image/avif&quot; /&gt; &lt;source srcset=&quot;/assets/images/category/environment/2024/repository_strategy/repository_strategy.webp&quot; type=&quot;image/webp&quot; /&gt; &lt;img src=&quot;/assets/images/category/environment/2024/repository_strategy/repository_strategy.jpg&quot; alt=&quot;Repository strategy&quot; /&gt; &lt;/picture&gt; &lt;ul&gt; &lt;li&gt;Monolith: Monolith is creating a single service as a single project and managing it as a single repository.&lt;/li&gt; &lt;li&gt;Multi Repo: Multi Repo is dividing a single service into multiple projects and managing them in multiple repositories.&lt;/li&gt; &lt;li&gt;Monorepo: Monorepo is dividing a single service into multiple projects and managing them as a single repository.&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;monolith&quot;&gt;Monolith&lt;/h2&gt; &lt;p&gt;Monolith is a project management technique that designs software projects as a single codebase and a single application. In the monolith architecture, all components of the application are integrated into a single codebase and developed, deployed, and operated.&lt;/p&gt; &lt;h3 id=&quot;advantages-of-monolith&quot;&gt;Advantages of Monolith&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;Easy management and maintenance: Since it is composed of a single codebase, overall management and maintenance are relatively easy.&lt;/li&gt; &lt;li&gt;Easy integration testing: Since the entire system is composed of a single application, integration testing is easy.&lt;/li&gt; &lt;li&gt;Improved initial development speed: At first, everything is in one place, so development can proceed quickly.&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;disadvantages-of-monolith&quot;&gt;Disadvantages of Monolith&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;Scalability constraints: As the size of the application increases, scalability may become difficult.&lt;/li&gt; &lt;li&gt;Technology stack dependency: Since it depends on a single technology stack, it may be difficult to introduce various technologies.&lt;/li&gt; &lt;li&gt;Difficulty of deployment: Since the entire application needs to be modified and deployed, it may be difficult to deploy small changes.&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;considerations-when-introducing-monolith&quot;&gt;Considerations when introducing Monolith&lt;/h3&gt; &lt;p&gt;In the following cases, you can consider introducing Monolith.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Small-scale project: If it is a small project, you can increase the initial development speed.&lt;/li&gt; &lt;li&gt;If easy maintenance is required: For simple applications, maintenance may be easier.&lt;/li&gt; &lt;li&gt;If the technology stack is clear: If a clear decision has been made on a specific technology stack, Monolith may be useful.&lt;/li&gt; &lt;li&gt;If the team is small: If a small team is collaborating and developing, Monolith may be effective.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;However, as the size and requirements of the project increase, you need to consider other architectures such as distributed architecture or microservice architecture. This can increase the scalability, flexibility, and independence of the application.&lt;/p&gt; &lt;div class=&quot;in-feed-ads ads-container&quot;&gt; &lt;div class=&quot;ads-block ads-left&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;div class=&quot;ads-block ads-center&quot;&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display: block; text-align: center&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;6492035359&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;/div&gt; &lt;h2 id=&quot;multi-repo&quot;&gt;Multi Repo&lt;/h2&gt; &lt;p&gt;Multi Repo is a project management technique that develops software projects in multiple independent repositories. Each repository corresponds to a specific feature, module, or service, and development. Each repository is managed separately for deployment and operation.&lt;/p&gt; &lt;h3 id=&quot;advantages-of-multi-repo&quot;&gt;Advantages of Multi Repo&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;Independent development and deployment: Each repository can be developed, tested, and deployed independently, allowing for faster development cycles.&lt;/li&gt; &lt;li&gt;Scalability: If the load of a specific module or service increases, only that repository can be scaled to improve the overall performance of the system.&lt;/li&gt; &lt;li&gt;Technology stack diversity: Each repository can choose an independent technology stack, so you can use multiple technologies without relying on a specific technology.&lt;/li&gt; &lt;li&gt;Separated codebase: Each repository can focus on a specific feature or business area, improving code readability and maintainability.&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;disadvantages-of-multi-repo&quot;&gt;Disadvantages of Multi Repo&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;Difficulty in dependency management: It can be complicated to manage dependencies between various repositories.&lt;/li&gt; &lt;li&gt;Difficulty in overall system integration: Each repository is developed independently, and conflicts may occur when integrating them, which may take time to resolve.&lt;/li&gt; &lt;li&gt;Lack of comprehensive vision: It may be difficult to understand and manage the entire system, especially when an integrated vision is required.&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;considerations-when-introducing-multi-repo&quot;&gt;Considerations when introducing Multi Repo&lt;/h3&gt; &lt;p&gt;In the following cases, you can consider introducing Multi Repo.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Large-scale project: If the project is large and contains various features or modules, you can manage each of them independently.&lt;/li&gt; &lt;li&gt;Collaboration between teams: If multiple teams are working at the same time and want to develop independently, Multi Repo may be effective.&lt;/li&gt; &lt;li&gt;Service-oriented architecture (SOA) or microservice architecture: Multi Repo is useful for managing each service independently, which fits well with SOA or microservice architecture.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Multi Repo is suitable for supporting team collaboration and fast development cycles in a distributed environment. Especially in service-oriented architecture, it is important to manage each service separately.&lt;/p&gt; &lt;p&gt;However, if the team size is small or the project size is small, too many technology stacks and difficulty in repository management may occur.&lt;/p&gt; &lt;h2 id=&quot;monorepo&quot;&gt;Monorepo&lt;/h2&gt; &lt;p&gt;Monorepo is a project management technique that designs software projects as a single large codebase and develops them as a single repository. In this method, all source code, libraries, and modules are stored and managed in one central location.&lt;/p&gt; &lt;h3 id=&quot;advantages-of-monorepo&quot;&gt;Advantages of Monorepo&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;Easy dependency management: Since all dependencies are managed in one codebase, dependency conflicts and version management are easy.&lt;/li&gt; &lt;li&gt;Easy to understand the entire system: It is easy to understand the overall structure and operation of the project. The entire system can be seen at a glance.&lt;/li&gt; &lt;li&gt;Code reusability: Since all modules and libraries are in one repository, code reusability is easy.&lt;/li&gt; &lt;li&gt;Easy integration testing: Integration testing for the entire system can be easily performed.&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;disadvantages-of-monorepo&quot;&gt;Disadvantages of Monorepo&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;Difficulty in managing large-scale projects: As the size of the project increases, the build time increases, and collaboration between teams on all code may become difficult.&lt;/li&gt; &lt;li&gt;Technology stack dependency: Since all code is in one repository, you may be constrained by a specific technology stack.&lt;/li&gt; &lt;li&gt;Performance degradation of CI/CD: In a large-scale Monorepo, continuous integration and deployment performance may be degraded.&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;considerations-when-introducing-monorepo&quot;&gt;Considerations when introducing Monorepo&lt;/h3&gt; &lt;p&gt;In the following cases, you can consider introducing Monorepo.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Small-scale project: If the project is small, it may be convenient to manage it in one repository.&lt;/li&gt; &lt;li&gt;Collaboration between teams: If all teams work in one repository, code sharing and collaboration are easy.&lt;/li&gt; &lt;li&gt;If dependency management is important: When dependencies are complicatedly intertwined within the project, Monorepo is easy to manage.&lt;/li&gt; &lt;li&gt;If a single technology stack is required: When a specific technology stack needs to be used consistently, Monorepo may be suitable.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Monorepo is especially useful for small-scale projects or team collaboration is required, and it can be effective when a specific technology stack needs to be unified. However, as the size and complexity of the project increase, the limitations of Monorepo may appear.&lt;/p&gt; &lt;h2 id=&quot;completed&quot;&gt;Completed&lt;/h2&gt; &lt;p&gt;Done! we’ve seen the repository strategies like Monolith, Multi Repo, and Monorepo for managing projects. There is no good or bad strategy. You can choose the appropriate strategy according to the size and requirements of your project.&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><category term="environment"/><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://deku.posstree.com/assets/images/category/environment/2024/repository_strategy/background.jpg"/><media:content medium="image" url="https://deku.posstree.com/assets/images/category/environment/2024/repository_strategy/background.jpg" xmlns:media="http://search.yahoo.com/mrss/"/></entry></feed>