<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="https://dev-yakuza.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://dev-yakuza.github.io/" rel="alternate" type="text/html"/><updated>2019-06-05T16:42:24+09:00</updated><id>https://dev-yakuza.github.io/feed.xml</id><title type="html">Dreams the art through programming</title><subtitle>『Programming Artist ヤクザ』</subtitle><author><name>dev.yakuza@gmail.com</name></author><entry xml:lang="ja"><title type="html">ジャンゴ(django)のモデル(Models)をJSONタイプでレスポンス(Response)する</title><link href="https://dev-yakuza.github.io/django/response-model-to-json/" rel="alternate" type="text/html" title="ジャンゴ(django)のモデル(Models)をJSONタイプでレスポンス(Response)する"/><published>2019-06-05T00:00:00+09:00</published><updated>2019-06-05T16:31:08+09:00</updated><id>https://dev-yakuza.github.io/django/response-model-to-json-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/response-model-to-json/">&lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)でAPIサーバーを開発する時、モデル(Models)から直接持ってきた情報(QuerySet)をそのままJSONで返したい時があります。このブログポストではジャンゴ(django)を使ってモデル(Models)から持ってきた情報(QuerySet)をそのままJSONタイプで返す方法について説明します。&lt;/p&gt; &lt;p&gt;このブログで紹介するソースコードはGithubに公開されております。下記のリンクで確認してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_response_model_to_json&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_response_model_to_json&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;ジャンゴdjangoのプロジェクトの準備&quot;&gt;ジャンゴ(django)のプロジェクトの準備&lt;/h2&gt; &lt;p&gt;以前のブログシリーズでジャンゴ(django)のプロジェクトを使う方法について説明しました。ジャンゴ(django)を使ってプロジェクトを構成する方法について詳しく内容は下記のリンクを確認してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/form/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のフォーム(Form)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/heroku/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;このブログではジャンゴ(django)のインストールやプロジェクトの設定などについては説明しません。簡単にプロジェクトが進めるレベルで説明します。&lt;/p&gt; &lt;p&gt;下記のコマンドでジャンゴ(django)のプロジェクトを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;django-admin startproject django_response_model_to_json &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のブログを参考してデーターベース連動やテーブルを作ります。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;データーベースの連動が終わったら下記のコマンドで管理者(&lt;code class=&quot;highlighter-rouge&quot;&gt;superuser&lt;/code&gt;)を作ります。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python manage.py createsuperuser &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のブログを参考して&lt;code class=&quot;highlighter-rouge&quot;&gt;Blog&lt;/code&gt;ジャンゴ(django)のアプリと&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデル(Model)を生成します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;そして下記のブログを参考してテストデーターを追加します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/data-seed/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクトでマスターデーターを入れる方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;url作成&quot;&gt;URL作成&lt;/h2&gt; &lt;p&gt;テストデーターを持てくるためのURLを生成します。下記のリンクにURLを作る方法について詳しく説明がありますので参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;URLを作成するため&lt;code class=&quot;highlighter-rouge&quot;&gt;django_response_model_to_json/urls.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.contrib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.urls&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.urls&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlpatterns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'admin/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'blog.urls'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしてBlogアプリにURLを追加するため&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/urls.py&lt;/code&gt;を生成して下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.urls&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlpatterns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'posts/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'posts'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;ビューview作成&quot;&gt;ビュー(View)作成&lt;/h2&gt; &lt;p&gt;モデル(Models)から持てきたデーター(QuerySet)をJSONタイプに変換するためビュー(View)を作成します。ジャンゴ(django)のビュー(View)に関しては下記のブログを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ビュー(View)を作るため&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/views.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.shortcuts&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.core&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;serializers&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.http&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpResponse&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;published_at__isnull&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;order_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'-published_at'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;serializers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;serialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'json'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpResponse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content_type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/json-comment-filtered&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;from django.core import serializers&lt;/code&gt;: モデル(Models)をJSONタイプでデーターを直列化捨ためserializersを読んできます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;from django.http import HttpResponse&lt;/code&gt;: JSONでデーターをレスポンス(Response)するためHttpResponseを使う予定です。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;posts = Post.objects.filter(published_at__isnull=False).order_by('-published_at')&lt;/code&gt;: Postモデル(Models)を使ってデーターを持てきます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post_list = serializers.serialize('json', posts)&lt;/code&gt;: 持てきたデーター(QuerySet)をJSONタイプの&lt;code class=&quot;highlighter-rouge&quot;&gt;文字列&lt;/code&gt;で変換します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;return HttpResponse(post_list, content_type=&quot;text/json-comment-filtered&quot;)&lt;/code&gt;: post_listがJSONタイプの&lt;code class=&quot;highlighter-rouge&quot;&gt;文字列&lt;/code&gt;なので&lt;code class=&quot;highlighter-rouge&quot;&gt;(&quot;)&lt;/code&gt;を消してJSONをレスポンスします。&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;確認&quot;&gt;確認&lt;/h2&gt; &lt;p&gt;今まで作った内容を確認するためジャンゴ(django)のテストサーバーを実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python manage.py runserver &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしてPostmanで当該URL(&lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:8000/posts/&lt;/code&gt;)をGETで読んだら下記のようにデーターをちゃんと持ってくることが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/response-model-to-json/check-api-with-postman.png&quot; alt=&quot;ジャンゴ(django)のモデル(Models)をJSONでレスポンス - Postmanを使ってデーター確認&quot; /&gt;&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">概要 ジャンゴ(django)でAPIサーバーを開発する時、モデル(Models)から直接持ってきた情報(QuerySet)をそのままJSONで返したい時があります。このブログポストではジャンゴ(django)を使ってモデル(Models)から持ってきた情報(QuerySet)をそのままJSONタイプで返す方法について説明します。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/response-model-to-json/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ジャンゴ(django)のプロジェクトでマスターデーターを入れる方法</title><link href="https://dev-yakuza.github.io/django/data-seed/" rel="alternate" type="text/html" title="ジャンゴ(django)のプロジェクトでマスターデーターを入れる方法"/><published>2019-06-04T00:00:00+09:00</published><updated>2019-06-05T13:33:47+09:00</updated><id>https://dev-yakuza.github.io/django/data-seed-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/data-seed/">&lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;一般的にウェブサービスを開発する時最初、基本的設定が必要なマスターデーターやテストデーターが必要になります。このブログではジャンゴ(django)のプロジェクトで&lt;code class=&quot;highlighter-rouge&quot;&gt;fixtures&lt;/code&gt;を使ってマスターデーターを生成する方法について説明します。&lt;/p&gt; &lt;p&gt;このブログで紹介するソースコードはGithubに公開されています。下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_data_seed&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_data_seed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;ジャンゴdjangoのプロジェクトの準備&quot;&gt;ジャンゴ(django)のプロジェクトの準備&lt;/h2&gt; &lt;p&gt;以前のブログシリーズでジャンゴ(django)のプロジェクトを使う方法について説明しました。ジャンゴ(django)を使ってプロジェクトを構成する方法について詳しく内容は下記のリンクを確認してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/form/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のフォーム(Form)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/heroku/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;このブログではジャンゴ(django)のインストールやプロジェクトの設定などについては説明しません。簡単にプロジェクトが進めるレベルで説明します。&lt;/p&gt; &lt;p&gt;下記のコマンドでジャンゴ(django)のプロジェクトを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;django-admin startproject django_jwt &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のブログを参考してデーターベースやテーブルを生成します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;データーベースの連動が完了されたら下記のコマンドを使って管理者(&lt;code class=&quot;highlighter-rouge&quot;&gt;superuser&lt;/code&gt;)を生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python manage.py createsuperuser &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のブログを参考して&lt;code class=&quot;highlighter-rouge&quot;&gt;Blog&lt;/code&gt;で言うジャンゴ(djagno)のアプリ(App)と&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデル(Model)を生成します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;マスターデーター準備&quot;&gt;マスターデーター準備&lt;/h2&gt; &lt;p&gt;上のジャンゴ(django)のプロジェクトの準備を勧めたら&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/models.py&lt;/code&gt;が下記のように見えます。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.db&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.utils&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;author&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'auth.User'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;on_delete&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CASCADE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CharField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TextField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;created_at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTimeField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;auto_now_add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updated_at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTimeField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;auto_now&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;published_at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTimeField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;published_at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__str__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;私たちはこのモデル(Models)に合うマスターデーター(Master data)を準備してデーターを追加(Seed)する予定です。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/fixtures/posts-data.json&lt;/code&gt;のファイルを作って下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;model&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;blog.post&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fields&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;author&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;test2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;test2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2019-06-04T15:43:29.899&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;updated_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2019-06-04T15:43:29.899&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;published_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2019-06-04T15:43:28&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;model&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;blog.post&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fields&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;author&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;test1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;test1&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n\r\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;test1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2019-06-04T15:43:19.760&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;updated_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2019-06-04T15:43:19.760&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;published_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2019-06-04T15:43:18&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このJSONファイルを見たら分かると思いますが、私たちは2つのテストデーターを入れる予定です。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;マスターデーターを入れるdata-seed&quot;&gt;マスターデーターを入れる(Data Seed)&lt;/h2&gt; &lt;p&gt;下記のコマンドで私たちが作ったデーターシード(Data Seed)をデーターベースに入れます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python manage.py loaddata blog/fixtures/posts-data.json &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;確認&quot;&gt;確認&lt;/h2&gt; &lt;p&gt;データーベースツールを使ってデーターがうまく入ったか確認してみます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/data-seed/check-data-seed-via-database-tool.png&quot; alt=&quot;ジャンゴ(django)のマスターデーター追加(django data seed) - データーベースツールを使ってデーター確認&quot; /&gt;&lt;/p&gt; &lt;p&gt;もちろん、ジャンゴ(django)の管理画面でも確認ができます。下記のコマンドでジャンゴ(django)のテストサーバーを起動します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python manage.py runserver &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして管理画面のURL(http://127.0.0.1:8000/admin)に接続したら追加されたデーターが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/data-seed/check-data-seed-via-admin.png&quot; alt=&quot;ジャンゴ(django)のマスターデーター追加(django data seed) - ジャンゴ(django)の管理画面を使ってデーター確認&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでジャンゴ(django)のマスターデーターを追加する方法(Data seed)について見てみました。これからはジャンゴ(django)でプロジェクトを進める時、マスターデーターやテストデーターを準備することができるようになりました！&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">概要 一般的にウェブサービスを開発する時最初、基本的設定が必要なマスターデーターやテストデーターが必要になります。このブログではジャンゴ(django)のプロジェクトでfixturesを使ってマスターデーターを生成する方法について説明します。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/data-seed/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする</title><link href="https://dev-yakuza.github.io/django/heroku/" rel="alternate" type="text/html" title="ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする"/><published>2019-06-01T00:00:00+09:00</published><updated>2019-06-03T18:42:46+09:00</updated><id>https://dev-yakuza.github.io/django/heroku-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/heroku/">&lt;h2 id=&quot;개요&quot;&gt;개요&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)で作ったプロジェクトをウェブサービスをするためヘロク(&lt;a href=&quot;https://heroku.com/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Heroku&lt;/a&gt;)にジャンゴ(django)プロジェクトをアップロードしてウェブサービスを開始してみましょう。&lt;/p&gt; &lt;p&gt;このブログはシリーズです。下記のリンクでシリーズの他の記事を見ることができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/form/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のフォーム(Form)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;また、このブログシリーズで説明したソースコードはgithubに公開されております。下記のリンクで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_exercise&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_exercise&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;ヘロクheroku会員登録&quot;&gt;ヘロク(Heroku)会員登録&lt;/h2&gt; &lt;p&gt;ヘロク(Heroku)サービスを使うためにはヘロク(Heroku)サービスに会員登録する必要があります。下記のリンクを押してヘロク(Heroku)サービスへ会員登録やログインをします。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;ヘロク(Heroku): &lt;a href=&quot;https://heroku.com/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;https://heroku.com/&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;会員登録やログインは一般サービスの会員登録やログインの手続きと一緒なので詳しく説明は省略します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/heroku/heroku-signup.png&quot; alt=&quot;ジャンゴ(django)プロジェクトヘロク(Heroku)アップロード - 会員登録&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;ヘロクherokuアプリ生成&quot;&gt;ヘロク(Heroku)アプリ生成&lt;/h2&gt; &lt;p&gt;ヘロク(Heroku)でウェブサービスを運営するためにはヘロク(Heroku)にアプリ(App)を作る必要があります。&lt;/p&gt; &lt;p&gt;会員登録やログインした後、下記のようにダッシュボード(&lt;a href=&quot;https://dashboard.heroku.com/apps&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Dashboard&lt;/a&gt;)画面が見えます。&lt;code class=&quot;highlighter-rouge&quot;&gt;Create new app&lt;/code&gt;を押して新しアプリを生成します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/heroku/heroku-create-app.png&quot; alt=&quot;ジャンゴ(django)プロジェクトヘロク(Heroku)アップロード - アプリ生成&quot; /&gt;&lt;/p&gt; &lt;p&gt;ヘロク(Heroku)アプリを生成するため、アプリ情報を入力します。無料なので地域はアメリカ(United State)とヨーロッパ(Europe)しか選択できません。アプリの情報を入力したら&lt;code class=&quot;highlighter-rouge&quot;&gt;Create app&lt;/code&gt;を押してアプリを生成します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/heroku/heroku-app-info.png&quot; alt=&quot;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロード - アプリ情報入力&quot; /&gt;&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;ヘロクheroku-cli-インストール&quot;&gt;ヘロク(Heroku) CLI インストール&lt;/h2&gt; &lt;p&gt;私たちはヘロク(Heroku)のCLI(Command Line Interface)を使って私たちが作ったジャンゴ(djanog)プロジェクトをヘロク(Herkou)へアップロード(Deploy)する予定です。下記のリンクを押して各OSに会うヘロク(Heroku) CLIをダウンロードしてください。このブログではmacOSを基準として説明します。를&lt;/p&gt; &lt;ul&gt; &lt;li&gt;ヘロク(Heroku) CLI ダウンロード: &lt;a href=&quot;https://devcenter.heroku.com/articles/heroku-cli&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;https://devcenter.heroku.com/articles/heroku-cli&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;macOSには下記のコマンドでヘロク(Heroku) CLIをインストールすることができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew tap heroku/brew &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; brew install heroku &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;ヘロクherokuログイン&quot;&gt;ヘロク(Heroku)ログイン&lt;/h2&gt; &lt;p&gt;ヘロク(Heroku)へウェブサービスをデプロイ(Deploy)するためには、ヘロク(Heroku) CLIを使ってヘロク(Heroku)にログインする必要があります。下記のコマンドを使ってヘロク(Heroku)サービスにログインします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku login &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のヘロク(Heroku)コマンドを実行すると、下記のようにログイン画面がウェブブラウザに表示されます。&lt;code class=&quot;highlighter-rouge&quot;&gt;Log in&lt;/code&gt;ボタンを押してログインします。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/heroku/heroku-login.png&quot; alt=&quot;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロード - ヘロクログイン&quot; /&gt;&lt;/p&gt; &lt;p&gt;ログインが完了されたら下記のようにログイン成功画面が表示されます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/heroku/heroku-login-success.png&quot; alt=&quot;장고(django) 프로젝트 헤로쿠(Heroku) 업로드 - 헤로쿠 로그인 성공&quot; /&gt;&lt;/p&gt; &lt;p&gt;またはヘロク(Heroku)コマンドを使ったターミナルで下記のようにログイン成功メッセージを確認することができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku: Press any key to open up the browser to login or q to &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;: Opening browser to https://cli-auth.heroku.com/auth/browser/f844937e-aaaf-4620-998f-1f938ed3dea7 Logging &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;... &lt;span class=&quot;k&quot;&gt;done &lt;/span&gt;Logged &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;as dev.yakuza@gmail.com &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;ジャンゴdjangoプロジェクト修正&quot;&gt;ジャンゴ(django)プロジェクト修正&lt;/h2&gt; &lt;p&gt;ヘロク(Heroku)サービスへデプロイ(Deploy)する準備が終わりました。私たちはジャンゴ(django)プロジェクトをヘロク(Heroku)サービスで起動するため修正する必要があります。&lt;code class=&quot;highlighter-rouge&quot;&gt;manage.py&lt;/code&gt;があるフォルダで&lt;code class=&quot;highlighter-rouge&quot;&gt;Procfile&lt;/code&gt;ファイルを生成して下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;web: gunicorn django_exercise.wsgi &lt;span class=&quot;nt&quot;&gt;--log-file&lt;/span&gt; - &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上の内容で&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise.wsgi&lt;/code&gt;の部分を自分のプロジェクト名前で更新してください。(&lt;code class=&quot;highlighter-rouge&quot;&gt;[project name].wsgi&lt;/code&gt;)私たちは&lt;code class=&quot;highlighter-rouge&quot;&gt;gunicorn&lt;/code&gt;と言うパイソンHTTPサーバー(&lt;code class=&quot;highlighter-rouge&quot;&gt;Python WSGI HTTP Server&lt;/code&gt;)を使ってウェブサービスをすることをヘロク(Heroku)に知らせます。&lt;/p&gt; &lt;p&gt;下記のコマンドでヘロク(Heroku)でジャンゴ(django)を使うため必要なモジュールをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# source venv/bin/activate&lt;/span&gt; pip install gunicorn dj-database-url psycopg2-binary whitenoise &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;gunicorn: 上で説明したパイソンHTTPサーバー(&lt;code class=&quot;highlighter-rouge&quot;&gt;Python WSGI HTTP Server&lt;/code&gt;)です。&lt;/li&gt; &lt;li&gt;dj-database-url, psycopg2-binary: ヘロク(Heroku)はpostgresqlを使います。そこに必要な設定モジュールです。&lt;/li&gt; &lt;li&gt;whitenoise: ヘロク(Heroku)でStaticファイルを使うため必要なモジュールです。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;インストールが完了されたら下記のコマンドで&lt;code class=&quot;highlighter-rouge&quot;&gt;requirements.txt&lt;/code&gt;を更新します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip freeze &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; requirements.txt &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;更新したら、&lt;code class=&quot;highlighter-rouge&quot;&gt;dajgno_exercise/settings.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;dj_database_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ALLOWED_HOSTS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'127.0.0.1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'.herokuapp.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MIDDLEWARE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'whitenoise.middleware.WhiteNoiseMiddleware'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;db_from_env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dj_database_url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn_max_age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DATABASES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'default'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db_from_env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして、私たちはヘロク(Heroku)に私たちのジャンゴ(django)プロジェクトがどのバージョンのパイソン(python)を使ってるか知らせる必要があります。下記のコマンドでパイソン(python)のバージョンをチェックします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# source venv/bin/activate&lt;/span&gt; python &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Python 3.7.2&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;パイソン(python)のバージョンが確認できたら&lt;code class=&quot;highlighter-rouge&quot;&gt;manage.py&lt;/code&gt;があるフォルダで&lt;code class=&quot;highlighter-rouge&quot;&gt;runtime.txt&lt;/code&gt;を生成した後、下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python-3.7.2 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;最後にジャンゴ(djanog)を本番(Production)にデプロイする時は、&lt;code class=&quot;highlighter-rouge&quot;&gt;Debug&lt;/code&gt;モードを使わないようにする必要があります。&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/settings.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;... DEBUG &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; False ... &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;今まで作った内容を私たちが管理するgitに保存します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git add &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'prepare to deploy'&lt;/span&gt; git push origin master &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;デプロイdeploy&quot;&gt;デプロイ(Deploy)&lt;/h2&gt; &lt;p&gt;全ての準備が終わりました。今からヘロク(Heroku)へ私たちのジャンゴ(django)プロジェクトをデプロイ(Deploy)してみましょう。下記のコマンドでgitのremoteへヘロク(Heroku)を追加します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku git:remote &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; djangoexercise &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドでうまく追加されたか確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git remote &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしたら下記のようにgitのremoteへヘロク(Heroku)が追加されたことが確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku https://git.heroku.com/djangoexercise.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; heroku https://git.heroku.com/djangoexercise.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; origin https://github.com/dev-yakuza/django_exercise.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; origin https://github.com/dev-yakuza/django_exercise.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドでデプロイ(Deploy)します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git push heroku master &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ヘロク(Heroku)はgitを基盤にしてデプロイ(Deploy)します。上のコマンドですでに私たちのジャンゴ(django)のプロジェクトはヘロク(Heroku)へデプロイ(Deploy)されました。今からは私たちが作ったmigrationを使って新しくデーターベースを構築して、管理者を生成します。下記のコマンドでデーターベースを構築します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku run python manage.py migrate &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドでジャンゴ(django)の管理者を生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku run python manage.py createsuperuser &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;確認&quot;&gt;確認&lt;/h2&gt; &lt;p&gt;私たちがヘロク(Heroku)へデプロイしたジャンゴ(django)のプロジェクトを確認してみましょう。下記のコマンドで私たちが作ったサイトがウェブブラウザへ表示させます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku open &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のように私たちが作ったジャンゴ(django)プロジェクトがうまく表示されることが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/heroku/heroku-django-deploy.png&quot; alt=&quot;ジャンゴ(django)のプロジェクトを(Heroku)へアップロード - ヘロクデプロイ確認&quot; /&gt;&lt;/p&gt; &lt;p&gt;URLの後ろに&lt;code class=&quot;highlighter-rouge&quot;&gt;/admin&lt;/code&gt;を入力して管理画面に移動してみます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/heroku/heroku-django-admin.png&quot; alt=&quot;ジャンゴ(django)のプロジェクトを(Heroku)へアップロード - ジャンゴ管理画面ログイン画面&quot; /&gt;&lt;/p&gt; &lt;p&gt;私たちがコマンドで生成した&lt;code class=&quot;highlighter-rouge&quot;&gt;superuser&lt;/code&gt;でログインしてみます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/heroku/heroku-admin.png&quot; alt=&quot;ジャンゴ(django)のプロジェクトを(Heroku)へアップロード - ジャンゴ管理画面&quot; /&gt;&lt;/p&gt; &lt;p&gt;私たちが開発した&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデル(Model)が表示することが確認できます。&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでジャンゴ(django)のプロジェクトをヘロク(Heroku)へデプロイ(Deploy)してみました。私たちはもうジャンゴ(django)で簡単なウェブサービスを提供する能力を持つようになりました。今後このブログではサービスを開発した時わかった内容まとめる要諦です。&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">개요 ジャンゴ(django)で作ったプロジェクトをウェブサービスをするためヘロク(Heroku)にジャンゴ(django)プロジェクトをアップロードしてウェブサービスを開始してみましょう。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/heroku/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ジャンゴ(django)のフォーム(Form)</title><link href="https://dev-yakuza.github.io/django/form/" rel="alternate" type="text/html" title="ジャンゴ(django)のフォーム(Form)"/><published>2019-05-24T00:00:00+09:00</published><updated>2019-06-03T18:42:46+09:00</updated><id>https://dev-yakuza.github.io/django/form-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/form/">&lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;今までジャンゴ(django)が基本的提供してる管理者ページ(Administrator)を使ってデーターを追加したり修正したりしました。このブログではジャンゴ(django)のフォーム(Form)を使ってデーターを追加したり修正する方法について見てみます。&lt;/p&gt; &lt;p&gt;このブログはシリーズです。下記のリンクでシリーズの他の記事を見ることができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ジャンゴ(django)のフォーム(Form)&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/heroku/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;また、このブログシリーズで説明したソースコードはgithubに公開されております。下記のリンクで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_exercise&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_exercise&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;フォームform生成&quot;&gt;フォーム(Form)生成&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)のフォーム(Form)の機能を使うため&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/forms.py&lt;/code&gt;ファイルを生成して下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forms&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PostCreateForm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;forms&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelForm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'title'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'content'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;from django import forms&lt;/code&gt;: ジャンゴ(django)が基本的に提供してるフォーム(form)を読んできます&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;from .models import Post&lt;/code&gt;: フォーム(Form)を使ってデータを追加したり修正する&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデル(Model)を読んできます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;class PostCreateForm(forms.ModelForm):&lt;/code&gt;: PostCreateFormと言う名前でクラス(Class)を生成してfomrs.ModelFormを相続します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;class Meta:&lt;/code&gt;: このフォーム(Form)で使う内容を作成します。ここではこのフォーム(Form)が使うモデル(Model)はPostであることを設定して(&lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;k&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;/code&gt;)、その中でtitleとcontentフィルド(&lt;code class=&quot;highlighter-rouge&quot;&gt;fields = ('title', 'content')&lt;/code&gt;)を使うことを設定しました。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;ビューview生成&quot;&gt;ビュー(View)生成&lt;/h2&gt; &lt;p&gt;今からジャンゴ(django)のフォーム(Form)を使うビュー(View)を作成します。ビュー(View)の作成は以前のブログ(&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;)で練習したので簡単に作成出来ると思います。&lt;/p&gt; &lt;h3 id=&quot;htmlファイル生成&quot;&gt;HTMLファイル生成&lt;/h3&gt; &lt;p&gt;一旦データーをモラウェブページを作りましょう。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/templates/post_create.html&lt;/code&gt;ファイルを生成して下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; {% extends 'blog/layout.html' %} {% block content %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{% url 'posts' %}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; Post List &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;Create Blog post&lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;form&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; {% csrf_token %} {{ form.as_p }} &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;submit&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Save&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/form&amp;gt;&lt;/span&gt; {% endblock %} &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{% csrf_token %}&lt;/code&gt;: CSRF攻撃(Cross-site Request Forgery)を防止するためのコードです。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{{ form.as_p }}&lt;/code&gt;: ビュー(View)から貰ったパラメーター&lt;code class=&quot;highlighter-rouge&quot;&gt;form&lt;/code&gt;から段落(&lt;code class=&quot;highlighter-rouge&quot;&gt;as_p: Paragraph&lt;/code&gt; - &amp;lt;p&amp;gt;タグ)形式で表示します。 これ以外もテーブル(&lt;code class=&quot;highlighter-rouge&quot;&gt;as_table&lt;/code&gt; - &amp;lt;table&amp;gt;タグ)形式、リスト(&lt;code class=&quot;highlighter-rouge&quot;&gt;as_ul&lt;/code&gt; - &amp;lt;ul&amp;gt;タグ)形式で表示することができます。この機能を使ったら私たちが&lt;code class=&quot;highlighter-rouge&quot;&gt;form&lt;/code&gt;クラス(class)に設定した&lt;code class=&quot;highlighter-rouge&quot;&gt;fields&lt;/code&gt;が表示されます。&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;url生成&quot;&gt;URL生成&lt;/h3&gt; &lt;p&gt;次は、新しURLを生成するため&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/urls.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.urls&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlpatterns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'posts'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'post/&amp;lt;int:id&amp;gt;/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post_detail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'post_detail'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'post/create/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'post_create'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; here&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;この部分は以前のブログで説明したので説明は省略します。この部分で分からないものがある方は以前のブログを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;以前のブログ: &lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;ビューview生成-1&quot;&gt;ビュー(View)生成&lt;/h3&gt; &lt;p&gt;最後はデーターを処理するビュー(View)を生成します。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/views.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.shortcuts&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_object_or_404&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.utils&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.forms&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PostCreateForm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;post_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PostCreateForm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;POST&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is_valid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;author&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;published_at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'post_detail'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PostCreateForm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'blog/post_create.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'form'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;redirect&lt;/code&gt;: データーを保存した後のページを他のページにリダイレクト(&lt;code class=&quot;highlighter-rouge&quot;&gt;Redirect&lt;/code&gt;)させるための機能を読んできます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;from django.utils import timezone&lt;/code&gt;: ブログデーターの&lt;code class=&quot;highlighter-rouge&quot;&gt;publised_at&lt;/code&gt;に現在日付を入れるための機能を読んできます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;if request.method == &quot;POST&quot;: ... else&lt;/code&gt;: 私たちが作ったファンクションには基本的&lt;code class=&quot;highlighter-rouge&quot;&gt;request&lt;/code&gt;パラメーターが設定されております。このrequestパラメーターの&lt;code class=&quot;highlighter-rouge&quot;&gt;method&lt;/code&gt;を確認してGET/POSTを判別ができます。POSTの場合はフォーム(Form)を作成してデーターを保存する場合です。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;form = PostCreateForm(request.POST)&lt;/code&gt;: 私たちがファオーム(Form)を使って送信したPOSTデーターは&lt;code class=&quot;highlighter-rouge&quot;&gt;request.POST&lt;/code&gt;中にあります。このデーターを持って私たちが作った&lt;code class=&quot;highlighter-rouge&quot;&gt;PostCreateForm&lt;/code&gt;のファオームクラス(Form class)からフォームオブジェクト(Form object)を生成します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;if form.is_valid():&lt;/code&gt; ジャンゴ(django)が基本的提供してるバリデーションチェック(Validation)機能を使ってPOSTで送信されたデーターを確認します。私たちはブログPostモデル(Model)を生成する時、&lt;code class=&quot;highlighter-rouge&quot;&gt;published_at&lt;/code&gt;だけ&lt;code class=&quot;highlighter-rouge&quot;&gt;blank = True&lt;/code&gt;を使いました。したかってこのフィールド以外のフィールドは全て必須(required)フィールドになります。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post = form.save(commit=False)&lt;/code&gt;: フォームオブジェクト(Form object)を使ってデーターを保存(&lt;code class=&quot;highlighter-rouge&quot;&gt;form.save&lt;/code&gt;)します。しかし&lt;code class=&quot;highlighter-rouge&quot;&gt;commit=False&lt;/code&gt;オプションでデーターベースにはまだ反映されないように設定しました。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post.author = request.user&lt;/code&gt;: 上ですぐ保存してない理由は他のデーターも一緒に保存するためです。保存するデーターの作者(author)を現在&lt;code class=&quot;highlighter-rouge&quot;&gt;request&lt;/code&gt;を送ったユーザーにします。私たちは管理画面を使ってログインした状態なので&lt;code class=&quot;highlighter-rouge&quot;&gt;request.user&lt;/code&gt;には管理画面にログインしたユーザーの情報が入っています。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post.published_at = timezone.now()&lt;/code&gt;: 追加的公開日(&lt;code class=&quot;highlighter-rouge&quot;&gt;published_at&lt;/code&gt;)も一緒に入れて、データーがすぐに画面に表示されるようにします。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post.save()&lt;/code&gt;: 最後にデーターをデーターベースに保存します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;return redirect('post_detail', id=post.id)&lt;/code&gt;: そして私たちが作ったデーターがよく保存されたか確認するため&lt;code class=&quot;highlighter-rouge&quot;&gt;redirect&lt;/code&gt;ファンクションを使って&lt;code class=&quot;highlighter-rouge&quot;&gt;post_detail&lt;/code&gt;ページにリダイレクト(redirect)させます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;if request.method == &quot;POST&quot;: ... else&lt;/code&gt;: もし送ったリクエスト(request)がPOSTじゃない場合&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;form = PostCreateForm()&lt;/code&gt;: 私たちが作ったフォーム(Form)を持ってきて&lt;code class=&quot;highlighter-rouge&quot;&gt;return render(request, 'blog/post_create.html', {'form': form})&lt;/code&gt;の画面を表示します。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;リンク生成&quot;&gt;リンク生成&lt;/h3&gt; &lt;p&gt;上で作ったページを使うためメインページである&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/posts.html&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; {% extends 'blog/layout.html' %} {% block content %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{% url 'post_create' %}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Create Blog Post&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; {% for post in posts %} ... {% endfor %} {% endblock %} &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;確認&quot;&gt;確認&lt;/h2&gt; &lt;p&gt;今まで作った内容を確認するため&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1&lt;/code&gt;に接続します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/form/main-page.png&quot; alt=&quot;ジャンゴ(django)のフォーム(Form) - メインページ&quot; /&gt;&lt;/p&gt; &lt;p&gt;そしたら上のように私たちが作った&lt;code class=&quot;highlighter-rouge&quot;&gt;Create Blog Post&lt;/code&gt;リンクが見えるメインページが確認できます。&lt;code class=&quot;highlighter-rouge&quot;&gt;Create Blog Post&lt;/code&gt;を押してブログ作成ページに移動します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/form/create-blog-post-page.png&quot; alt=&quot;ジャンゴ(django)のフォーム(Form) - ブログ作成ページ&quot; /&gt;&lt;/p&gt; &lt;p&gt;リンクを押したら上のようにフォーム(Form)作成ページが見えます。皆さんが保存したい内容を入れって&lt;code class=&quot;highlighter-rouge&quot;&gt;Save&lt;/code&gt;ボタンを押してデーターを保存します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/form/detail-page.png&quot; alt=&quot;ジャンゴ(django)のフォーム(Form) - 詳細ページ&quot; /&gt;&lt;/p&gt; &lt;p&gt;データーが保存されたら私たちが作った詳細ページにリダイレクト(Redirect)されるように作ったので、上のように保存したデーターの詳細ページが見えます。&lt;/p&gt; &lt;p&gt;最後に上部にある&lt;code class=&quot;highlighter-rouge&quot;&gt;Post List&lt;/code&gt;のリンクを押してメインページに移動します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/form/main-page-with-new-data.png&quot; alt=&quot;ジャンゴ(django)のフォーム(Form) - データーが追加されたメインページ&quot; /&gt;&lt;/p&gt; &lt;p&gt;メインメージが上のように私たちが追加したデーターが表示されることが確認できます。 메인 페이지에서 위와 같이 우리가 추가한 데이터가 표시되는 걸 확인할 수 있습니다.&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;今回はジャンゴ(django)のフォーム(Form)を使う方法について見てみました。また、ビュー(View)からのユーザーのリクエスト(Request)をGETやPOSTで判別して別々処理する方法もみてみました。これで私たちはユーザーが送ったデーターを保存したり修正することができます。&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">概要 今までジャンゴ(django)が基本的提供してる管理者ページ(Administrator)を使ってデーターを追加したり修正したりしました。このブログではジャンゴ(django)のフォーム(Form)を使ってデーターを追加したり修正する方法について見てみます。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/form/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ジャンゴ(django)のビュー(View)</title><link href="https://dev-yakuza.github.io/django/view/" rel="alternate" type="text/html" title="ジャンゴ(django)のビュー(View)"/><published>2019-05-23T00:00:00+09:00</published><updated>2019-06-03T18:42:46+09:00</updated><id>https://dev-yakuza.github.io/django/view-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/view/">&lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;今までデーターを保存するデーターベースとの連動やデーターを生成して読んで更新して削除(CRUD - Create Read Update Delete)する方法、そしてユーザーが接続するURLを生成する方法などジャンゴ(django)でウェブサービスをするための色んなことを見てみました。今回のブログではユーザーに見せるウェブページを作るためジャンゴ(django)のビュー(View)を使う方法について見てみます。&lt;/p&gt; &lt;p&gt;このブログはシリーズです。下記のリンクでシリーズの他の記事を見ることができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ジャンゴ(django)のビュー(View)&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/form/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のフォーム(Form)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/heroku/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;また、このブログシリーズで説明したソースコードはgithubに公開されております。下記のリンクで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_exercise&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_exercise&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;url確認&quot;&gt;URL確認&lt;/h2&gt; &lt;p&gt;以前のブログ(&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;)で私たちはユーザーが接続するURLと静的HTMLを連結する方法についてみてみました。下記のジャンゴ(django)コマンドを実行してテストサーバーを起動した後、&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:8000/&lt;/code&gt;に接続すると&lt;code class=&quot;highlighter-rouge&quot;&gt;Hello World&lt;/code&gt;が表示されるウェブページを確認することができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# source venv/bin/activate&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# cd django_exercise/&lt;/span&gt; python manage.py runserver &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;データー伝達&quot;&gt;データー伝達&lt;/h2&gt; &lt;p&gt;以前のブログ(&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;)で生成したデーターをウェブページで見せるためビュー(View)にデーターを伝達してみます。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/views.py&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.shortcuts&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;published_at__isnull&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;order_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'-published_at'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'blog/posts.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'posts'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;from .models import Post&lt;/code&gt;: 私たちが作った&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデル(Models)を読んできます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;posts = Post.objects.filter(published_at__isnull=False).order_by('-published_at')&lt;/code&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;published_at__isnull=False&lt;/code&gt;: published_atフィールドがnullじゃない場合(&lt;code class=&quot;highlighter-rouge&quot;&gt;__isnull=False&lt;/code&gt;)のデーターを持ってきます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;order_by('-published_at')&lt;/code&gt;: データーを&lt;code class=&quot;highlighter-rouge&quot;&gt;published_at&lt;/code&gt;フィールドで降順でソーティングします。&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;return render(request, 'blog/posts.html', {'posts': posts})&lt;/code&gt;: 持ってきたデーターを&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/posts.html&lt;/code&gt;ページに&lt;code class=&quot;highlighter-rouge&quot;&gt;{'posts': posts}&lt;/code&gt;でposts変数で送ります。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;データー表示&quot;&gt;データー表示&lt;/h2&gt; &lt;p&gt;上で伝達したデーターを画面に表示する方法についてみてみましょう。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/templates/blog/posts.html&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;&lt;/span&gt;Hello World&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; {% for post in posts %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&amp;gt;&lt;/span&gt; {{ post.title }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;small&amp;gt;&lt;/span&gt;(published: {{ post.published_at }})&lt;span class=&quot;nt&quot;&gt;&amp;lt;/small&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;{{ post.content | linebreaksbr }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt; {% endfor %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{% for post in posts %}...{% endfor %}&lt;/code&gt;: 上で&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/views.py&lt;/code&gt;に伝達した&lt;code class=&quot;highlighter-rouge&quot;&gt;posts&lt;/code&gt;データーリストから&lt;code class=&quot;highlighter-rouge&quot;&gt;post&lt;/code&gt;でデーターを一つずつ持てくるループです。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{{ post.title }}&amp;lt;small&amp;gt;(published: {{ post.published_at }})&amp;lt;/small&amp;gt;&lt;/code&gt;: postデーターの&lt;code class=&quot;highlighter-rouge&quot;&gt;title&lt;/code&gt; / &lt;code class=&quot;highlighter-rouge&quot;&gt;published_at&lt;/code&gt;フィールドを表示します。 데이터를 표시합니다.&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;p&amp;gt;{{ post.content | linebreaksbr }}&amp;lt;/p&amp;gt;&lt;/code&gt;: postデーターの&lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt;を持って来て改行(&lt;code class=&quot;highlighter-rouge&quot;&gt;\n&lt;/code&gt;)を改行タグ(&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;br/&amp;gt;&lt;/code&gt;)に変換して表示します。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;上のようにコードを修正して&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:8000/&lt;/code&gt;に接続すると下記のようにデーターが表示されることが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/view/show-data.png&quot; alt=&quot;ジャンゴ(django)のビュー(View)を使ってデーター表示&quot; /&gt;&lt;/p&gt; &lt;p&gt;もっと練習するため、詳細ページを作ってみましょう。上で作った&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/templates/blog/posts.html&lt;/code&gt;を下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;&lt;/span&gt;Hello World&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; {% for post in posts %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{% url 'post_detail' id=post.id %}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; here --&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&amp;gt;&lt;/span&gt; {{ post.title }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;small&amp;gt;&lt;/span&gt;(published: {{ post.published_at }})&lt;span class=&quot;nt&quot;&gt;&amp;lt;/small&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;{{ post.content | linebreaksbr }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; here --&amp;gt;&lt;/span&gt; {% endfor %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{% url 'post_detail' id=post.id %}&lt;/code&gt;: 私たちが定義した&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/urls.py&lt;/code&gt;と&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/urls.py&lt;/code&gt;で&lt;code class=&quot;highlighter-rouge&quot;&gt;post_detail&lt;/code&gt;の名前(name)を探して当該URLで変換します。この時&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;と言うパラメーターを作って&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;のidを入れます。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;まだ、&lt;code class=&quot;highlighter-rouge&quot;&gt;post_detail&lt;/code&gt;とマッチングされるURLを作ってないです。今から&lt;code class=&quot;highlighter-rouge&quot;&gt;post_detail&lt;/code&gt;を対応するURLとビュー(View)を作ってみましょう。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/templates/blog/post_detail.html&lt;/code&gt;を作って下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;&lt;/span&gt;Hello World&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{% url 'posts' %}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; Post List &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&amp;gt;&lt;/span&gt; {{ post.title }} &lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;created: {{ post.created_at }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;updated: {{ post.updated_at }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;published: {{ post.published_at }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;author: {{ post.author.username }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;{{ post.content | linebreaksbr }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{% url 'posts' %}&lt;/code&gt;: URLファイルで&lt;code class=&quot;highlighter-rouge&quot;&gt;posts&lt;/code&gt;と言う名前(name)を持ってるURLを探してそのURLで変換します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;author: {{ post.author.username }}&lt;/code&gt;: 私たちが作った&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデルとジャンゴ(django)が基本的提供してる&lt;code class=&quot;highlighter-rouge&quot;&gt;auth.User&lt;/code&gt;と連結して作者(&lt;code class=&quot;highlighter-rouge&quot;&gt;author&lt;/code&gt;)フィールドを作りました。このように連携してるモデル(Models)から&lt;code class=&quot;highlighter-rouge&quot;&gt;username&lt;/code&gt;を持って来て表示することもできます。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;画面に表示するページが準備できました。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/urls.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.urls&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlpatterns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'posts'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'post/&amp;lt;int:id&amp;gt;/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post_detail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'post_detail'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; here&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post/&amp;lt;int:id&amp;gt;/&lt;/code&gt;: URLにパラメーターで来た数字のデーターである&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;を表示します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;name='post_detail'&lt;/code&gt;: URLの名前は&lt;code class=&quot;highlighter-rouge&quot;&gt;post_detail&lt;/code&gt;で、&lt;code class=&quot;highlighter-rouge&quot;&gt;views.post_detail&lt;/code&gt;とマッピングされています。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;これで&lt;code class=&quot;highlighter-rouge&quot;&gt;{% url 'post_detail' id=post.id %}&lt;/code&gt;を使ったら&lt;code class=&quot;highlighter-rouge&quot;&gt;post/&amp;lt;int:id&amp;gt;/&lt;/code&gt;のURLを表示して&lt;code class=&quot;highlighter-rouge&quot;&gt;views.post_detail&lt;/code&gt;とマッピングする準備が終わりました。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/views.py&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.shortcuts&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_object_or_404&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; here&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;published_at__isnull&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;order_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'-published_at'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'blog/posts.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'posts'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; here&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;post_detail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_object_or_404&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'blog/post_detail.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'post'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;get_object_or_404&lt;/code&gt;: ジャンゴが基本的提供するファンクションを追加します。このファンクションは当該オブジェクト(Object)からデーターを持って来るがデーターがない場合&lt;code class=&quot;highlighter-rouge&quot;&gt;404&lt;/code&gt;エラーを発生するファンクションです。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;def post_detail(request, id):&lt;/code&gt;: 新しく追加したURLとマッピングするファンクションです。パラメーターで渡した&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;を別の変数でもらえます。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;これで詳細ページを作ってみました。&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:8000&lt;/code&gt;に接続したら以前と違って下記のようにリンクがあるページが見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/view/main-page-with-link.png&quot; alt=&quot;ジャンゴ(django)のモデル(Models)の詳細ページリンク&quot; /&gt;&lt;/p&gt; &lt;p&gt;当該リンクを押したら詳細ページURL(&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:8000/post/2/&lt;/code&gt;)に移動して下記のように&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;の詳細ページが見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/view/post-detail-page.png&quot; alt=&quot;ジャンゴ(django)のモデル(Models)の詳細ページ&quot; /&gt;&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;テンプレートファイル&quot;&gt;テンプレートファイル&lt;/h2&gt; &lt;p&gt;ビュー(View)とURL、そしてデーターを表示する方法にはちょっと慣れた気がします。しかし、HTMLファイルに重複するコードがたくさん見えます。まだ、&lt;code class=&quot;highlighter-rouge&quot;&gt;css, js&lt;/code&gt;や&lt;code class=&quot;highlighter-rouge&quot;&gt;meta&lt;/code&gt;タグがないから大丈夫ですが、このタグがドンドン多くなったら重複するコードが増えます。このような重複部分を新しファイルで作って持って来る方法についてみてみます。&lt;/p&gt; &lt;p&gt;一旦、静的ファイル(&lt;code class=&quot;highlighter-rouge&quot;&gt;css, js 등&lt;/code&gt;)を追加する方法についてみてみます。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/static/css/main.css&lt;/code&gt;ファイルを生成して下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;h1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このブログではデザインの部分は説明しません。もっと美しくウェブページを作りたい方はこのファイルを修正してください。ジャンゴ(django)は&lt;code class=&quot;highlighter-rouge&quot;&gt;static&lt;/code&gt;と言う名前のフォルダを自動に探して登録するので追加的登録作業をする必要はありません。&lt;/p&gt; &lt;p&gt;じゃ&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/templates/blog/layout.html&lt;/code&gt;ファイルを作って下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; {% load static %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Hello World&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{% static 'css/main.css' %}&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; {% block content %} {% endblock %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{% load static %}&lt;/code&gt;: このファイルから&lt;code class=&quot;highlighter-rouge&quot;&gt;static&lt;/code&gt;フォルダを使えように&lt;code class=&quot;highlighter-rouge&quot;&gt;static&lt;/code&gt;フォルダを読んで来ます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;link rel=&quot;stylesheet&quot; href=&quot;{% static 'css/main.css' %}&quot; /&amp;gt;&lt;/code&gt;: 私たちが読んできた&lt;code class=&quot;highlighter-rouge&quot;&gt;static&lt;/code&gt;フォルダから&lt;code class=&quot;highlighter-rouge&quot;&gt;css/main.css&lt;/code&gt;を探してそのURLに変換します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{% block content %} {% endblock %}&lt;/code&gt;: このレイアウト(layout)ファイルに必要なデーター(&lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt;)を表示する位置を設定します。このように表示したい部分を&lt;code class=&quot;highlighter-rouge&quot;&gt;block [name]&lt;/code&gt;で設定してそのブロック(block)を変換する部分を&lt;code class=&quot;highlighter-rouge&quot;&gt;[name]&lt;/code&gt;を使って作ります。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;レイアウト(layout)ファイルを使うため&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/templates/blog/posts.html&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; {% extends 'blog/layout.html' %} {% block content %} {% for post in posts %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{% url 'post_detail' id=post.id %}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&amp;gt;&lt;/span&gt; {{ post.title }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;small&amp;gt;&lt;/span&gt;(published: {{ post.published_at }})&lt;span class=&quot;nt&quot;&gt;&amp;lt;/small&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;{{ post.content | linebreaksbr }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; {% endfor %} {% endblock %} &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{% extends 'blog/layout.html' %}&lt;/code&gt;: このファイル(posts.html)は私たちが作ったレイアウト(layout.html)ファイルを使います。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{% block content %}...{% endblock %}&lt;/code&gt;: 私たちがレイアウト(layout.html)ファイルに作ったブロック(block)、そこで名前が&lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt;であるブロック(block)をここで作成した内容で変換します。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;そして&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/templates/blog/post_detail.html&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; {% extends 'blog/layout.html' %} {% block content %} {% for post in posts %} &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{% url 'post_detail' id=post.id %}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&amp;gt;&lt;/span&gt; {{ post.title }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;small&amp;gt;&lt;/span&gt;(published: {{ post.published_at }})&lt;span class=&quot;nt&quot;&gt;&amp;lt;/small&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;{{ post.content | linebreaksbr }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; {% endfor %} {% endblock %} &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上で説明した内容と同じようにレイアウト(layout.html)ファイルを使って名前が&lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt;であるブロック(block)をここで作成した内容で変換します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;確認&quot;&gt;確認&lt;/h2&gt; &lt;p&gt;今まで作成した内容を確認するため&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:8000/&lt;/code&gt;に接続してみます。そしたら私たちが作成した&lt;code class=&quot;highlighter-rouge&quot;&gt;css&lt;/code&gt;が適用された画面が下記のように見えます。(画面が上手く表示できない方はテストサーバーを再起動してください。)&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/view/main-page-with-static.png&quot; alt=&quot;ジャンゴ(django)のテンプレート活用 - メインページ&quot; /&gt;&lt;/p&gt; &lt;p&gt;リンクを押して詳細ページ(&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:8000/post/2/&lt;/code&gt;)に移動しても下記のように&lt;code class=&quot;highlighter-rouge&quot;&gt;css&lt;/code&gt;が適用されたことが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/view/post-detail-page-with-static.png&quot; alt=&quot;ジャンゴ(django)のテンプレート活用 - 詳細ページ&quot; /&gt;&lt;/p&gt; &lt;p&gt;これで私たちはジャンゴ(django)のテンプレートを活用して静的ファイル(css, jsなど)を持って来る方法とHTMLの重複を減らすための方法についてみてみました。&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;今回のブログでジャンゴ(django)のビュー(View)を使う全般的方法についてみてみました。データーを持って来て画面に表示して、表示される画面を管理するためのジャンゴ(django)のテンプレートを確認してみました。また、cssとjsような静的ファイル(static)を持って来る方法もみてみました。もう、私たちはこれを使って一般的なウェブサービスサイトを作れるようになりました！&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">概要 今までデーターを保存するデーターベースとの連動やデーターを生成して読んで更新して削除(CRUD - Create Read Update Delete)する方法、そしてユーザーが接続するURLを生成する方法などジャンゴ(django)でウェブサービスをするための色んなことを見てみました。今回のブログではユーザーに見せるウェブページを作るためジャンゴ(django)のビュー(View)を使う方法について見てみます。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/view/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ジャンゴ(django)のORM</title><link href="https://dev-yakuza.github.io/django/orm/" rel="alternate" type="text/html" title="ジャンゴ(django)のORM"/><published>2019-05-21T00:00:00+09:00</published><updated>2019-06-03T18:42:46+09:00</updated><id>https://dev-yakuza.github.io/django/orm-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/orm/">&lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)のORM(Object-Relational Mapping)を使ってデーターベースにデーターを生成(Create)して、読んで(Read)、更新(Update)して、削除(Delete)する方法(CRUD - Create Read Update Delete)について説明します。&lt;/p&gt; &lt;p&gt;このブログはシリーズです。下記のリンクでシリーズの他の記事を見ることができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ジャンゴ(django)のORM&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/form/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のフォーム(Form)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/heroku/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;また、このブログシリーズで説明したソースコードはgithubに公開されております。下記のリンクで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_exercise&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_exercise&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;ormとは&quot;&gt;ORMとは?&lt;/h2&gt; &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ORM(Object-Relation Mapping)&lt;/code&gt;とは, &lt;code class=&quot;highlighter-rouge&quot;&gt;オブジェクト(Object)&lt;/code&gt;と&lt;code class=&quot;highlighter-rouge&quot;&gt;関係型データーベース(Relational)&lt;/code&gt;を&lt;code class=&quot;highlighter-rouge&quot;&gt;マッピング(Mapping)&lt;/code&gt;することを意味します。簡単に言えばデーターベースのテーブルとオブジェクト(Object)を連結してテーブルにCRUDする時、SQLクエリーを使わなくてもできることです。&lt;/p&gt; &lt;p&gt;私たちは以前のブログ(&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;)ですでにジャンゴ(django)のORM(Object-Relational Mapping)を使う準備をしました。以前のブログで生成した&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モーデル(Models)はデーターベースの&lt;code class=&quot;highlighter-rouge&quot;&gt;blog_post&lt;/code&gt;テーブルと連結(Mapping)されています。私たちはこのモーデル(Models)を使ってデーターベースに&lt;code class=&quot;highlighter-rouge&quot;&gt;CRUD&lt;/code&gt;をすることでジャンゴ(django)のORM(Object-Relational Mapping)を理解してみようかと思います。&lt;/p&gt; &lt;p&gt;下記のジャンゴ(django)コマンドでジャンゴ(django)が基本的提供してるシェル(Shell)を実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# source venv/bin/activate&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# cd django_exercise&lt;/span&gt; python manage.py shell &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコードで私たちは以前のブログで作った&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデル(Models)を読んできまう。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;blog.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;データー照会read&quot;&gt;データー照会(Read)&lt;/h2&gt; &lt;p&gt;下記のコードで&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;の内容を&lt;code class=&quot;highlighter-rouge&quot;&gt;照会(Read)&lt;/code&gt;します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;問題なく実行されたら下記のような結果が見えます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; Post.objects.all&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &amp;lt;QuerySet &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&amp;lt;Post: this is a test1 title&amp;gt;, &amp;lt;Post: this is a test2 title&amp;gt;]&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;後で使うため、下記のコードでユーザー(User)モデル(Models)を読んできて、データーを照会(Read)して変数に保存します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.contrib.auth.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'dev-yakuza'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;データー生成create&quot;&gt;データー生成(Create)&lt;/h2&gt; &lt;p&gt;下記のコードを実行したら&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;の新しデーターを&lt;code class=&quot;highlighter-rouge&quot;&gt;生成(Create)&lt;/code&gt;してみましょう。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'This is a test title from django shell'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'This is a test title from django shell. This is a test title from django shell.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;うまく実行されたら、下記のような結果が見えます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; Post.objects.create&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;admin, &lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'This is a test title from django shell'&lt;/span&gt;, &lt;span class=&quot;nv&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'This is a test title from django shell. This is a test title from django shell.'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &amp;lt;Post: This is a &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;title from django shell&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;データー生成確認&quot;&gt;データー生成確認&lt;/h2&gt; &lt;p&gt;もう一回&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデル(Models)を照会したら下記のようにデーターが上手く追加されたことが確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; Post.objects.all&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &amp;lt;QuerySet &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&amp;lt;Post: this is a test1 title&amp;gt;, &amp;lt;Post: this is a test2 title&amp;gt;, &amp;lt;Post: This is a &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;title from django shell&amp;gt;]&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;新しターミナルで下記のジャンゴ(django)コマンドでテストサーバーを実行した後、管理者ページでデーターを確認したら下記のようにデーターが保存されたことが確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# source venv/bin/activate&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# cd django_exercise&lt;/span&gt; python manage.py runserver &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/orm/check-data-in-administrator-page.png&quot; alt=&quot;ジャンゴ(django)の管理者ページでデーター確認&quot; /&gt;&lt;/p&gt; &lt;p&gt;データーベースツールを使って確認しても下記のようにデーターが保存されたことが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/orm/check-data-in-database-tool.png&quot; alt=&quot;データーベースツールを使ってデーター確認&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;データー更新update&quot;&gt;データー更新(Update)&lt;/h2&gt; &lt;p&gt;下記のコードでデーターを照会(Read)して&lt;code class=&quot;highlighter-rouge&quot;&gt;更新(Update)&lt;/code&gt;してみましょう。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'This is a test title from django shell'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'This is a test title updated from django shell'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコードで更新した内容を確認することができます。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'updated'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'updated'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;また、以前のブログで作成した&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデル(Models)のファンクションでも更新できます。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'updated'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# post.published_at&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &amp;gt;&amp;gt;&amp;gt; post.published_at&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# datetime.datetime(2019, 5, 21, 13, 1, 58, 970677)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;データー削除delete&quot;&gt;データー削除(Delete)&lt;/h2&gt; &lt;p&gt;下記のコードえで上で作成したデーターを&lt;code class=&quot;highlighter-rouge&quot;&gt;削除(Delete)&lt;/code&gt;してみます。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'updated'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &amp;gt;&amp;gt;&amp;gt; Post.objects.all()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &amp;lt;QuerySet [&amp;lt;Post: this is a test1 title&amp;gt;, &amp;lt;Post: this is a test2 title&amp;gt;]&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;照会条件&quot;&gt;照会条件&lt;/h2&gt; &lt;p&gt;今までデーターベースの&lt;code class=&quot;highlighter-rouge&quot;&gt;CRUD(Create Read Update Delete)&lt;/code&gt;についてみてみました。下記でデーターを照会(Read)する時使える一般的検索条件について説明します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;照会条件&lt;/li&gt; &lt;/ul&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;照会条件&lt;/th&gt; &lt;th&gt;説明&lt;/th&gt; &lt;th&gt;使い方&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;__contains&lt;/td&gt; &lt;td&gt;条件のテキストが含めてるデーターを照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(title__contains=’test’)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__icontains&lt;/td&gt; &lt;td&gt;条件のテキストの大文字や小文字の区分しなくて含めてるデーターを照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(title__icontains=’this’)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__lt&lt;/td&gt; &lt;td&gt;小値の場合(lt: less than)&lt;/td&gt; &lt;td&gt;Post.objects.filter(published_at__lt=timezone.now())&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__lte&lt;/td&gt; &lt;td&gt;小値や同じ値の場合(lte: less than or equal)&lt;/td&gt; &lt;td&gt;Post.objects.filter(published_at__lt=timezone.now())&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__gt&lt;/td&gt; &lt;td&gt;大値の場合(gt: greater than)&lt;/td&gt; &lt;td&gt;Post.objects.filter(published_at__gt=timezone.now())&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__gte&lt;/td&gt; &lt;td&gt;大値や同じの場合(gt: greater than or equal)&lt;/td&gt; &lt;td&gt;Post.objects.filter(published_at__gte=timezone.now())&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__in&lt;/td&gt; &lt;td&gt;条件のリストのデーターを照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(id__in=[1, 2, 3])&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__year&lt;/td&gt; &lt;td&gt;当該年度で照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(created_at__year=’2019’)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__year&lt;/td&gt; &lt;td&gt;当該月で照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(created_at__month=’5’)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__day&lt;/td&gt; &lt;td&gt;当該日で照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(created_at__day=’21’)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__isnull&lt;/td&gt; &lt;td&gt;Nullデーター照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(published_at__isnull=True)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__startswith&lt;/td&gt; &lt;td&gt;条件のテキストで始めるデーターを照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(title__startswith=’This’)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__istartswith&lt;/td&gt; &lt;td&gt;大文字や小文字を区分しなくて条件のテキストで始めるデーターを照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(title__istartswith=’this’)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__endswith&lt;/td&gt; &lt;td&gt;条件のテキストで終わるデーターを照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(title__endswith=’title’)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__iendswith&lt;/td&gt; &lt;td&gt;大文字や小文字を区分しなくて条件のテキストで終わるデーターを照会&lt;/td&gt; &lt;td&gt;Post.objects.filter(title__iendswith=’title’)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;__range&lt;/td&gt; &lt;td&gt;条件の範囲で照会(sqlのbetween)&lt;/td&gt; &lt;td&gt;Post.objects.filter(id__range=(1, 10))&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;ul&gt; &lt;li&gt;除外条件(exclude): 下記のように特定条件の除外データーを照会することたできます。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'This'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;複数の条件で照会: 下記のように複数の条件でデーターを照会することができます。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'this'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title__endswith&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'title'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'this'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__endswith&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'title'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.db.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'this'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__endswith&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'title'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'this'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__endswith&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'title'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;照会範囲: 下記のように持ってくるデーターの範囲(limit)を指定することができます。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title__contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'This'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;ソーティング&quot;&gt;ソーティング&lt;/h2&gt; &lt;p&gt;下記のように照会するデーターを昇順と降順でソーティングすることができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;昇順: Post.objects.order_by(‘created_at’)&lt;/li&gt; &lt;li&gt;降順: Post.objects.order_by(‘-created_at’)&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;シェルshell終了&quot;&gt;シェル(Shell)終了&lt;/h2&gt; &lt;p&gt;今までジャンゴ(django)のシェル(Shell)を使って簡単にジャンゴ(django)のORM(Object-Relational Mapping)について練習してみました。下記のコードでジャンゴ(django)のシェル(Shell)を終了します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでジャンゴ(django)のORM(Object-Relational Mapping)について見てみました。ORM(Object-Relational Mapping)はジャンゴ(django)以外でもたくさんのフレームワークで使ってる概念なので覚えておくといいと思います。これで私たちはジャンゴ(django)のモデル(Models)を使ってデーターを読んだり生成したり更新したり削除(CRUD - Create Read Update Delete)をすることができます。&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">概要 ジャンゴ(django)のORM(Object-Relational Mapping)を使ってデーターベースにデーターを生成(Create)して、読んで(Read)、更新(Update)して、削除(Delete)する方法(CRUD - Create Read Update Delete)について説明します。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/orm/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ジャンゴ(django)のルーティング(Routing)</title><link href="https://dev-yakuza.github.io/django/routing/" rel="alternate" type="text/html" title="ジャンゴ(django)のルーティング(Routing)"/><published>2019-05-20T00:00:00+09:00</published><updated>2019-06-03T18:42:46+09:00</updated><id>https://dev-yakuza.github.io/django/routing-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/routing/">&lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;本格的ジャンゴ(django)を使ってウェブサービスを作ってみようかと思います。ウェべサービスを作るためにはユーザーが接続するURL別ページを作ってそのページをサービスする必要があります。このブログポストではジャンゴ(django)で基本的提供してるURL管理機能を使ってウェブサービスのルーティング(Routing)を管理する方法について説明します。&lt;/p&gt; &lt;p&gt;このブログはシリーズです。下記のリンクでシリーズの他の記事を見ることができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ジャンゴ(django)のルーティング(Routing)&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/form/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のフォーム(Form)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/heroku/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;また、このブログシリーズで説明したソースコードはgithubに公開されております。下記のリンクで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_exercise&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_exercise&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;ルーティング確認&quot;&gt;ルーティング確認&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)は大きくプロジェクト(Project)単位とアプリケーション(Application)単位が存在します。ジャンゴ(django)プロジェクトはたくさんのアプリケーションを持つことができます。この意味はプロジェクト(Project)単位のルーティング(Routing)管理とアプリケーション(Application)単位のルーティング(Routing)管理が存在してることです。まず、ジャンゴ(django)のプロジェクト単位のルーティング(Routing)管理を確認するため&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/urls.py&lt;/code&gt;ファイルを確認します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.contrib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.urls&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlpatterns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'admin/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ファイルを開いたら上のような画面が見えます。以前のブログポスト(&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;)で&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:8000/admin&lt;/code&gt;のURLで管理者ページに接続しました。私たちは何も設定しなかったけど、管理者ページが見えた理由は&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/urls.py&lt;/code&gt;ファイルに上のように基本的設定がされてるからです。私たちはここに私たちが新しく作ったジャンゴ(django)のアプリケーション(Application)のルーティングファイルを登録してアプリケーション(Application)別ルーティングを管理する予定です。&lt;/p&gt; &lt;h2 id=&quot;ビュー生成&quot;&gt;ビュー生成&lt;/h2&gt; &lt;p&gt;一旦アプリケーション(Application)のルーティング(Routing)を使ってURLに連結する&lt;code class=&quot;highlighter-rouge&quot;&gt;ビュー(Views)&lt;/code&gt;を生成する必要があります。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/views.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.shortcuts&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'blog/posts.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{})&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;htmlファイル生成&quot;&gt;HTMLファイル生成&lt;/h2&gt; &lt;p&gt;ビュー(Views)ファイルが参照してる&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/posts.html&lt;/code&gt;ファイルを生成します。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/templates/blog/posts.html&lt;/code&gt;ファイルを生成して下記のようにコーディングします。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;header&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Hello World&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/header&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; Hello World &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;これでルーティング(Routing)を使ってURLに連結する画面が用意できました。今からはルーティング(Routing)を使ってURLと画面を連結する方法について説明します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;アプリケーションのルーティングファイル生成&quot;&gt;アプリケーションのルーティングファイル生成&lt;/h2&gt; &lt;p&gt;私たちが作っているブログウェブサイトに該当するジャンゴ(django)のアプリケーション(Application)のためルーティング(Routing)ファイルを作る必要があります。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/urls.py&lt;/code&gt;ファイルを生成して下記の内容を追加します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.urls&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlpatterns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'posts'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;アプリケーションのルーティング登録&quot;&gt;アプリケーションのルーティング登録&lt;/h2&gt; &lt;p&gt;上で生成したジャンゴ(django)のアプリケーション(Application)のルーティング(Routing)ファイルである&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/urls.py&lt;/code&gt;をジャンゴ(django)のプロジェクト(Project)に登録する必要があります。&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/urls.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.contrib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.urls&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &amp;lt;&amp;lt;&amp;lt; here&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlpatterns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'admin/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'blog.urls'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &amp;lt;&amp;lt;&amp;lt; here&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;確認&quot;&gt;確認&lt;/h2&gt; &lt;p&gt;下記のジャンゴ(django)のコマンドを使ってテストサーバーを起動した後、&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:8000/&lt;/code&gt;に接続して、私たちが設定したルーティング(Routing)が動いてるか確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# source venv/bin/activate&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# pip install -r requirements.txt&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# cd django_exercise&lt;/span&gt; python manage.py runserver &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ブラウザで&lt;code class=&quot;highlighter-rouge&quot;&gt;Hello World&lt;/code&gt;が表示されることが確認できます。&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでジャンゴ(django)のルーティング(Routing)について見てみました。今からはルーティング(Routing)の機能を使って自分が作った画面とURLを連結することができます。&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">概要 本格的ジャンゴ(django)を使ってウェブサービスを作ってみようかと思います。ウェべサービスを作るためにはユーザーが接続するURL別ページを作ってそのページをサービスする必要があります。このブログポストではジャンゴ(django)で基本的提供してるURL管理機能を使ってウェブサービスのルーティング(Routing)を管理する方法について説明します。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/routing/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ジャンゴ(django)の管理者ページ</title><link href="https://dev-yakuza.github.io/django/admin/" rel="alternate" type="text/html" title="ジャンゴ(django)の管理者ページ"/><published>2019-05-17T00:00:00+09:00</published><updated>2019-06-03T18:42:46+09:00</updated><id>https://dev-yakuza.github.io/django/admin-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/admin/">&lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;パイソン(python)のジャンゴ(django)でサーバーサイドを開発してみようかと思います。このブログポストではジャンゴ(django)が基本的提供してる管理者ページを使う方法について説明します。ジャンゴ(django)の管理者ページは&lt;code class=&quot;highlighter-rouge&quot;&gt;phpmyadmin&lt;/code&gt;とようにデーターベースの情報を見るページを意味します。&lt;/p&gt; &lt;p&gt;このブログはシリーズです。下記のリンクでシリーズの他の記事を見ることができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ジャンゴ(django)の管理者ページ&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/form/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のフォーム(Form)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/heroku/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;また、このブログシリーズで説明したソースコードはgithubに公開されております。下記のリンクで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_exercise&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_exercise&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;言語設定&quot;&gt;言語設定&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)が基本的提供してる管理者ページの基本言語を変更したい方は、&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/settings.py&lt;/code&gt;を開いて下記のように修正してください。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;... &lt;span class=&quot;c&quot;&gt;# LANGUAGE_CODE = 'en-us'&lt;/span&gt; LANGUAGE_CODE &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ja'&lt;/span&gt; ... &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ここには基本設定である英語をそのまま使って進めます。&lt;/p&gt; &lt;h2 id=&quot;スーパーユーザー生成&quot;&gt;スーパーユーザー生成&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)が基本的提供してる管理者ページへログインするためスーパーユーザー(superuser)を作る必要があります。下記のようにジャンゴ(django)のコマンドを使ってスーパーユーザー(superuser)を生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# source venv/bin/activate&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# pip install -r requirements.txt&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# cd django_exercise&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# python manage.py migrate&lt;/span&gt; python manage.py createsuperuser &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のコマンドを実行したら下記のようにスーパーユーザー(superuser)を登録する手続きが出ます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;venv &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ~/django_exercise/django_exercise &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; python manage.py createsuperuser Username &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;leave blank to use &lt;span class=&quot;s1&quot;&gt;'...'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: dev-yakuza Email address: dev.yakuza@gmail.com Password: Password &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;again&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: Superuser created successfully. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;手続きに合わせて自分が使うゆーパーユーザー(sueperuser)を登録します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;管理者ページ接続&quot;&gt;管理者ページ接続&lt;/h2&gt; &lt;p&gt;下記のリンクでジャンゴ(django)が基本的提供してる管理者ページに接続することができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# python manage.py runserver&lt;/span&gt; http://127.0.0.1:8000/admin &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;問題なく今まで進めたら、下記のようなページが見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/admin/login.png&quot; alt=&quot;ジャンゴ(django)管理者ページ - ログイン&quot; /&gt;&lt;/p&gt; &lt;p&gt;上で生成したスーパーユーザー(superuser)の情報を入力してログインすると下記のようなページが見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/admin/main.png&quot; alt=&quot;ジャンゴ(django)の管理者ページ - メインページ&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;管理者ページへモデルmodels登録&quot;&gt;管理者ページへモデル(Models)登録&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)が基本的提供してる管理者ページで私たちが作ったジャンゴ(django)アプリケーションのモデル(Models)を管理するためジャンゴ(django)アプリケーションのモデル(Models)を登録する必要があります。&lt;code class=&quot;highlighter-rouge&quot;&gt;blog/admin.py&lt;/code&gt;ファイルを開いて下記のように私たちが作った&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;モデルを登録します。ジャンゴ(django)のモデル(Models)の生成については以前のブログを参考してください。(&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;)&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.contrib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして管理者ページをリフレッシュすると下記のように私たちが作ったジャンゴ(django)のアプリケーションのモデル(Models)が画面に表示されることが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/admin/main-with-models.png&quot; alt=&quot;ジャンゴ(django)管理者ページ - 管理者ページへモデル(models)表示&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;管理者ページでブログの記事を作成&quot;&gt;管理者ページでブログの記事を作成&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)が基本的提供してる管理者ページを使って私たちが作るブログサイトに記事を作成してみましょう。下記のように管理者メインページで&lt;code class=&quot;highlighter-rouge&quot;&gt;BLOG&lt;/code&gt;の下の&lt;code class=&quot;highlighter-rouge&quot;&gt;Posts&lt;/code&gt;の横の&lt;code class=&quot;highlighter-rouge&quot;&gt;Add&lt;/code&gt;を押します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/admin/main-with-models.png&quot; alt=&quot;ジャンゴ(django)管理者ページデーター登録 - 管理者ページへモデル(models)選択&quot; /&gt;&lt;/p&gt; &lt;p&gt;下記のようにテスト用データーを作成します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/admin/add-test-data.png&quot; alt=&quot;ジャンゴ(django)管理者ページデーター登録 - テスト用データー登録&quot; /&gt;&lt;/p&gt; &lt;p&gt;そして下にある&lt;code class=&quot;highlighter-rouge&quot;&gt;Save and add another&lt;/code&gt;を押して、追加的にテストデーターをもっと入れます。今回はテストのため&lt;code class=&quot;highlighter-rouge&quot;&gt;published_at&lt;/code&gt;も入れて保存します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/admin/add-test-data-with-published.png&quot; alt=&quot;ジャンゴ(django)管理者ページデーター登録 - テスト用データー登録&quot; /&gt;&lt;/p&gt; &lt;p&gt;今回は&lt;code class=&quot;highlighter-rouge&quot;&gt;Save&lt;/code&gt;を押して保存して、保存データーリスト画面に移動します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/admin/data-list.png&quot; alt=&quot;ジャンゴ(django)管理者ページデーター登録 - テスト用データーリスト&quot; /&gt;&lt;/p&gt; &lt;p&gt;上のようにデーターが上手く保存されたことが出来ます。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;確認&quot;&gt;確認&lt;/h2&gt; &lt;p&gt;データーが本当に保存されたか確認するためデーターベースツールを使って直接データーベース中を確認してみましょう。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/admin/data-in-database.png&quot; alt=&quot;ジャンゴ(django)管理者ページデーター登録 - データーベースツールを使ってデーター確認&quot; /&gt;&lt;/p&gt; &lt;p&gt;上でジャンゴ(django)が基本的に提供してる管理者ページで登録したデーターがデーターベースへ上手く保存されたことが確認出来ます。&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでジャンゴ(django)が基本的に提供する管理者ページを使う方法について見てみました。さらに、以前ブログで生成したジャンゴ(django)のモデル(Models)を管理者画面に表示する方法も一緒に見ました。これでデーターベースツールがなくても簡単にデーターを作ることが出来ます。&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">概要 パイソン(python)のジャンゴ(django)でサーバーサイドを開発してみようかと思います。このブログポストではジャンゴ(django)が基本的提供してる管理者ページを使う方法について説明します。ジャンゴ(django)の管理者ページはphpmyadminとようにデーターベースの情報を見るページを意味します。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/admin/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ジャンゴ(django)のモデル(models)の使い方</title><link href="https://dev-yakuza.github.io/django/models/" rel="alternate" type="text/html" title="ジャンゴ(django)のモデル(models)の使い方"/><published>2019-05-14T00:00:00+09:00</published><updated>2019-06-03T18:42:46+09:00</updated><id>https://dev-yakuza.github.io/django/models-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/models/">&lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;パイソン(python)のジャンゴ(django)でサーバサイドを開発してみようかと思います。このブログポストではジャンゴ(django)のコマンドで新しアプリケーションを生成して、そのアプリケーションで使えるデーターを保存するため、モデル(models)を生成して使う方法について説明します。&lt;/p&gt; &lt;p&gt;このブログはシリーズです。下記のリンクでシリーズの他の記事を見ることができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/start/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のプロジェクト開始&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/form/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のフォーム(Form)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/heroku/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;また、このブログシリーズで説明したソースコードはgithubに公開されております。下記のリンクで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_exercise&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_exercise&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;ジャンゴdjangoアプリケーション生成&quot;&gt;ジャンゴ(django)アプリケーション生成&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)は大きくプロジェクトの単位があってその中に小さくアプリケーションが存在します。一つのプロジェクトに複数のアプリケーションが存在する場合もあります。ここにはジャンゴ(django)でブログを開発することを想定して進めてみます。じゃ、本格的ジャンゴ(django)で開発するため下記のようにジャンゴ(django)コマンドで&lt;code class=&quot;highlighter-rouge&quot;&gt;blog&lt;/code&gt;アプリケーションを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# virtualenv venv&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# source venv/bin/activate&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# pip install -r requirements.txt&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# django-admin --version&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 2.2&lt;/span&gt; python manage.py startapp blog &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ジャンゴ(django)のアプリケーションが上手く生成されたら下記のようなフォルダ構造が確認できますが生成されたことが確認できます。&lt;/p&gt; &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;|-- django_exercise | |-- __init__.py | |-- settings.py | |-- urls.py | |-- wsgi.py |-- blog | |-- __init__.py | |-- admin.py | |-- apps.py | |-- models.py | |-- tests.py | |-- views.py |-- manage.py &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;新しく生成されたアプリケーションのファイルは下記のような役割をします。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;admin.py&lt;/code&gt;: ジャンゴ(django)で基本的に提供する管理画面の設定&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apps.py&lt;/code&gt;: アプリケーションのメインファイル&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;models.py&lt;/code&gt;: アプリケーションのモデル(models)ファイル&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;tests.py&lt;/code&gt;: テストファイル&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;views.py&lt;/code&gt;: アプリケーションのビュー(views)ファイル&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;このファイル以外にも下記のようにジャンゴ(django)でつかてるファイルがあります。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urls.py&lt;/code&gt;: アプリケーションのurl管理&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;forms.py&lt;/code&gt;: 入力フォーム管理&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;behaviors.py&lt;/code&gt;: モデルミックスイン位置に関するオプション&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;constants.py&lt;/code&gt;: アプリケーション定数管理&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;decorators.py&lt;/code&gt;: デコレーター管理&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;factories.py&lt;/code&gt;: テストデーターファクトリーファイル&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helpers.py&lt;/code&gt;: ビュー(views)とモデル(models)をサーポートするファンクション管理&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;managers.py&lt;/code&gt;: カスタムモデルマネージャーファイル&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;signals.py&lt;/code&gt;: カスタムシグナル管理&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;viewmixins.py&lt;/code&gt;: ビュー(views)ミックスイン管理&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;何を言ってるかさっぱりわかりません。後で一つ一つ勉強したら自然に分かるようになると思うのでこのようなファイルがあることだけ覚えて進めたらいいと思います。&lt;/p&gt; &lt;p&gt;ジャンゴ(django)アプリケーションを生成したので、ジャンゴ(django)のプロジェクトで新しく生成したアプリケーションを登録します。ジャンゴ(django)のプロジェクトを管理する&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/settings.py&lt;/code&gt;を開いて下記のようにジャンゴ(django)のアプリケーションを登録します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'django.contrib.admin'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'django.contrib.auth'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'django.contrib.contenttypes'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'django.contrib.sessions'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'django.contrib.messages'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'django.contrib.staticfiles'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'blog'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;モデルmodelsを生成する&quot;&gt;モデル(models)を生成する&lt;/h2&gt; &lt;p&gt;これからブログサイトを開発するため必要なモデルを(models)を生成します。 &lt;code class=&quot;highlighter-rouge&quot;&gt;blog/models.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.db&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.utils&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;author&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'auth.User'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;on_delete&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CASCADE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CharField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TextField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;created_at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTimeField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;auto_now_add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updated_at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTimeField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;auto_now&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;published_at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTimeField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blank&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;published_at&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__str__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;作成したコートを詳しくみてみましょう。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Post&lt;/code&gt;は&lt;code class=&quot;highlighter-rouge&quot;&gt;author, title, content, created_at, updated_at, published_at&lt;/code&gt;のフィールドを持っています。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;author&lt;/code&gt;は&lt;code class=&quot;highlighter-rouge&quot;&gt;ForeignKey&lt;/code&gt;ファンクションを使って、ジャンゴ(django)が基本的提供してる&lt;code class=&quot;highlighter-rouge&quot;&gt;auth&lt;/code&gt;アプリケーションの&lt;code class=&quot;highlighter-rouge&quot;&gt;User&lt;/code&gt;モデルを参照するように作りました。(&lt;code class=&quot;highlighter-rouge&quot;&gt;auth.User&lt;/code&gt;: アプリ名.モデル)&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;title&lt;/code&gt;はブログのタイトルで&lt;code class=&quot;highlighter-rouge&quot;&gt;CharField&lt;/code&gt;ファンクションを使って長さが固定であるテキストタイプを保存するようにしました。&lt;code class=&quot;highlighter-rouge&quot;&gt;max_length&lt;/code&gt;を使って長さが100であるテキストタイプを保存するようにしました。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt;はブログの内容で&lt;code class=&quot;highlighter-rouge&quot;&gt;TextField&lt;/code&gt;ファンクションを使って長さが固定じゃないテキストタイプを保存するようにしました。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;created_at&lt;/code&gt;はブログを生成した日付で&lt;code class=&quot;highlighter-rouge&quot;&gt;DateTimeField&lt;/code&gt;を使って日付と時間を保存するようにしました。&lt;code class=&quot;highlighter-rouge&quot;&gt;auto_now_add&lt;/code&gt;のオプションを使ってデーターが生成される時、その日付を保存するようにしました。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;updated_at&lt;/code&gt;はブログの修正日で&lt;code class=&quot;highlighter-rouge&quot;&gt;DateTimeField&lt;/code&gt;を使って日付と時間を保存するようにしました。&lt;code class=&quot;highlighter-rouge&quot;&gt;auto_now&lt;/code&gt;のオプションを使ってデーターが更新される時現在の時間を保存するようにしました。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;published_at&lt;/code&gt;はブログを公開した日付で&lt;code class=&quot;highlighter-rouge&quot;&gt;DateTimeField&lt;/code&gt;を使って日付と時間を保存するようにしました。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;上で説明してない&lt;code class=&quot;highlighter-rouge&quot;&gt;blank = True, null = True&lt;/code&gt;は別で説明します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;blank&lt;/code&gt;: バリデーション(validation)の処理は関係あるオプションで、&lt;code class=&quot;highlighter-rouge&quot;&gt;form.is_valid()&lt;/code&gt;を使って入力フォームをバリデーションチェックする時使えます。データーの空欄(&lt;code class=&quot;highlighter-rouge&quot;&gt;blank&lt;/code&gt;)を許容します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;null&lt;/code&gt;: データーベースと関係あるオプションで、データーベースの&lt;code class=&quot;highlighter-rouge&quot;&gt;null&lt;/code&gt;を保存できるオプションです。(&lt;code class=&quot;highlighter-rouge&quot;&gt;nullable&lt;/code&gt;)&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;このモデルは&lt;code class=&quot;highlighter-rouge&quot;&gt;publish, __str__&lt;/code&gt;のファンクションを持っています。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;publish&lt;/code&gt;: ブログサービスでよく使える機能である公開(&lt;code class=&quot;highlighter-rouge&quot;&gt;publish&lt;/code&gt;)機能をファンクションで作りました。このファンクションを使ってブログを公開する時(publish)、日付を更新するため作りました。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;__str__&lt;/code&gt;: 標準パイソンクラースメソッドで人が読めるテキストをリターンするようにしました。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;モデルmodelsを使ってテーブル生成&quot;&gt;モデル(models)を使ってテーブル生成&lt;/h2&gt; &lt;p&gt;今まで作ったモデル(models)を使ってデーターベース(database)のテーブルを生成する方法について説明します。&lt;/p&gt; &lt;h3 id=&quot;マイグレーションファイル生成&quot;&gt;マイグレーションファイル生成&lt;/h3&gt; &lt;p&gt;まず、下記のジャンゴ(django)のコマンドで私たちが作ったモデル(models)からデーターベース(database)のテーブルを生成するためのマイグレーション(migration)ファイルを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python manage.py makemigrations blog &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;コマンドが実行されたら下記のような結果が見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/models/makemigrations.png&quot; alt=&quot;ジャンゴ(django)のモデル(models)からマイグレーション生成&quot; /&gt;&lt;/p&gt; &lt;p&gt;そしてフォルダを確認したらマイグレーションフォルダが生成されたことが確認できます。&lt;/p&gt; &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;|-- django_exercise | |-- __init__.py | |-- settings.py | |-- urls.py | |-- wsgi.py |-- blog | |-- migrations | | |-- __init__.py | | |-- 0001_initial.py.py | |-- __init__.py | |-- admin.py | |-- apps.py | |-- models.py | |-- tests.py | |-- views.py |-- manage.py &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;テーブル生成&quot;&gt;テーブル生成&lt;/h3&gt; &lt;p&gt;下記のジャンゴ(django)のコマンドでモデル(models)から生成したマイグレーション(migration)ファイルを使ってデーターベースのテーブルを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python manage.py migrate blog &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;コマンドが実行されたら下記のような結果が見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/models/migrate.png&quot; alt=&quot;ジャンゴ(django)のモデル(models)から生成したマイグレーションファイルを生成してデーターベーステーブル生成&quot; /&gt;&lt;/p&gt; &lt;p&gt;データーベースツールを使ってデーターベースを見たら私たちが作ったモデル(models)に設定した内容からがテーブルが生成されたことが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/models/database-table.png&quot; alt=&quot;マイグレーションファイルを生成してテーブル確認&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでジャンゴ(django)でモデル(models)を生成して生成したモデル(models)を使ってDBテーブルを生成する方法について見てみました。これで開発に必要なデーターを保存するようになりました。じゃ、サービスに必要なDBを設計してそれによるモデル(models)とマイグレーション(migration)を生成してDBテーブルを作ってみましょう！&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">概要 パイソン(python)のジャンゴ(django)でサーバサイドを開発してみようかと思います。このブログポストではジャンゴ(django)のコマンドで新しアプリケーションを生成して、そのアプリケーションで使えるデーターを保存するため、モデル(models)を生成して使う方法について説明します。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/models/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ジャンゴ(django)のプロジェクト開始</title><link href="https://dev-yakuza.github.io/django/start/" rel="alternate" type="text/html" title="ジャンゴ(django)のプロジェクト開始"/><published>2019-04-24T00:00:00+09:00</published><updated>2019-06-03T18:42:46+09:00</updated><id>https://dev-yakuza.github.io/django/start-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/start/">&lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;パイソン(python)のジャンゴ(django)でサーバーサイドを開発してみようかと思います。このブログポストではジャンゴ(django)のコマンドでジャンゴ(django)プロジェクトを生成して開始する方法について説明します。&lt;/p&gt; &lt;p&gt;このブログはシリーズです。下記のリンクでシリーズの他の記事を見ることができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ジャンゴ(django)のプロジェクト開始&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/models/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のモデル(models)の使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/admin/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)の管理者ページ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/routing/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のルーティング(Routing)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/orm/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のORM&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/view/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のビュー(View)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/form/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)のフォーム(Form)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/heroku/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)プロジェクトをヘロク(Heroku)へアップロードする&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;また、このブログシリーズで説明したソースコードはgithubに公開されております。下記のリンクで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github: &lt;a href=&quot;https://github.com/dev-yakuza/django_exercise&quot; target=&quot;_blank&quot;&gt;https://github.com/dev-yakuza/django_exercise&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;ジャンゴdjangoプロジェクト&quot;&gt;ジャンゴ(django)プロジェクト&lt;/h2&gt; &lt;p&gt;下記のコマンドでパイソン(python)の仮想環境(Virtual Environment)を実行してジャンゴ(django)が上手くインストールされたか確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;source &lt;/span&gt;venv/bin/activate django-admin &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 2.2&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;パイソン(python)の仮想環境(Virtual Environment)の設定やジャンゴ(django)のインストールについては以前のブログを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/django/installation/&quot; target=&quot;_blank&quot;&gt;ジャンゴ(django)インストール&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;下記のコマンドでジャンゴ(django)プロジェクトを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;django-admin startproject django_exercise &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;基本フォルダ構造&quot;&gt;基本フォルダ構造&lt;/h2&gt; &lt;p&gt;ジャンゴ(django)のコマンドでプロジェクトを生成したら下記のようなフォルダが生成されることが確認できます。&lt;/p&gt; &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;|-- django_exercise | |-- __init__.py | |-- settings.py | |-- urls.py | |-- wsgi.py |-- manage.py &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;各ファイルは下記のような機能を担当しています。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/settings.py&lt;/code&gt;: 全般的な設定を持ってるファイル&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/urls.py&lt;/code&gt;: プロジェクトのurlを管理するファイル&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/wsgi.py&lt;/code&gt;: ウェブサーバー(apache, nginxなど)と連動するためのファイル&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;manage.py&lt;/code&gt;: プロジェクト管理。例えば、DBのマイグレーション(migration)生成や実行、ローカルで他のインストールしてない状態でウェブサーバー起動など&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;設定&quot;&gt;設定&lt;/h2&gt; &lt;p&gt;設定ファイルである&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/settings.py&lt;/code&gt;を開いて下記のようにタイムゾーンを設定します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIME_ZONE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Asia/Tokyo'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;USE_TZ&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上の設定で&lt;code class=&quot;highlighter-rouge&quot;&gt;USE_TZ&lt;/code&gt;のオプションが&lt;code class=&quot;highlighter-rouge&quot;&gt;True&lt;/code&gt;の場合、templatesとformsのみで上で設定したタイムゾーンを使えます。&lt;code class=&quot;highlighter-rouge&quot;&gt;False&lt;/code&gt;の場合、modelsでもタイムゾーンが使えますので全てのところで設定したタイムゾーンが使えます。&lt;/p&gt; &lt;p&gt;また、staticファイルを使うため下記のように&lt;code class=&quot;highlighter-rouge&quot;&gt;STATIC_ROOT&lt;/code&gt;を追加します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;STATIC_URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'/static/'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;STATIC_ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BASE_DIR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'static'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;最後は、プロジェクトを本番サーバーにデプロイする場合、下記のように&lt;code class=&quot;highlighter-rouge&quot;&gt;DEBUG&lt;/code&gt;設定を&lt;code class=&quot;highlighter-rouge&quot;&gt;False&lt;/code&gt;で変更してデプロイしてください。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DEBUG&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;db設定&quot;&gt;DB設定&lt;/h2&gt; &lt;p&gt;ここではジャンゴ(django)とmysqlを連動する方法について説明します。マック(Mac)にmysqlをインストールする方法については下記のリンクを確認してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/environment/mac-development-environment/&quot; target=&quot;_blank&quot;&gt;マック(Mac)の開発環境の構築(3) - 開発環境&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ジャンゴ(django)の設定ファイルである&lt;code class=&quot;highlighter-rouge&quot;&gt;django_exercise/settings.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DATABASES&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'default'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'ENGINE'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'django.db.backends.mysql'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'NAME'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'...'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# DB name&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'USER'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'root'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# DB account&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'PASSWORD'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'...'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# DB account's password&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'HOST'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'127.0.0.1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# DB address(IP)&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'PORT'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'3306'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# DB port(normally 3306)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上の内容で&lt;code class=&quot;highlighter-rouge&quot;&gt;NAME&lt;/code&gt;と&lt;code class=&quot;highlighter-rouge&quot;&gt;PASSWORD&lt;/code&gt;を開発環境に合わせて修正して使ってください。 下記のコマンドでmysqlとの連携に必要なモジュールである&lt;code class=&quot;highlighter-rouge&quot;&gt;mysqlclient&lt;/code&gt;をインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install mysqlclient &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;もしインストールする時下記のようなエラーメッセージが出たら、&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;... ld: library not found &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-lssl&lt;/span&gt; clang: error: linker &lt;span class=&quot;nb&quot;&gt;command &lt;/span&gt;failed with &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;code 1 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; to see invocation&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; error: &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'clang'&lt;/span&gt; failed with &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;status 1 ... &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドで&lt;code class=&quot;highlighter-rouge&quot;&gt;mysqlclient&lt;/code&gt;をインストールしてください。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;LDFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt;/usr/local/opt/openssl/lib pip install mysqlclient &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;モジュールのインストールが完了したら他の環境でも使えるように下記のコマンドで&lt;code class=&quot;highlighter-rouge&quot;&gt;requirements.txt&lt;/code&gt;ファイルを更新します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd django_excercise&lt;/span&gt; pip freeze &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; requirements.txt &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Databaseが上手く連動したか確認するためジャンゴ(django)が基本的に提供してる管理画面で必要なテーブルを下記のコマンドを使って生成してみます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python manage.py migrate &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ジャンゴ(django)とmysql連動を上手く実行したら下記のような画面が見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/start/success-migration.png&quot; alt=&quot;ジャンゴ(django)とmysql連動やmigration実行&quot; /&gt;&lt;/p&gt; &lt;p&gt;databaseツールを使って確認したら下記のようにテーブルが生成されたことが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/start/tables-in-database.png&quot; alt=&quot;databaseツールを使ってジャンゴ(django)とmysql連動やmigration実行確認&quot; /&gt;&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;テスト&quot;&gt;テスト&lt;/h2&gt; &lt;p&gt;いアマまでジャンゴ(django)の設定についてみてみました。下記のコマンドでジャンゴ(django)で提供してるテストウェブサーバーを起動して私たちが作ったプロジェクトが上手く実装されるか確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python manage.py runserver &lt;span class=&quot;c&quot;&gt;# http://127.0.0.1:8000/&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ジャンゴ(django)のいんんストールと設定が無事に終ったら下記のようにジャンゴ(django)が基本的提供する基本画面が見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2019/start/basic-django-screen.png&quot; alt=&quot;ジャンゴ(django)のインストールや設定を使ってプロジェクト開始&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでジャンゴ(django)のコマンドを使ってプロジェクトを生成して開始する方法についてみてみました。簡単にプロジェクトのフォルダ構造の説明や設定についてもみてみました。また、今後使うmysqlとの連動やローカルでテストするためジャンゴ(django)が基本的提供してるウェブサーバーを使ってプロジェクトを実行してみました。&lt;/p&gt; &lt;p&gt;じゃ、開発する準備ができました。ジャンゴ(django)を使って開発を始めて見ましょう！&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html">概要 パイソン(python)のジャンゴ(django)でサーバーサイドを開発してみようかと思います。このブログポストではジャンゴ(django)のコマンドでジャンゴ(django)プロジェクトを生成して開始する方法について説明します。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2019/start/background.jpg"/></entry></feed>