<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="google-site-verification" content="rHTd8BRbOeSqAskkyVusn529XiwZ2eHbv1tnB1IDnjA"/><link rel="apple-touch-icon" sizes="57x57" href="/assets/favicon/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/assets/favicon/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/assets/favicon/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/assets/favicon/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/assets/favicon/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/assets/favicon/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/assets/favicon/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/assets/favicon/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png"/><link rel="manifest" href="/assets/favicon/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/assets/favicon/ms-icon-144x144.png"/><meta name="theme-color" content="#ffffff"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="dev-yakuza blog"/><link rel="apple-touch-icon" href="/assets/favicon/android-icon-144x144.png"/><meta name="twitter:title" content="Fastlaneを使ってアプリのデプロイを自動化する"/><meta name="twitter:description" content="Fastlaneを使ってReact nativeで作ったアプリをを自動でデプロイしてみましょう。"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@DevYakuza"/><meta name="twitter:creator" content="@DevYakuza"/><title>Fastlaneを使ってアプリのデプロイを自動化する - Fastlaneを使ってReact nativeで作ったアプリをを自動でデプロイしてみましょう。</title><meta name="description" content="Fastlaneを使ってReact nativeで作ったアプリをを自動でデプロイしてみましょう。"/><meta http-equiv="Content-Language" content="ja"><link rel="alternate" hreflang="ja" href="https://dev-yakuza.posstree.com/react-native/fastlane/"/><link rel="alternate" hreflang="ko" href="https://dev-yakuza.posstree.com/ko/react-native/fastlane/"/><link rel="alternate" hreflang="en" href="https://dev-yakuza.posstree.com/en/react-native/fastlane/"/><meta property="og:url" content="https://dev-yakuza.posstree.com/react-native/fastlane/"/><meta name="generator" content="Jekyll v3.9.0"/><meta property="og:title" content="Fastlaneを使ってアプリのデプロイを自動化する"/><meta name="author" content="dev.yakuza@gmail.com"/><meta property="og:locale" content="ja"/><meta name="description" content="Fastlaneを使ってReact nativeで作ったアプリをを自動でデプロイしてみましょう。"/><meta property="og:description" content="Fastlaneを使ってReact nativeで作ったアプリをを自動でデプロイしてみましょう。"/><link rel="canonical" href="https://dev-yakuza.posstree.com/react-native/fastlane/"/><meta property="og:url" content="https://dev-yakuza.posstree.com/react-native/fastlane/"/><meta property="og:site_name" content="dev-yakuza"/><meta property="og:image" content="https://dev-yakuza.posstree.com/assets/images/category/react-native/2020/fastlane/background.jpg"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2020-01-18T00:00:00+09:00"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="https://dev-yakuza.posstree.com/assets/images/category/react-native/2020/fastlane/background.jpg"/><meta property="twitter:title" content="Fastlaneを使ってアプリのデプロイを自動化する"/><script type="application/ld+json">
{"url":"https://dev-yakuza.posstree.com/react-native/fastlane/","image":"https://dev-yakuza.posstree.com/assets/images/category/react-native/2020/fastlane/background.jpg","headline":"Fastlaneを使ってアプリのデプロイを自動化する","dateModified":"2020-12-16T11:10:57+09:00","datePublished":"2020-01-18T00:00:00+09:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://dev-yakuza.posstree.com/assets/images/icon.jpg"},"name":"dev.yakuza@gmail.com"},"author":{"@type":"Person","name":"dev.yakuza@gmail.com"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dev-yakuza.posstree.com/react-native/fastlane/"},"description":"Fastlaneを使ってReact nativeで作ったアプリをを自動でデプロイしてみましょう。","@type":"BlogPosting","@context":"https://schema.org"}</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125408913-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-125408913-1");</script><link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP" rel="stylesheet"/><link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css"/><link rel="stylesheet" href="/assets/vendor/font-awesome/css/font-awesome.min.css"/><link rel="stylesheet" href="/assets/main.css?v=20210428"/><link rel="alternate" type="application/rss+xml" title="dev-yakuza" href="/feed.xml"/><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "dev.yakuza",
      "url": "https://dev-yakuza.posstree.com/",
      "sameAs": [
        "https://www.facebook.com/yakuza.dev.54",
        "https://www.instagram.com/dev_yakuza/",
        "https://twitter.com/DevYakuza"
      ]
    }
  </script><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://dev-yakuza.posstree.com/",
      "logo": "https://dev-yakuza.posstree.com/assets/images/icon.jpg"
    }
  </script><script type="application/ld+json">
    {
      "@context":"http://schema.org",
      "@type":"ItemList",
      "itemListElement":[{
          "@type":"ListItem",
          "name": "マック(Mac)にreact nativeの開発環境を構築する方法",
          "description" : "react-nativeでアプリを開発するためマック(Mac)に開発環境を構築して見て、react-nativeのプロジェクトがうまく起動できるか確認して見ます。",
          "position":1,"url": "https://dev-yakuza.posstree.com/react-native/install-on-mac/",
          "item": "https://dev-yakuza.posstree.com/react-native/install-on-mac/"},{
          "@type":"ListItem",
          "name": "ウィンドウ(Windows)にreact nativeの開発環境を構築する方法",
          "description" : "react-nativeでアプリを開発するためウィンドウ(Windows)に開発環境を構築して見て、react-nativeのプロジェクトがうまく起動できるか確認して見ます。",
          "position":2,"url": "https://dev-yakuza.posstree.com/react-native/install-on-windows/",
          "item": "https://dev-yakuza.posstree.com/react-native/install-on-windows/"},{
          "@type":"ListItem",
          "name": "リアクトネイティブ(RN)インストール",
          "description" : "react-nativeをインストールしてプロジェクトが起動するか確認しましょう。",
          "position":3,"url": "https://dev-yakuza.posstree.com/react-native/installation/",
          "item": "https://dev-yakuza.posstree.com/react-native/installation/"},{
          "@type":"ListItem",
          "name": "typescript",
          "description" : "RNプロジェクトへtypescriptを適用して開発してみよう。",
          "position":4,"url": "https://dev-yakuza.posstree.com/react-native/typescript/",
          "item": "https://dev-yakuza.posstree.com/react-native/typescript/"},{
          "@type":"ListItem",
          "name": "React NativeでESLint, Prettierを使う方法",
          "description" : "React NativeのプロジェクトへESLintとPrettierを適用する方法と、Husky, lint-stagedでプロみたいに使う方法について説明します。",
          "position":5,"url": "https://dev-yakuza.posstree.com/react-native/eslint-prettier-husky-lint-staged/",
          "item": "https://dev-yakuza.posstree.com/react-native/eslint-prettier-husky-lint-staged/"},{
          "@type":"ListItem",
          "name": "styled-components",
          "description" : "react-nativeスタイリングのためstyled-componentsライブラリを活用する方法について説明します。",
          "position":6,"url": "https://dev-yakuza.posstree.com/react-native/styled-components/",
          "item": "https://dev-yakuza.posstree.com/react-native/styled-components/"},{
          "@type":"ListItem",
          "name": "react-navigation",
          "description" : "react-navigationを使ってアプリを開発して見ましょう。",
          "position":7,"url": "https://dev-yakuza.posstree.com/react-native/react-navigation/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-navigation/"},{
          "@type":"ListItem",
          "name": "react-navigation V5",
          "description" : "react-navigation V5をインストールして使う方法について共有します。",
          "position":8,"url": "https://dev-yakuza.posstree.com/react-native/react-navigation-v5/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-navigation-v5/"},{
          "@type":"ListItem",
          "name": "App icon",
          "description" : "generator-rn-toolboxを使ってアプリアイコンを作って見ましょう。",
          "position":9,"url": "https://dev-yakuza.posstree.com/react-native/app-icon/",
          "item": "https://dev-yakuza.posstree.com/react-native/app-icon/"},{
          "@type":"ListItem",
          "name": "Splashイメージ",
          "description" : "generator-rn-toolboxを使ってSplashイメージを設定して見ましょう。",
          "position":10,"url": "https://dev-yakuza.posstree.com/react-native/splash-image/",
          "item": "https://dev-yakuza.posstree.com/react-native/splash-image/"},{
          "@type":"ListItem",
          "name": "NativeBase",
          "description" : "基本Component UIでNativeBaseライブラリを使って見ましょう。",
          "position":11,"url": "https://dev-yakuza.posstree.com/react-native/nativebase/",
          "item": "https://dev-yakuza.posstree.com/react-native/nativebase/"},{
          "@type":"ListItem",
          "name": "react-native-vector-icons",
          "description" : "react-native-vector-iconsライブラリを使ってアイコンを表示して見ましょう。",
          "position":12,"url": "https://dev-yakuza.posstree.com/react-native/react-native-vector-icons/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-vector-icons/"},{
          "@type":"ListItem",
          "name": "react-native-device-info",
          "description" : "ユーザーのデバイスの情報を取得するためreact-native-device-infoライブラリを使って見ましょう。",
          "position":13,"url": "https://dev-yakuza.posstree.com/react-native/react-native-device-info/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-device-info/"},{
          "@type":"ListItem",
          "name": "react-native-tts",
          "description" : "react-native-ttsを使ってtext-to-speech機能を作って見ましょう。",
          "position":14,"url": "https://dev-yakuza.posstree.com/react-native/react-native-tts/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-tts/"},{
          "@type":"ListItem",
          "name": "グーグルアドモブ",
          "description" : "グーグルアドモブ(google admob)広告を使うためreact-native-admobライブラリを使ってみましょう。",
          "position":15,"url": "https://dev-yakuza.posstree.com/react-native/react-native-admob/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-admob/"},{
          "@type":"ListItem",
          "name": "iOSデバイステスト",
          "description" : "リアクトネイティブ(React Native)で開発したプロジェクトをiOSデバイスでテストしてみましょう。",
          "position":16,"url": "https://dev-yakuza.posstree.com/react-native/ios-test-on-device/",
          "item": "https://dev-yakuza.posstree.com/react-native/ios-test-on-device/"},{
          "@type":"ListItem",
          "name": "iOSビルドやテスト",
          "description" : "リアクトネイティブ(React Native)で開発したプロジェクトをiOS用でビルドしてデバイスでテストしてみましょう。",
          "position":17,"url": "https://dev-yakuza.posstree.com/react-native/ios-running-on-device/",
          "item": "https://dev-yakuza.posstree.com/react-native/ios-running-on-device/"},{
          "@type":"ListItem",
          "name": "iOS開発者登録",
          "description" : "リアクトネイティブ(React Native)で開発したプロジェクトをiOSアップストア(App store)へ登録するためアップル開発者プログラム(Apple Developer Program)へ登録する方法について説明します。",
          "position":18,"url": "https://dev-yakuza.posstree.com/react-native/ios-enroll-developer-program/",
          "item": "https://dev-yakuza.posstree.com/react-native/ios-enroll-developer-program/"},{
          "@type":"ListItem",
          "name": "iOS 証明書(Certification)",
          "description" : "アップル開発者プログラム(Apple Developer Program)の登録を完了したら、開発者証明書(Certification)を設定する方法について説明します。",
          "position":19,"url": "https://dev-yakuza.posstree.com/react-native/ios-certification/",
          "item": "https://dev-yakuza.posstree.com/react-native/ios-certification/"},{
          "@type":"ListItem",
          "name": "iOS TestFlight",
          "description" : "iOSのTestFlightを使って作ったアプリをテスターに送ってテストしてみましょう。",
          "position":20,"url": "https://dev-yakuza.posstree.com/react-native/ios-testflight/",
          "item": "https://dev-yakuza.posstree.com/react-native/ios-testflight/"},{
          "@type":"ListItem",
          "name": "iOS App store 登録",
          "description" : "iOSアプリストア(App Store)へ登録するため必要な項目について説明します。",
          "position":21,"url": "https://dev-yakuza.posstree.com/react-native/ios-app-store/",
          "item": "https://dev-yakuza.posstree.com/react-native/ios-app-store/"},{
          "@type":"ListItem",
          "name": "Google Analytics",
          "description" : "リアクトネイティブ(React Native)で開発したアプリをグーグルアナリティクス(Google Analytics)を使ってアプリを分析してみましょう。",
          "position":22,"url": "https://dev-yakuza.posstree.com/react-native/react-native-analytics-bridge/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-analytics-bridge/"},{
          "@type":"ListItem",
          "name": "Firebase Admob",
          "description" : "react-native-firebaseライブラリを使ってグーグルアドモブ(Google Admob)を表示してみましょう。",
          "position":23,"url": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-admob/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-admob/"},{
          "@type":"ListItem",
          "name": "アンドロイドデバイステスト",
          "description" : "リアクトネイティブ(React Native)で開発したプロジェクトをアンドロイド(Android)デバイスでテストしてみましょう。",
          "position":24,"url": "https://dev-yakuza.posstree.com/react-native/android-test-on-device/",
          "item": "https://dev-yakuza.posstree.com/react-native/android-test-on-device/"},{
          "@type":"ListItem",
          "name": "アンドロイドビルドやテスト",
          "description" : "リアクトネイティブ(React Native)で開発したプロジェクトをアンドロイド(Android)用でビルドしてデバイスでテストしてみましょう。",
          "position":25,"url": "https://dev-yakuza.posstree.com/react-native/android-running-on-device/",
          "item": "https://dev-yakuza.posstree.com/react-native/android-running-on-device/"},{
          "@type":"ListItem",
          "name": "iOSシミュレータ変更",
          "description" : "リアクトネイティブ(React Native)をiOSでシミュレータでテストする時シミュレータを変更する方法を紹介します。",
          "position":26,"url": "https://dev-yakuza.posstree.com/react-native/ios-change-simulator/",
          "item": "https://dev-yakuza.posstree.com/react-native/ios-change-simulator/"},{
          "@type":"ListItem",
          "name": "Firebase Analytics",
          "description" : "react-native-firebaseライブラリを使ってもっと詳しくアプリを分析してみましょう。",
          "position":27,"url": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-analytics/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-analytics/"},{
          "@type":"ListItem",
          "name": "iOS App crash分析",
          "description" : "iOS App crashログ(Log)を分析する方法について説明します。",
          "position":28,"url": "https://dev-yakuza.posstree.com/react-native/ios-app-crash-debugging/",
          "item": "https://dev-yakuza.posstree.com/react-native/ios-app-crash-debugging/"},{
          "@type":"ListItem",
          "name": "Firebase Crashlytics",
          "description" : "react-native-firebaseを使ってファイアベース(Firebase)のCrashlyticsでアプリのCrashが発生したらその情報を取得してみましょう。",
          "position":29,"url": "https://dev-yakuza.posstree.com/react-native/firebase-crashlytics/",
          "item": "https://dev-yakuza.posstree.com/react-native/firebase-crashlytics/"},{
          "@type":"ListItem",
          "name": "react-native-animatable",
          "description" : "react-native-animatableを使って簡単にリアクトネイティブ(React Native)へアニメーションを追加してみましょう。",
          "position":30,"url": "https://dev-yakuza.posstree.com/react-native/react-native-animatable/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-animatable/"},{
          "@type":"ListItem",
          "name": "アンドロイド開発者登録",
          "description" : "アンドロイドアプリ(Android App)を登録するためアンドロイド開発者登録をして見ましょう。",
          "position":31,"url": "https://dev-yakuza.posstree.com/react-native/android-enroll-google-play-developer/",
          "item": "https://dev-yakuza.posstree.com/react-native/android-enroll-google-play-developer/"},{
          "@type":"ListItem",
          "name": "アンドロイドアプリストア登録",
          "description" : "リアクトネイティブ(React Native)で開発したアンドロイドアプリ(Android App)をアンドロイドアプリストア(Google Play)に登録して見ましょう。",
          "position":32,"url": "https://dev-yakuza.posstree.com/react-native/android-google-play/",
          "item": "https://dev-yakuza.posstree.com/react-native/android-google-play/"},{
          "@type":"ListItem",
          "name": "ユーザ音声認識",
          "description" : "リアクトネイティブ(React Native)プロジェクトでreact-native-voiceライブラリを使ってユーザの音声を認識して文字で変換する機能を追加してみます。",
          "position":33,"url": "https://dev-yakuza.posstree.com/react-native/react-native-voice/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-voice/"},{
          "@type":"ListItem",
          "name": "メール送信機能",
          "description" : "リアクトネイティブ(React Native)プロジェクトでreact-native-mailライブラリを使って端末にインストールされてあるメールアプリを起動してメールを送信してみましょう。",
          "position":34,"url": "https://dev-yakuza.posstree.com/react-native/react-native-mail/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-mail/"},{
          "@type":"ListItem",
          "name": "ファイルシステム使用",
          "description" : "リアクトネイティブ(React Native)プロジェクトでreact-native-fsライブラリを使ってファイルを読んだり書いたりしてみましょう。",
          "position":35,"url": "https://dev-yakuza.posstree.com/react-native/react-native-fs/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-fs/"},{
          "@type":"ListItem",
          "name": "アフターエフェクト(AEF)",
          "description" : "リアクトネイティブ(React Native)プロジェクトでアドビのアフターエフェクト(Adobe After Effects)で作ったアニメーションを適用してみましょう",
          "position":36,"url": "https://dev-yakuza.posstree.com/react-native/react-native-lottie/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-lottie/"},{
          "@type":"ListItem",
          "name": "スワイプ検知",
          "description" : "リアクトネイティブ(React Native)プロジェクトでユーザが画面でどの方向でスワイプ(Swipe)したか検知するためreact-native-swipe-gesturesを使ってみましょう。 ",
          "position":37,"url": "https://dev-yakuza.posstree.com/react-native/react-native-swipe-gestures/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-swipe-gestures/"},{
          "@type":"ListItem",
          "name": "グラデーション(Gradient)",
          "description" : "リアクトネイティブ(React Native)プロジェクトでreact-native-linear-gradientを使ってグラデーション(Gradient)バックグラウンド(background)を作ってみましょう。",
          "position":38,"url": "https://dev-yakuza.posstree.com/react-native/react-native-linear-gradient/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-linear-gradient/"},{
          "@type":"ListItem",
          "name": "App Splash スクリーン",
          "description" : "リアクトネイティブ(React Native)プロジェクトでreact-native-splash-screenを使ってSplashスクリーンを好きな時間に終了するように作ってみましょう。",
          "position":39,"url": "https://dev-yakuza.posstree.com/react-native/react-native-splash-screen/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-splash-screen/"},{
          "@type":"ListItem",
          "name": "アプリストアレビュー",
          "description" : "リアクトネイティブ(React Native)プロジェクトでreact-native-rateを使ってアプリストアのレビューを作成するように誘導する方法について説明します。",
          "position":40,"url": "https://dev-yakuza.posstree.com/react-native/react-native-rate/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-rate/"},{
          "@type":"ListItem",
          "name": "iTunesファイルシェア機能",
          "description" : "iTunesを使ってリアクトネイティブ(React Native)で開発したアプリへファイルをシェアする方法について説明します。",
          "position":41,"url": "https://dev-yakuza.posstree.com/react-native/react-native-itunes-share-file/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-itunes-share-file/"},{
          "@type":"ListItem",
          "name": "StatusBarコントロール",
          "description" : "リアクトネイティブ(React Native)でStatusBarをコントロールする方法について説明します。",
          "position":42,"url": "https://dev-yakuza.posstree.com/react-native/react-native-status-bar/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-status-bar/"},{
          "@type":"ListItem",
          "name": "RN(React Naitve)タブレット対応",
          "description" : "リアクトネイティブ(React Native)プロジェクトでタブレットを対応する方法について説明します。",
          "position":43,"url": "https://dev-yakuza.posstree.com/react-native/react-native-support-tablet/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-support-tablet/"},{
          "@type":"ListItem",
          "name": "RN(Reacct Native)でsqliteを使う方法",
          "description" : "リアクトネイティブ(React Native)プロジェクトでsqliteデータベースを使う方法について説明します。",
          "position":44,"url": "https://dev-yakuza.posstree.com/react-native/react-native-sqlite-storage/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-sqlite-storage/"},{
          "@type":"ListItem",
          "name": "リアクトネイティブ(React Native)でカスタムフォントを使う方法",
          "description" : "リアクトネイティブ(React Native)プロジェクトでカスタムフォントを適用して使う方法について説明します。",
          "position":45,"url": "https://dev-yakuza.posstree.com/react-native/react-native-custom-font/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-custom-font/"},{
          "@type":"ListItem",
          "name": "リアクトネイティブ(React Native)でrootからimportする",
          "description" : "リアクトネイティブ(React Native)プロジェクトでimportをする時、rootフォルダを基準にしてimportが出来るようにプロジェクトを設定してみましょう。",
          "position":46,"url": "https://dev-yakuza.posstree.com/react-native/root-import/",
          "item": "https://dev-yakuza.posstree.com/react-native/root-import/"},{
          "@type":"ListItem",
          "name": "特定のファイルでアプリを開く",
          "description" : "ウェブやメールでダウンロードした特定なファイルを(エクセル, パワーポイントなど)をリアクトネイティブ(React Native)で作成したアプリに入れる方法について説明します。",
          "position":47,"url": "https://dev-yakuza.posstree.com/react-native/open-file-with-app/",
          "item": "https://dev-yakuza.posstree.com/react-native/open-file-with-app/"},{
          "@type":"ListItem",
          "name": "Local Push Notificatoin",
          "description" : "react-native-push-notificationライブラリを使ってLocal Push Notification, つまりアプリ(App)自体からお知らせを送る方法について説明します。",
          "position":48,"url": "https://dev-yakuza.posstree.com/react-native/react-native-push-notification/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-push-notification/"},{
          "@type":"ListItem",
          "name": "React NaitveでAppアイコン & Splashイメージを作る方法",
          "description" : "react-native-makeライブラリを使ってAppアイコンやSplashイメージを生成する方法について説明します。",
          "position":49,"url": "https://dev-yakuza.posstree.com/react-native/react-native-make/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-make/"},{
          "@type":"ListItem",
          "name": "React Nativeで現在位置情報を取得する方法",
          "description" : "react-native-geolocation-serviceライブラリを使ってReact Nativeで現在位置を取得する方法について調べてみましょう。",
          "position":50,"url": "https://dev-yakuza.posstree.com/react-native/react-native-geolocation-service/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-geolocation-service/"},{
          "@type":"ListItem",
          "name": "React Nativeへ地図を表示する方法",
          "description" : "react-native-mapsライブラリを使ってReact Nativeへ地図を使う方法について調べてみます。",
          "position":51,"url": "https://dev-yakuza.posstree.com/react-native/react-native-maps/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-maps/"},{
          "@type":"ListItem",
          "name": "Fastlaneを使ってアプリのデプロイを自動化する",
          "description" : "Fastlaneを使ってReact nativeで作ったアプリをを自動でデプロイしてみましょう。",
          "position":52,"url": "https://dev-yakuza.posstree.com/react-native/fastlane/",
          "item": "https://dev-yakuza.posstree.com/react-native/fastlane/"},{
          "@type":"ListItem",
          "name": "react-native-image-modal",
          "description" : "react-native-image-modalを使ってイメージを全体画面で表示して、pinch拡大、縮小などをしてみましょう。",
          "position":53,"url": "https://dev-yakuza.posstree.com/react-native/react-native-image-modal/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-image-modal/"},{
          "@type":"ListItem",
          "name": "react-native-image-picker",
          "description" : "react-native-image-pickerを使って写真を取ったり、カメラロールから写真を取得する方法について説明します。",
          "position":54,"url": "https://dev-yakuza.posstree.com/react-native/react-native-image-picker/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-image-picker/"},{
          "@type":"ListItem",
          "name": "react-native-firebase(V5)を使ってPush Message",
          "description" : "React Nativeでプッシュメッセージを使うため、react-native-firebase(V5)のライブラリを使ってFCM(Firebase Cloud Messaging)を使う方法について説明します。",
          "position":55,"url": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-fcm/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-fcm/"},{
          "@type":"ListItem",
          "name": "React Native用オープンソースを作る方法",
          "description" : "React Native用のオープンソースを作る方法について説明します。",
          "position":56,"url": "https://dev-yakuza.posstree.com/react-native/make-opensource-library/",
          "item": "https://dev-yakuza.posstree.com/react-native/make-opensource-library/"},{
          "@type":"ListItem",
          "name": "React NativeでMultidexの設定",
          "description" : "React NaitveのプロジェクトのアンドロイドへMultidexを設定する方法について説明します。",
          "position":57,"url": "https://dev-yakuza.posstree.com/react-native/react-native-multidex/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-multidex/"},{
          "@type":"ListItem",
          "name": "react-native-firebase V6インストール",
          "description" : "React NativeでFirebaseを使うため、react-native-firebase(V6)をインストールする方法について説明します。",
          "position":58,"url": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-v6-installation/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-v6-installation/"},{
          "@type":"ListItem",
          "name": "react-native-firebase V6 Crashlytics",
          "description" : "react-native-firebase(V6)を使ってFirebaseのCrashlyticsを使う方法について説明します。",
          "position":59,"url": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-v6-crashlytics/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-v6-crashlytics/"},{
          "@type":"ListItem",
          "name": "react-native-firebase V6 Admob",
          "description" : "react-native-firebase(V6)を使ってFirebaseのAdmobを使う方法について説明します。",
          "position":60,"url": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-v6-admob/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-firebase-v6-admob/"},{
          "@type":"ListItem",
          "name": "React NativeでYoutubeを表示する",
          "description" : "React NativeでYoutubeを表示するため、react-native-youtubeを使う方法について説明します。",
          "position":61,"url": "https://dev-yakuza.posstree.com/react-native/react-native-youtube/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-youtube/"},{
          "@type":"ListItem",
          "name": "React NativeでAdmobのNative Advanced広告を使う方法",
          "description" : "React NativeでAdmobのNative Advanced広告を使うため、react-native-admob-native-adsライブラリを使う方法について説明します。",
          "position":62,"url": "https://dev-yakuza.posstree.com/react-native/react-native-admob-native-ads/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-admob-native-ads/"},{
          "@type":"ListItem",
          "name": "React Nativeでアプリ内課金を実装する",
          "description" : "React Nativeでアプリ内課金を実装するためreact-native-iapを使う方法について説明します。",
          "position":63,"url": "https://dev-yakuza.posstree.com/react-native/react-native-iap/",
          "item": "https://dev-yakuza.posstree.com/react-native/react-native-iap/"},{
          "@type":"ListItem",
          "name": "GitHub ActionsとFastlaneを使ってReact Nativeアプリをデプロイする",
          "description" : "GitHub ActionsとFastlaneを使ってReact Nativeで開発したアプリを自動でデプロイする",
          "position":64,"url": "https://dev-yakuza.posstree.com/react-native/github-actions-fastlane/",
          "item": "https://dev-yakuza.posstree.com/react-native/github-actions-fastlane/"}]
    }
  </script><link rel="stylesheet" href="/assets/highlight/railscasts.css"/><script src="/assets/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="/assets//vendor/lazysizes/lazysizes.min.js" async=""></script><script data-ad-client="ca-pub-7987914246691031" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav"><div class="container"><a class="navbar-brand" href="/"><img src="/assets/images/icon.png" alt="dev.yakuza blog logo"/> ヤクザ </a><div class="navbar-menu-container"><div class="collapse navbar-collapse"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/clog/">Clog</a><a class="dropdown-item" href="/books/">本の執筆</a><a class="dropdown-item" href="/react-native/">React Native</a><a class="dropdown-item" href="/kubernetes/">クバネティス</a><a class="dropdown-item" href="/git/">git</a><a class="dropdown-item" href="/flutter/">Flutter</a><a class="dropdown-item" href="/ildangongbu/">일단공부（イルタンゴンブ）</a><a class="dropdown-item" href="/environment/">開発環境</a><a class="dropdown-item" href="/kumoncho/">kumoncho</a><a class="dropdown-item" href="/ruby/">Ruby</a><a class="dropdown-item" href="/share/">共有</a><a class="dropdown-item" href="/blaboo/">BlaBoo</a><a class="dropdown-item" href="/jest/">Jest</a><a class="dropdown-item" href="/jekyll/">jekyll blog</a><a class="dropdown-item" href="/react/">React</a><a class="dropdown-item" href="/laravel/">Laravel</a><a class="dropdown-item" href="/ruby-on-rails/">Ruby on Rails</a><a class="dropdown-item" href="/django/">ジャンゴ(django)</a></div></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href=" /app/list/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/contact/">Contact</a></li></ul></div><div class="btn-group-sm btn-translate-group dropdown"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="change language button"><i class="fa fa-language" aria-hidden="true"></i></button><div class="dropdown-menu"><a class="dropdown-item menu-ko" href="/ko/react-native/fastlane/">한국어</a><a class="dropdown-item menu-en" href="/en/react-native/fastlane/">English</a><a class="dropdown-item menu-ja" href="/react-native/fastlane/">日本語</a></div></div><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"> Menu <i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Category </a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/clog/">Clog</a><a class="dropdown-item" href="/books/">本の執筆</a><a class="dropdown-item" href="/react-native/">React Native</a><a class="dropdown-item" href="/kubernetes/">クバネティス</a><a class="dropdown-item" href="/git/">git</a><a class="dropdown-item" href="/flutter/">Flutter</a><a class="dropdown-item" href="/ildangongbu/">일단공부（イルタンゴンブ）</a><a class="dropdown-item" href="/environment/">開発環境</a><a class="dropdown-item" href="/kumoncho/">kumoncho</a><a class="dropdown-item" href="/ruby/">Ruby</a><a class="dropdown-item" href="/share/">共有</a><a class="dropdown-item" href="/blaboo/">BlaBoo</a><a class="dropdown-item" href="/jest/">Jest</a><a class="dropdown-item" href="/jekyll/">jekyll blog</a><a class="dropdown-item" href="/react/">React</a><a class="dropdown-item" href="/laravel/">Laravel</a><a class="dropdown-item" href="/ruby-on-rails/">Ruby on Rails</a><a class="dropdown-item" href="/django/">ジャンゴ(django)</a></div></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href=" /app/list/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/contact/">Contact</a></li></ul></div></div></nav><script>document.addEventListener("DOMContentLoaded",function(){var e=window.location.pathname;e.indexOf("/en/")>=0?($(".menu-ko").prop("href",e.replace("/en/","/ko/")),$(".menu-en").prop("href",e),$(".menu-ja").prop("href",e.replace("/en/","/"))):e.indexOf("/ko/")>=0?($(".menu-ko").prop("href",e),$(".menu-en").prop("href",e.replace("/ko/","/en/")),$(".menu-ja").prop("href",e.replace("/ko/","/"))):($(".menu-ko").prop("href","/ko"+e),$(".menu-en").prop("href","/en"+e),$(".menu-ja").prop("href",e)),$("body").on("show.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$("body").on("hide.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()})});</script><header class="masthead" style="background-image: url('/assets/images/category/react-native/2020/fastlane/background.jpg')"><div class="overlay"></div><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><div class="post-heading"><h1>Fastlaneを使ってアプリのデプロイを自動化する</h1><div class="heading-date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-12-16 <img style="width: inherit;" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fdev-yakuza.github.io%2F/react-native/fastlane/&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false" alt="hit count image"/></div><h2 class="subheading">Fastlaneを使ってReact nativeで作ったアプリをを自動でデプロイしてみましょう。</h2><div class="sponsor_container"><a href="https://github.com/sponsors/dev-yakuza" target="_blank" rel="noopener" style=" background-color: #e6ebf1; background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%); background-position: -0.5em; color: #24292e; text-decoration: none; border: 1px solid rgba(27, 31, 35, 0.35); padding: 6px 10px; user-select: none; background-repeat: repeat-x; background-position: -1px -1px; background-size: 110% 110%; border: 1px solid rgba(27, 31, 35, 0.2); border-radius: 0.25em; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; white-space: nowrap; vertical-align: middle; font-size: 17px; font-family: 'Lato', sans-serif !important; margin: 10px; display: inline-block; "><svg style="color: #ea4aaa; vertical-align: text-bottom !important;" viewBox="0 0 12 16" version="1.1" width="16" height="20" aria-hidden="true"><path fill-rule="evenodd" d="M8.727 3C7.091 3 6.001 4.65 6.001 4.65S4.909 3 3.273 3C1.636 3 0 4.1 0 6.3 0 9.6 6 14 6 14s6-4.4 6-7.7C12 4.1 10.364 3 8.727 3z"></path></svg> Github Sponsor </a><style> .bmc-button img { width: 27px !important; margin-bottom: 1px !important; border: none !important; vertical-align: middle !important; } .bmc-button { line-height: 36px !important; height: 37px !important; text-decoration: none !important; display: inline-block !important; color: #ffffff !important; background-color: #ff813f !important; border-radius: 3px !important; border: 1px solid transparent !important; padding: 0px 9px !important; font-size: 17px !important; letter-spacing: -0.08px !important; margin: 10px !important; font-family: 'Lato', sans-serif !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; -o-transition: 0.3s all linear !important; -webkit-transition: 0.3s all linear !important; -moz-transition: 0.3s all linear !important; -ms-transition: 0.3s all linear !important; transition: 0.3s all linear !important; } .bmc-button:hover, .bmc-button:active, .bmc-button:focus { -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; text-decoration: none !important; box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; opacity: 0.85 !important; color: #ffffff !important; }</style><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"/><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/j0cXhWiza" rel="noopener noreferrer nofollow"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"/><span style="margin-left:5px">Buy me a coffee</span></a></div></div></div></div></div></header><div class="top-ads"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="3850742490" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="container container-contents"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><nav aria-label="breadcrumb"><ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="https://dev-yakuza.posstree.com/"><span itemprop="name">Home</span></a><meta itemprop="position" content="1"/></li><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="https://dev-yakuza.posstree.com/react-native"><span itemprop="name">react-native</span></a><meta itemprop="position" content="2"/></li><li class="breadcrumb-item active" aria-current="page" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemtype="http://schema.org/Thing" itemprop="item" href="https://dev-yakuza.posstree.com/react-native/fastlane/"><span itemprop="name">Fastlaneを使ってアプリのデプロイを自動化する</span></a><meta itemprop="position" content="3"/></li></ol></nav></div></div><div class="row"><div class="col-lg-2 col-md-1 d-none d-lg-block left-ads"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle sticky-top" style="display:block; padding-top: 80px; margin-bottom: 80px;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1333703444" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><article class="col-lg-8 col-md-10 mx-auto"><div id="contents_list"><h2 id="section">目次</h2><ol><li><a href="#概要">概要</a></li><li><a href="#fastlane">Fastlane</a></li><li><a href="#インストール">インストール</a></li><li><a href="#ios">iOS</a><ul><li><a href="#iosのためfastlaneの初期化">iOSのためFastlaneの初期化</a></li><li><a href="#ios用fastlaneフォルダやファイル">iOS用Fastlaneフォルダやファイル</a></li><li><a href="#ios用実行ファイル修正">iOS用実行ファイル修正</a></li><li><a href="#ios用fastlaneを実行">iOS用fastlaneを実行</a></li></ul></li><li><a href="#アンドロイド">アンドロイド</a><ul><li><a href="#api-accessのためservice-account生成">API accessのためService Account生成</a></li><li><a href="#アンドロイドのためfastlane初期化">アンドロイドのためFastlane初期化</a></li><li><a href="#アンドロイド用のfastlaneフォルダやファイル">アンドロイド用のFastlaneフォルダやファイル</a></li><li><a href="#アンドロイド用実行ファイル修正">アンドロイド用実行ファイル修正</a></li><li><a href="#アンドロイドのfastlane実行">アンドロイドのfastlane実行</a></li></ul></li><li><a href="#packagejson">package.json</a></li><li><a href="#gitignore">gitignore</a></li><li><a href="#完了">完了</a></li></ol></div><h2 id="概要">概要</h2><p>React Nativeを使って趣味でアプリを開発していますが、アプリがどんどん多くなってアプリをアップデートする時、結構な時間が掛かってしまいました。</p><ul><li>趣味で作ったアプリリスト: <a href="https://dev-yakuza.posstree.com/app/list" target="_blank">App List</a></li></ul><p>それでReact Nativeで作ったアプリを自動で配布する方法を探して、<code class="language-plaintext highlighter-rouge">Fastlane</code>と言うツールを見つけました。</p><ul><li>公式サイト: <a href="https://docs.fastlane.tools/" rel="nofollow noreferrer" target="_blank">Fastlane</a></li></ul><p>このブログポストは<code class="language-plaintext highlighter-rouge">Fastlane</code>を使ってReact Nativeで開発したアプリのデプロイを自動化する方法について説明します。 (React Nativeで作ったアプリ以外にもネーティブで作ったアプリも使うことができますので、ネーティブで開発した方もご参考してください。)</p><p>もしReact Nativeのデプロイについて良く知らない方は以前のブログを参考してください。</p><ul><li>iOS <ul><li><a href="https://dev-yakuza.posstree.com/react-native/ios-running-on-device/" target="_blank">iOSビルドやテスト</a></li><li><a href="https://dev-yakuza.posstree.com/react-native/ios-test-on-device/" target="_blank">iOSデバイステスト</a></li><li><a href="https://dev-yakuza.posstree.com/react-native/ios-enroll-developer-program/" target="_blank">iOS開発者登録</a></li><li><a href="https://dev-yakuza.posstree.com/react-native/ios-certification/" target="_blank">iOS証明書(Certification)</a></li><li><a href="https://dev-yakuza.posstree.com/react-native/ios-testflight/" target="_blank">iOS TestFlight</a></li><li><a href="https://dev-yakuza.posstree.com/react-native/ios-app-store/" target="_blank">iOS App store 登録</a></li></ul></li><li>Android <ul><li><a href="https://dev-yakuza.posstree.com/react-native/android-test-on-device/" target="_blank">アンドロイドデバイステスト</a></li><li><a href="https://dev-yakuza.posstree.com/react-native/android-running-on-device/" target="_blank">アンドロイドビルドやテスト</a></li><li><a href="https://dev-yakuza.posstree.com/react-native/android-enroll-google-play-developer/" target="_blank">アンドロイド開発者登録</a></li><li><a href="https://dev-yakuza.posstree.com/react-native/android-google-play/" target="_blank">アンドロイドアプリストア登録</a></li></ul></li></ul><h2 id="fastlane">Fastlane</h2><blockquote><p>fastlane is the easiest way to automate beta deployments and releases for your iOS and Android apps. It handles all tedious tasks, like generating screenshots, dealing with code signing, and releasing your application.</p></blockquote><p>FastlaneはiOSとアンドロイドのテスト用やリリース用のデプロイを簡単に自動化してくれるツールです。デプロイ以外にも、スクリンショット、コードサイニング、アプリストアーの情報などを生成、管理することもできます。</p><p>このブログではスクリンショット、アプリストアー登録情報などは既に登録したと思って、テスト用/リリース用のデプロイを自動化する部分だけ説明する予定です。</p><p>スクリンショット、アプリストアー登録情報の生成など、他の機能を使ってみたい方は公式サイトを参考してください。</p><ul><li>公式サイト: <a href="https://docs.fastlane.tools/" rel="nofollow noreferrer" target="_blank">Fastlane</a></li></ul><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h2 id="インストール">インストール</h2><p>下記のコマンドで<code class="language-plaintext highlighter-rouge">Fastlane</code>をインストールすることができます。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Using RubyGems</span>
<span class="nb">sudo </span>gem <span class="nb">install </span>fastlane <span class="nt">-NV</span>

<span class="c"># Alternatively using Homebrew</span>
brew cask <span class="nb">install </span>fastlane
</code></pre></div></div><p>公式サイトでは<code class="language-plaintext highlighter-rouge">Homebrew</code>を使ってインストールする方法と<code class="language-plaintext highlighter-rouge">RubyGems</code>を使ってインストールする方法を案内しています。</p><p>私は最初はHomebrewを使ってインストールして、テストしましたが、上手く行かない部分がありました。したがって、RubyGemsを使ってインストールすることをおすすめします。もし、Homebrewで上手く行かない方はRubyGemsで再インストールして試してみてください。</p><h2 id="ios">iOS</h2><p>React Nativeで開発したアプリをFastlaneを使ってiOSのデプロイを自動化してみます。</p><h3 id="iosのためfastlaneの初期化">iOSのためFastlaneの初期化</h3><p>下記のコマンドを使ってiOSのため、Fastlaneを初期化します。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>ios
fastlane init
</code></pre></div></div><p>上のコマンドを実行すると下記の画面が見えます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/init-ios.jpg" alt="Fastlaneを使ってReact Nativeアプリ自動配布 - iOSの初期化"/></p><p>基本設定をするためTestflight用のデプロイ設定である<code class="language-plaintext highlighter-rouge">2</code>やアプリストアへのデプロイ設定である<code class="language-plaintext highlighter-rouge">3</code>を選択します。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2. Automate beta distribution to TestFlight
3. Automate App Store distribution
</code></pre></div></div><p>ここではTestflight用のデプロイ設定である<code class="language-plaintext highlighter-rouge">2</code>を選んで進めます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/select-ios-project.jpg" alt="Fastlaneを使ってReact Nativeアプリ自動配布 - iOSのプロジェクト選択"/></p><p>2を選択して進めると上のようにiOSのプロジェクトを選択する画面が確認できます。tvアプリを開発していない場合<code class="language-plaintext highlighter-rouge">2</code>を選択してReact NativeのiOSアプリプロジェクトを選べます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/login-apple.jpg" alt="Fastlaneを使ってReact Nativeアプリ自動配布 - Appleログイン"/></p><p>React NativeのiOSプロジェクトを選択したら、上のようにAppleログインをする画面がでます。iOSのアプリ配布のため使ってるApple store connectのログインIDを入力します。</p><p><img src="/assets/images/category/react-native/2020/fastlane/enter-ios.jpg" alt="Fastlaneを使ってReact Nativeアプリ自動配布 - iOS設定"/></p><p>私はすでにFastlaneを使ってログインしたことがあるので、上のような画面が確認できます。最初Fastlaneを設定する方は二重認証の手続きが出るので、その手続き通りやってください。</p><p>上のような画面以外にも何回も<code class="language-plaintext highlighter-rouge">Continue by pressing Enter</code>を入力する画面がでます。Enterキーを押して進めて設定を完了します。</p><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h3 id="ios用fastlaneフォルダやファイル">iOS用Fastlaneフォルダやファイル</h3><p>iOSの設定を完了したらReact Naitveのiosフォルダ下へ下記のようなフォルダやファイルが生成されることが確認できます。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|- fastlane
|  |- Appfile
|  |- Fastfile
|- Gemfile
|- Gemfile.lock
</code></pre></div></div><p>各フォルダやファイルを詳しくみてみましょう。</p><ul><li>fastlane フォルダ: fastlaneの設定ファイルや実行ファイルが入っているフォルダ</li><li>Gemfile, Gemfile.lock: fastlaneはRubyでできてるのでfastlaneを実行するためのライブラリインストールファイルです。</li></ul><p>fastlanewお実行するための設定内容が入ってる<code class="language-plaintext highlighter-rouge">fastlane/Appfile</code>ファイルのコメントアウトを消して見ると下記のようです。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app_identifier</span><span class="p">(</span><span class="s2">"io.github.dev-yakuza.kumoncho"</span><span class="p">)</span>
<span class="n">apple_id</span><span class="p">(</span><span class="s2">"dev.yakuza@gmail.com"</span><span class="p">)</span>

<span class="n">itc_team_id</span><span class="p">(</span><span class="s2">"119423059"</span><span class="p">)</span>
<span class="n">team_id</span><span class="p">(</span><span class="s2">"WFDJCJXQZ6"</span><span class="p">)</span>
</code></pre></div></div><p>AppfileはiOSの自動配布のためfastlaneの設定ファイルです。簡単なファイルですので、詳しく説明は省略します。</p><p>その次は実際アプリをデプロイする時、実行するファイルである<code class="language-plaintext highlighter-rouge">fastlane/Fastfile</code>ファイルをコメントアウトを消して見ると下記のようです。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">default_platform</span><span class="p">(</span><span class="ss">:ios</span><span class="p">)</span>

<span class="n">platform</span> <span class="ss">:ios</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s2">"Push a new beta build to TestFlight"</span>
  <span class="n">lane</span> <span class="ss">:beta</span> <span class="k">do</span>
    <span class="n">increment_build_number</span><span class="p">(</span><span class="ss">xcodeproj: </span><span class="s2">"kumoncho.xcodeproj"</span><span class="p">)</span>
    <span class="n">build_app</span><span class="p">(</span><span class="ss">workspace: </span><span class="s2">"kumoncho.xcworkspace"</span><span class="p">,</span> <span class="ss">scheme: </span><span class="s2">"kumoncho"</span><span class="p">)</span>
    <span class="n">upload_to_testflight</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>下記のコマンドで上のfastlaneを実行することができます。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cd ios</span>
fastlane beta
</code></pre></div></div><p>上のようにfastlaneを実行するとiOSのbuild numberを上げて(<code class="language-plaintext highlighter-rouge">increment_build_number</code>)、アプリをビルドして(<code class="language-plaintext highlighter-rouge">build_app</code>)、Testflight用でアップロードします。(<code class="language-plaintext highlighter-rouge">upload_to_testflight</code>)</p><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h3 id="ios用実行ファイル修正">iOS用実行ファイル修正</h3><p>基本でき提供するfastlaneファイルでは完璧に自動化ができません。したがってiOS用のデプロイ自動化のため<code class="language-plaintext highlighter-rouge">fastlane/Fastfile</code>を下記のように修正します。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">default_platform</span><span class="p">(</span><span class="ss">:ios</span><span class="p">)</span>

<span class="n">platform</span> <span class="ss">:ios</span> <span class="k">do</span>
  <span class="k">def</span> <span class="nf">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="ss">:version</span><span class="p">]</span>
      <span class="n">version</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="ss">:version</span><span class="p">]</span>
    <span class="k">else</span>
      <span class="n">version</span> <span class="o">=</span> <span class="n">prompt</span><span class="p">(</span><span class="ss">text: </span><span class="s2">"Enter the version type or specific version</span><span class="se">\n</span><span class="s2">(major, minor, patch or 1.0.0): "</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">re</span> <span class="o">=</span> <span class="sr">/\d+.\d+.\d+/</span>
    <span class="n">versionNum</span> <span class="o">=</span> <span class="n">version</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">versionNum</span><span class="p">)</span>
      <span class="n">increment_version_number</span><span class="p">(</span>
        <span class="ss">version_number: </span><span class="n">versionNum</span>
      <span class="p">)</span>
    <span class="k">elsif</span> <span class="p">(</span><span class="n">version</span> <span class="o">==</span> <span class="s1">'major'</span> <span class="o">||</span> <span class="n">version</span> <span class="o">==</span> <span class="s1">'minor'</span> <span class="o">||</span> <span class="n">version</span> <span class="o">==</span> <span class="s1">'patch'</span><span class="p">)</span>
      <span class="n">increment_version_number</span><span class="p">(</span>
        <span class="ss">bump_type: </span><span class="n">version</span>
      <span class="p">)</span>
    <span class="k">else</span>
      <span class="no">UI</span><span class="p">.</span><span class="nf">user_error!</span><span class="p">(</span><span class="s2">"[ERROR] Wrong version!!!!!!"</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">desc</span> <span class="s2">"Push a new beta build to TestFlight"</span>
  <span class="n">lane</span> <span class="ss">:beta</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
    <span class="n">cert</span>
    <span class="n">sigh</span><span class="p">(</span><span class="ss">force: </span><span class="kp">true</span><span class="p">)</span>
    <span class="n">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

    <span class="n">increment_build_number</span><span class="p">(</span><span class="ss">xcodeproj: </span><span class="s2">"kumoncho.xcodeproj"</span><span class="p">)</span>
    <span class="n">build_app</span><span class="p">(</span><span class="ss">workspace: </span><span class="s2">"kumoncho.xcworkspace"</span><span class="p">,</span> <span class="ss">scheme: </span><span class="s2">"kumoncho"</span><span class="p">)</span>
    <span class="n">upload_to_testflight</span>
  <span class="k">end</span>

  <span class="n">desc</span> <span class="s2">"Push a new release build to the App Store"</span>
  <span class="n">lane</span> <span class="ss">:release</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
    <span class="n">cert</span>
    <span class="n">sigh</span><span class="p">(</span><span class="ss">force: </span><span class="kp">true</span><span class="p">)</span>
    <span class="n">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

    <span class="n">increment_build_number</span><span class="p">(</span><span class="ss">xcodeproj: </span><span class="s2">"kumoncho.xcodeproj"</span><span class="p">)</span>
    <span class="n">build_app</span><span class="p">(</span><span class="ss">workspace: </span><span class="s2">"kumoncho.xcworkspace"</span><span class="p">,</span> <span class="ss">scheme: </span><span class="s2">"kumoncho"</span><span class="p">)</span>
    <span class="n">upload_to_app_store</span><span class="p">(</span>
      <span class="ss">force: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">reject_if_possible: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">skip_metadata: </span><span class="kp">false</span><span class="p">,</span>
      <span class="ss">skip_screenshots: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">languages: </span><span class="p">[</span><span class="s1">'en-US'</span><span class="p">,</span> <span class="s1">'ja'</span><span class="p">,</span><span class="s1">'ko'</span><span class="p">],</span>
      <span class="ss">release_notes: </span><span class="p">{</span>
        <span class="s2">"default"</span> <span class="o">=&gt;</span> <span class="s2">"bug fixed"</span><span class="p">,</span>
        <span class="s2">"en-US"</span> <span class="o">=&gt;</span> <span class="s2">"bug fixed"</span><span class="p">,</span>
        <span class="s2">"ja"</span> <span class="o">=&gt;</span> <span class="s2">"バグ修正"</span><span class="p">,</span>
        <span class="s2">"ko"</span> <span class="o">=&gt;</span> <span class="s2">"버그 수정"</span>
      <span class="p">},</span>
      <span class="ss">submit_for_review: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">automatic_release: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">submission_information: </span><span class="p">{</span>
        <span class="ss">add_id_info_uses_idfa: </span><span class="kp">true</span><span class="p">,</span>
        <span class="ss">add_id_info_serves_ads: </span><span class="kp">true</span><span class="p">,</span>
        <span class="ss">add_id_info_tracks_install: </span><span class="kp">true</span><span class="p">,</span>
        <span class="ss">add_id_info_tracks_action: </span><span class="kp">false</span><span class="p">,</span>
        <span class="ss">add_id_info_limits_tracking: </span><span class="kp">true</span><span class="p">,</span>
        <span class="ss">export_compliance_encryption_updated: </span><span class="kp">false</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>追加した内容を見ると下記のようです。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="ss">:version</span><span class="p">]</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="ss">:version</span><span class="p">]</span>
  <span class="k">else</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">prompt</span><span class="p">(</span><span class="ss">text: </span><span class="s2">"Enter the version type or specific version</span><span class="se">\n</span><span class="s2">(major, minor, patch or 1.0.0): "</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">re</span> <span class="o">=</span> <span class="sr">/\d+.\d+.\d+/</span>
  <span class="n">versionNum</span> <span class="o">=</span> <span class="n">version</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">versionNum</span><span class="p">)</span>
    <span class="n">increment_version_number</span><span class="p">(</span>
      <span class="ss">version_number: </span><span class="n">versionNum</span>
    <span class="p">)</span>
  <span class="k">elsif</span> <span class="p">(</span><span class="n">version</span> <span class="o">==</span> <span class="s1">'major'</span> <span class="o">||</span> <span class="n">version</span> <span class="o">==</span> <span class="s1">'minor'</span> <span class="o">||</span> <span class="n">version</span> <span class="o">==</span> <span class="s1">'patch'</span><span class="p">)</span>
    <span class="n">increment_version_number</span><span class="p">(</span>
      <span class="ss">bump_type: </span><span class="n">version</span>
    <span class="p">)</span>
  <span class="k">else</span>
    <span class="no">UI</span><span class="p">.</span><span class="nf">user_error!</span><span class="p">(</span><span class="s2">"[ERROR] Wrong version!!!!!!"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>ユーザーが入力したバージョンに合わせて、バージョンを修正する関数を定義しました。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lane</span> <span class="ss">:beta</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
  <span class="n">cert</span>
  <span class="n">sigh</span><span class="p">(</span><span class="ss">force: </span><span class="kp">true</span><span class="p">)</span>
  <span class="n">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
  <span class="o">...</span>
</code></pre></div></div><p>fastlaneのコマンドで実行する時、パラメーターを使うため<code class="language-plaintext highlighter-rouge">|options|</code>を追加して、該当optionを新しく定義した関数のパラメーターへ入れました。このように新しく追加したスクリプトを使うためには下記のようなコマンドを実行します。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># fastlane beta version:1.0.0</span>
<span class="c"># fastlane beta version:major</span>
<span class="c"># fastlane beta version:minor</span>
fastlane beta version:patch
</code></pre></div></div><p>もし、パラメーターを入力しなかった場合、ユーザーの入力を待てるようにしました。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="ss">:version</span><span class="p">]</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="ss">:version</span><span class="p">]</span>
  <span class="k">else</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">prompt</span><span class="p">(</span><span class="ss">text: </span><span class="s2">"Enter the version type or specific version</span><span class="se">\n</span><span class="s2">(major, minor, patch or 1.0.0): "</span><span class="p">)</span>
  <span class="k">end</span>
<span class="o">...</span>
</code></pre></div></div><p>また、<code class="language-plaintext highlighter-rouge">cert</code>を使って証明書を持ってくるように設定して、<code class="language-plaintext highlighter-rouge">sigh(force: true)</code>を使ってProvisioning profileと連携するようにしました。</p><p>今まではTestflight用でアップロードする方法について説明しました。実際デプロイのため下記のような内容を追加します。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">desc</span> <span class="s2">"Push a new release build to the App Store"</span>
<span class="n">lane</span> <span class="ss">:release</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
  <span class="n">cert</span>
  <span class="n">sigh</span><span class="p">(</span><span class="ss">force: </span><span class="kp">true</span><span class="p">)</span>
  <span class="n">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

  <span class="n">increment_build_number</span><span class="p">(</span><span class="ss">xcodeproj: </span><span class="s2">"kumoncho.xcodeproj"</span><span class="p">)</span>
  <span class="n">build_app</span><span class="p">(</span><span class="ss">workspace: </span><span class="s2">"kumoncho.xcworkspace"</span><span class="p">,</span> <span class="ss">scheme: </span><span class="s2">"kumoncho"</span><span class="p">)</span>
  <span class="n">upload_to_app_store</span><span class="p">(</span>
    <span class="ss">force: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">reject_if_possible: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">skip_metadata: </span><span class="kp">false</span><span class="p">,</span>
    <span class="ss">skip_screenshots: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">languages: </span><span class="p">[</span><span class="s1">'en-US'</span><span class="p">,</span> <span class="s1">'ja'</span><span class="p">,</span><span class="s1">'ko'</span><span class="p">],</span>
    <span class="ss">release_notes: </span><span class="p">{</span>
      <span class="s2">"default"</span> <span class="o">=&gt;</span> <span class="s2">"bug fixed"</span><span class="p">,</span>
      <span class="s2">"en-US"</span> <span class="o">=&gt;</span> <span class="s2">"bug fixed"</span><span class="p">,</span>
      <span class="s2">"ja"</span> <span class="o">=&gt;</span> <span class="s2">"バグ修正"</span><span class="p">,</span>
      <span class="s2">"ko"</span> <span class="o">=&gt;</span> <span class="s2">"버그 수정"</span>
    <span class="p">},</span>
    <span class="ss">submit_for_review: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">automatic_release: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">submission_information: </span><span class="p">{</span>
      <span class="ss">add_id_info_uses_idfa: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">add_id_info_serves_ads: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">add_id_info_tracks_install: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">add_id_info_tracks_action: </span><span class="kp">false</span><span class="p">,</span>
      <span class="ss">add_id_info_limits_tracking: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">export_compliance_encryption_updated: </span><span class="kp">false</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>アプリをビルドするところまではTestflight用と同じです。ビルドされたアプリをアプリストアーへ配布するために下記のような内容を追加しました。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">upload_to_app_store</span><span class="p">(</span>
  <span class="ss">force: </span><span class="kp">true</span><span class="p">,</span>
  <span class="ss">reject_if_possible: </span><span class="kp">true</span><span class="p">,</span>
  <span class="ss">skip_metadata: </span><span class="kp">false</span><span class="p">,</span>
  <span class="ss">skip_screenshots: </span><span class="kp">true</span><span class="p">,</span>
  <span class="ss">languages: </span><span class="p">[</span><span class="s1">'en-US'</span><span class="p">,</span> <span class="s1">'ja'</span><span class="p">,</span><span class="s1">'ko'</span><span class="p">],</span>
  <span class="ss">release_notes: </span><span class="p">{</span>
    <span class="s2">"default"</span> <span class="o">=&gt;</span> <span class="s2">"bug fixed"</span><span class="p">,</span>
    <span class="s2">"en-US"</span> <span class="o">=&gt;</span> <span class="s2">"bug fixed"</span><span class="p">,</span>
    <span class="s2">"ja"</span> <span class="o">=&gt;</span> <span class="s2">"バグ修正"</span><span class="p">,</span>
    <span class="s2">"ko"</span> <span class="o">=&gt;</span> <span class="s2">"버그 수정"</span>
  <span class="p">},</span>
  <span class="ss">submit_for_review: </span><span class="kp">true</span><span class="p">,</span>
  <span class="ss">automatic_release: </span><span class="kp">true</span><span class="p">,</span>
  <span class="ss">submission_information: </span><span class="p">{</span>
    <span class="ss">add_id_info_uses_idfa: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">add_id_info_serves_ads: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">add_id_info_tracks_install: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">add_id_info_tracks_action: </span><span class="kp">false</span><span class="p">,</span>
    <span class="ss">add_id_info_limits_tracking: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">export_compliance_encryption_updated: </span><span class="kp">false</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">)</span>
</code></pre></div></div><ul><li>force: fastlaneが生成するHTML reportを生成されないようにします。(true)</li><li>reject_if_possible: アプリ審査を待ってるバージョンがある時、その審査をキャンセルします。(true)</li><li>skip_metadata: アプリストアの情報を登録するかを設定します。自動配布する時、バージョンの修正内容を作成する必要があるので、この情報を登録できるように設定します。(false)</li><li>skip_screenshots: 私は既に配布されたアプリについて自動配布を適用しています。したがって、スクリンショットを再アップロードする必要がありません。(true)</li><li>languages: 現在ストアへ登録されたアプリのローカライゼーションを設定します。使える言語は <code class="language-plaintext highlighter-rouge">ar-SA, ca, cs, da, de-DE, el, en-AU, en-CA, en-GB, en-US, es-ES, es-MX, fi, fr-CA, fr-FR, he, hi, hr, hu, id, it, ja, ko, ms, nl-NL, no, pl, pt-BR, pt-PT, ro, ru, sk, sv, th, tr, uk, vi, zh-Hans, zh-Hant</code>で、詳しく内容は公式サイトを参考してください。(<a href="https://docs.fastlane.tools/actions/upload_to_app_store/#available-language-codes" rel="nofollow noreferrer" target="_blank">公式サイト</a>)</li><li>release_notes: iOSはアプリを再配布する時、Release notesを必ず作成します。私が使ってるスクリプトは3国語を提供してるアプリなので、defaultと와 3国語に該当するRelease notesを作成しました。</li><li>submit_for_review: アプリ審査へ提出するようにします。(true)</li><li>automatic_release: 審査が終わったらアプリを自動でデプロイするように設定します。これを設定しないとアプリ審査が終わった後、開発者が手動でデプロイする必要があります。(true)</li><li>submission_information: デプロイ前、暗号化や広告が含まれたかをチェックするオプションです。</li></ul><p>これ意外にもたくさんのオプションがあります。詳しく内容は公式サイトを参考してください。</p><ul><li>公式サイト: <a href="https://docs.fastlane.tools/actions/upload_to_app_store/" rel="nofollow noreferrer" target="_blank">https://docs.fastlane.tools/actions/upload_to_app_store/</a></li><li>例題: <a href="https://github.com/artsy/eigen/blob/faa02e2746194d8d7c11899474de9c517435eca4/fastlane/Fastfile#L131-L149" rel="nofollow noreferrer" target="_blank">submission_information</a></li></ul><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h3 id="ios用fastlaneを実行">iOS用fastlaneを実行</h3><p>これでfastlaneを使ってiOSへの自動デプロイ準備は終わりました。これからfastlaneを使ってアプリを自動デプロイしてみます。</p><p>下記のコマンドを使ってReact Nativeで作ったアプリをTestflightへデプロイしてみます。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cd ios</span>
fastlane beta version:patch
</code></pre></div></div><p>デプロイが終わるまで、結構な時間がかかります。デプロイが終わったら下記のような画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/ios-testflight.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - iOS Testflightデプロイ"/></p><p>もちろん、App store connectのTestflightへも上手くデプロイされたことが確認できます。</p><p>じゃ、今回は下記のコマンド使って実際デプロイしてみましょう。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cd ios</span>
fastlane release version:patch
</code></pre></div></div><p>デプロイが終わったら下記のような画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/ios-upload-app-store.jpg" alt="Fastlaneを使ってReact Nativeアプリ自動配布 - iOSアプリデプロイ"/></p><p>また、App store connectにも上手くデプロイが出来たことが確認出来ます。</p><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h2 id="アンドロイド">アンドロイド</h2><p>今回はReact Nativeで開発したアンドロイドアプリをFastlaneを使ってアンドロイドのデプロイを自動化してみます。</p><h3 id="api-accessのためservice-account生成">API accessのためService Account生成</h3><p>Fastlaneを使ってアンドロイドをデプロイする時、グーグルのAPIを使うため、<code class="language-plaintext highlighter-rouge">Google Developer Service Account</code>を生成する必要があります。</p><p>Google Developer Service Accountを生成するため、下記のリンクを使ってグーグルコンソール(Google Play Console)に行きます。</p><ul><li>グーグルプレイコンソール: <a href="https://play.google.com/apps/publish/" rel="nofollow noreferrer" target="_blank">https://play.google.com/apps/publish/</a></li></ul><p>グーグルプレイコンソールに移動したら、下記の画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/google-play-console.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソール"/></p><p>左メニューの<code class="language-plaintext highlighter-rouge">Settings</code>を選択します。そして<code class="language-plaintext highlighter-rouge">Developer account</code>下にある<code class="language-plaintext highlighter-rouge">API access</code>メニューを選択します。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-api-access.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールapi accessメニュー"/></p><p>上のような画面が見えたら、<code class="language-plaintext highlighter-rouge">CREATE NEW PROJECT</code>ボタンを押して、新しプロジェクトを生成します。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-api-access-service-account.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールapi access, service account"/></p><p>新しプロジェクトが生成されると、上のような画面が確認できます。下にある<code class="language-plaintext highlighter-rouge">CREATE SERVICE ACCOUNT</code>ボタンを選択したら、下記のような画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-api-access-how-to-create-service-account.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールapi access, how to create service account"/></p><p>上のような画面で<code class="language-plaintext highlighter-rouge">Google API Console</code>リンクを選択します。選択したら、下記のような画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-google-api-console.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console"/></p><p>上にある<code class="language-plaintext highlighter-rouge">CREATE SERVICE ACCOUNT</code>ボタンを選択します。選択したら、下記のように新しService accountを生成する画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-google-api-console-create-service-account.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console, service account生成"/></p><p>上のような画面で、<code class="language-plaintext highlighter-rouge">Service account name</code>へ名前を入力して、<code class="language-plaintext highlighter-rouge">CREATE</code>ボタンを押してService accountを生成します。(私はService account nameへgoogle-play-fastlane-deploymentを入力しました。)</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-google-api-console-service-account-role.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console, service account役割設定"/></p><p>上のような画面が見えたら、<code class="language-plaintext highlighter-rouge">Role</code>を選択して<code class="language-plaintext highlighter-rouge">Service Account User</code>を検索して選択します。RoleにService Account Userを設定したら、下にある<code class="language-plaintext highlighter-rouge">CONTINUE</code>ボタンを押して進めます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-google-api-console-service-account-create-key.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console, service accountキー生成"/></p><p>上のような画面が見えたら、下にある<code class="language-plaintext highlighter-rouge">CREATE KEY</code>を選択して<code class="language-plaintext highlighter-rouge">JSON</code>が選択された状態で<code class="language-plaintext highlighter-rouge">CREATE</code>を押してキーを生成します。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-google-api-console-service-account-create-json-key.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console, service account JSONキー生成"/></p><p>CREATEボタンを押してキーを生成したら、JSON形式のファイルが自動でダウンロードされます。このファイルをReact Nativeプロジェクトの<code class="language-plaintext highlighter-rouge">android</code>フォルダー下にコピーします。最後に<code class="language-plaintext highlighter-rouge">DONE</code>ボタンを押してService Accountを生成します。</p><p>そして現在画面へ戻って、右下にある<code class="language-plaintext highlighter-rouge">DONE</code>ボタンを押してService Account生成を終了します。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-api-access-how-to-create-service-account.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールapi access, how to create service account"/></p><p>そしたら以前と違って下記のような画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-finish-to-create-service-account.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールService Account生成完了"/></p><p>そしたら、権限を設定するため、右下の<code class="language-plaintext highlighter-rouge">GRANT ACCESS</code>ボタンを選択します。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-service-account-grant-access.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールService Account権限設定"/></p><p>上の画面が表示されたら、スクロールして<code class="language-plaintext highlighter-rouge">ADD USER</code>を選択してユーザーを登録します。</p><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h3 id="アンドロイドのためfastlane初期化">アンドロイドのためFastlane初期化</h3><p>今からアンドロイド用のFastlaneを生成してみましょう。下記のコマンドを使ってアンドロイド用のFastlaneを生成します。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>android
fastlane init
</code></pre></div></div><p>上のコマンドを実行すると下記のような画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-package-name.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイド初期化: package name"/></p><p>アンドロイドプロジェクトの<code class="language-plaintext highlighter-rouge">Package Name</code>を入力します。(ex&gt; io.github.dev.yakuza.kumoncho)そしたら、下記のようにJSONファイルのpathを入力する画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-json-path.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイド初期化: JSON path"/></p><p>Service Accountを生成した時、ダウンロードしたJSONファイルを<code class="language-plaintext highlighter-rouge">android</code>フォルダーへコピーしました。このファイルのpathを指定します。(ex&gt; <code class="language-plaintext highlighter-rouge">app-xxx.json</code>)</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-download-metadata.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイド初期化:ダウンロードmetadata"/></p><p>次はアンドロイドをデプロイする時、登録したストアー情報(metadata)をダウンロードするかどうか設定します。私は既にデプロイしたアプリを自動化してるのでストアー情報を更新する必要がありません。したがって、nを入力してストアー情報をダウンロードしないようにしました。</p><p>上のような画面以外にも何回にも<code class="language-plaintext highlighter-rouge">Continue by pressing Enter</code>を入力する画面がでます。Enterキーを押して進めて設定を完了します。</p><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h3 id="アンドロイド用のfastlaneフォルダやファイル">アンドロイド用のFastlaneフォルダやファイル</h3><p>アンドロイドの設定を完了したら、React Naitveのandroidフォルダ下へ下記のようなフォルダやファイルが生成されたことが確認できます。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|- fastlane
|  |- Appfile
|  |- Fastfile
|- Gemfile
|- Gemfile.lock
</code></pre></div></div><p>各フォルダやファイルを詳しく説明します。</p><ul><li>fastlaneフォルダ: fastlaneの設定や実行するファイルが入ってるフォルダ</li><li>Gemfile, Gemfile.lock: fastlaneはRubyでできてるので、fastlaneを実行するためのライブラリのインストールファイルです。</li></ul><p>fastlaneを実行する設定内容が入ってる<code class="language-plaintext highlighter-rouge">fastlane/Appfile</code>ファイルのコメントアウトを消して見ると下記のようです。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">json_key_file</span><span class="p">(</span><span class="s2">"api-xxx.json"</span><span class="p">)</span>
<span class="n">package_name</span><span class="p">(</span><span class="s2">"io.github.dev.yakuza.kumoncho"</span><span class="p">)</span>
</code></pre></div></div><p>私たちが設定したPacakge NameとJSONファイルのいちが設定されたことが確認できます。その次、実際アプリをデプロイする時実行されるファイルである<code class="language-plaintext highlighter-rouge">fastlane/Fastfile</code>ファイルのコメントアウトを消して見ると下記のようです。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">default_platform</span><span class="p">(</span><span class="ss">:android</span><span class="p">)</span>

<span class="n">platform</span> <span class="ss">:android</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s2">"Runs all the tests"</span>
  <span class="n">lane</span> <span class="ss">:test</span> <span class="k">do</span>
    <span class="n">gradle</span><span class="p">(</span><span class="ss">task: </span><span class="s2">"test"</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">desc</span> <span class="s2">"Submit a new Beta Build to Crashlytics Beta"</span>
  <span class="n">lane</span> <span class="ss">:beta</span> <span class="k">do</span>
    <span class="n">gradle</span><span class="p">(</span><span class="ss">task: </span><span class="s2">"clean assembleRelease"</span><span class="p">)</span>
    <span class="n">crashlytics</span>
  <span class="k">end</span>

  <span class="n">desc</span> <span class="s2">"Deploy a new version to the Google Play"</span>
  <span class="n">lane</span> <span class="ss">:deploy</span> <span class="k">do</span>
    <span class="n">gradle</span><span class="p">(</span><span class="ss">task: </span><span class="s2">"clean assembleRelease"</span><span class="p">)</span>
    <span class="n">upload_to_play_store</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>iOSとは違って<code class="language-plaintext highlighter-rouge">beta</code>と<code class="language-plaintext highlighter-rouge">deploy</code>,2つのlaneが生成されることが確認できます。上のFastlaneももちろん下記のコマンドで実行することができます。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cd android</span>
fastlane beta
fastlane deploy
</code></pre></div></div><p>しかし、完璧な自動化をするため、Fastfileを修正する必要があります。</p><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h3 id="アンドロイド用実行ファイル修正">アンドロイド用実行ファイル修正</h3><p>基本的提供されるfastlaneファイルでは完璧に自動化ができません。したがって、アンドロイド用のデプロイを自動化するため<code class="language-plaintext highlighter-rouge">fastlane/Fastfile</code>ファイルを下記のように修正します。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">default_platform</span><span class="p">(</span><span class="ss">:android</span><span class="p">)</span>

<span class="n">platform</span> <span class="ss">:android</span> <span class="k">do</span>
  <span class="k">def</span> <span class="nf">increment_version_code</span><span class="p">()</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s1">'../app/build.gradle'</span>
    <span class="n">re</span> <span class="o">=</span> <span class="sr">/versionCode\s+(\d+)/</span>

    <span class="n">s</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">versionCode</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">].</span><span class="nf">to_i</span>
    <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">versionCode</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nf">to_s</span>

    <span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">close</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">increment_version_number</span><span class="p">(</span><span class="ss">bump_type: </span><span class="kp">nil</span><span class="p">,</span> <span class="ss">version_number: </span><span class="kp">nil</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s1">'../app/build.gradle'</span>
    <span class="n">re</span> <span class="o">=</span> <span class="sr">/versionName\s+("\d+.\d+.\d+")/</span>
    <span class="n">s</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">versionName</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">].</span><span class="nf">gsub!</span><span class="p">(</span><span class="s1">'"'</span><span class="p">,</span><span class="s1">''</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">)</span>

    <span class="n">major</span> <span class="o">=</span> <span class="n">versionName</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">to_i</span>
    <span class="n">minor</span> <span class="o">=</span> <span class="n">versionName</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">to_i</span>
    <span class="n">patch</span> <span class="o">=</span> <span class="n">versionName</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nf">to_i</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">bump_type</span> <span class="o">==</span> <span class="s1">'major'</span><span class="p">)</span>
        <span class="n">major</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">minor</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">patch</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">elsif</span> <span class="p">(</span><span class="n">bump_type</span> <span class="o">==</span> <span class="s1">'minor'</span><span class="p">)</span>
        <span class="n">minor</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">patch</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">elsif</span> <span class="p">(</span><span class="n">bump_type</span> <span class="o">==</span> <span class="s1">'patch'</span><span class="p">)</span>
        <span class="n">patch</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">end</span>

    <span class="k">if</span><span class="p">(</span><span class="n">version_number</span><span class="p">)</span>
      <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\"</span><span class="si">#{</span><span class="n">version_number</span><span class="si">}</span><span class="se">\"</span><span class="s2">"</span>
    <span class="k">else</span>
      <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\"</span><span class="si">#{</span><span class="n">major</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">minor</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">patch</span><span class="si">}</span><span class="se">\"</span><span class="s2">"</span>
    <span class="k">end</span>

    <span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">close</span>
    <span class="n">increment_version_code</span><span class="p">()</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="ss">:version</span><span class="p">]</span>
      <span class="n">version</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="ss">:version</span><span class="p">]</span>
    <span class="k">else</span>
      <span class="n">version</span> <span class="o">=</span> <span class="n">prompt</span><span class="p">(</span><span class="ss">text: </span><span class="s2">"Enter the version type or specific version</span><span class="se">\n</span><span class="s2">(major, minor, patch or 1.0.0): "</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">re</span> <span class="o">=</span> <span class="sr">/\d+.\d+.\d+/</span>
    <span class="n">versionNum</span> <span class="o">=</span> <span class="n">version</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">versionNum</span><span class="p">)</span>
      <span class="n">increment_version_number</span><span class="p">(</span>
        <span class="ss">version_number: </span><span class="n">versionNum</span>
      <span class="p">)</span>
    <span class="k">elsif</span> <span class="p">(</span><span class="n">version</span> <span class="o">==</span> <span class="s1">'major'</span> <span class="o">||</span> <span class="n">version</span> <span class="o">==</span> <span class="s1">'minor'</span> <span class="o">||</span> <span class="n">version</span> <span class="o">==</span> <span class="s1">'patch'</span><span class="p">)</span>
      <span class="n">increment_version_number</span><span class="p">(</span>
        <span class="ss">bump_type: </span><span class="n">version</span>
      <span class="p">)</span>
    <span class="k">else</span>
      <span class="no">UI</span><span class="p">.</span><span class="nf">user_error!</span><span class="p">(</span><span class="s2">"[ERROR] Wrong version!!!!!!"</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">desc</span> <span class="s2">"Submit a new Beta Build to Crashlytics Beta"</span>
  <span class="n">lane</span> <span class="ss">:beta</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
    <span class="n">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

    <span class="n">gradle</span><span class="p">(</span><span class="ss">task: </span><span class="s2">"clean bundleRelease"</span><span class="p">)</span>
    <span class="n">upload_to_play_store</span><span class="p">(</span>
      <span class="ss">skip_upload_metadata: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">skip_upload_changelogs: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">skip_upload_screenshots: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">skip_upload_images: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">skip_upload_apk: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">track: </span><span class="s1">'internal'</span>
    <span class="p">)</span>
  <span class="k">end</span>

  <span class="n">desc</span> <span class="s2">"Deploy a new version to the Google Play"</span>
  <span class="n">lane</span> <span class="ss">:release</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
    <span class="n">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

    <span class="n">gradle</span><span class="p">(</span><span class="ss">task: </span><span class="s2">"clean bundleRelease"</span><span class="p">)</span>
    <span class="n">upload_to_play_store</span><span class="p">(</span>
      <span class="ss">skip_upload_metadata: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">skip_upload_changelogs: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">skip_upload_screenshots: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">skip_upload_images: </span><span class="kp">true</span><span class="p">,</span>
      <span class="ss">skip_upload_apk: </span><span class="kp">true</span>
    <span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>追加した内容を詳しく見ると下記のようです。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">increment_version_code</span><span class="p">()</span>
  <span class="n">path</span> <span class="o">=</span> <span class="s1">'../app/build.gradle'</span>
  <span class="n">re</span> <span class="o">=</span> <span class="sr">/versionCode\s+(\d+)/</span>

  <span class="n">s</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
  <span class="n">versionCode</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">].</span><span class="nf">to_i</span>
  <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">versionCode</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nf">to_s</span>

  <span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span>
  <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
  <span class="n">f</span><span class="p">.</span><span class="nf">close</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">increment_version_number</span><span class="p">(</span><span class="ss">bump_type: </span><span class="kp">nil</span><span class="p">,</span> <span class="ss">version_number: </span><span class="kp">nil</span><span class="p">)</span>
  <span class="n">path</span> <span class="o">=</span> <span class="s1">'../app/build.gradle'</span>
  <span class="n">re</span> <span class="o">=</span> <span class="sr">/versionName\s+("\d+.\d+.\d+")/</span>
  <span class="n">s</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
  <span class="n">versionName</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">].</span><span class="nf">gsub!</span><span class="p">(</span><span class="s1">'"'</span><span class="p">,</span><span class="s1">''</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">)</span>

  <span class="n">major</span> <span class="o">=</span> <span class="n">versionName</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">to_i</span>
  <span class="n">minor</span> <span class="o">=</span> <span class="n">versionName</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">to_i</span>
  <span class="n">patch</span> <span class="o">=</span> <span class="n">versionName</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nf">to_i</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">bump_type</span> <span class="o">==</span> <span class="s1">'major'</span><span class="p">)</span>
      <span class="n">major</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="n">minor</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">patch</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">elsif</span> <span class="p">(</span><span class="n">bump_type</span> <span class="o">==</span> <span class="s1">'minor'</span><span class="p">)</span>
      <span class="n">minor</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="n">patch</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">elsif</span> <span class="p">(</span><span class="n">bump_type</span> <span class="o">==</span> <span class="s1">'patch'</span><span class="p">)</span>
      <span class="n">patch</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">end</span>

  <span class="k">if</span><span class="p">(</span><span class="n">version_number</span><span class="p">)</span>
    <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\"</span><span class="si">#{</span><span class="n">version_number</span><span class="si">}</span><span class="se">\"</span><span class="s2">"</span>
  <span class="k">else</span>
    <span class="n">s</span><span class="p">[</span><span class="n">re</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\"</span><span class="si">#{</span><span class="n">major</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">minor</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">patch</span><span class="si">}</span><span class="se">\"</span><span class="s2">"</span>
  <span class="k">end</span>

  <span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span>
  <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
  <span class="n">f</span><span class="p">.</span><span class="nf">close</span>
  <span class="n">increment_version_code</span><span class="p">()</span>
<span class="k">end</span>
</code></pre></div></div><p>アンドロイドはiOSと違ってアプリのバージョンをアップデートする機能が提供されていません。(私が探せなかったかも知れないです。もし、分かる方はフィドバックお願いします。)したがって、アンドロイドのversionCodeとversionNameをアップデートする機能を実装しました。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
<span class="o">...</span>
</code></pre></div></div><p>updateバージョンの部分はiOSで説明したので省略します。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lane</span> <span class="ss">:beta</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
  <span class="n">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

  <span class="n">gradle</span><span class="p">(</span><span class="ss">task: </span><span class="s2">"clean bundleRelease"</span><span class="p">)</span>
  <span class="n">upload_to_play_store</span><span class="p">(</span>
    <span class="ss">skip_upload_metadata: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">skip_upload_changelogs: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">skip_upload_screenshots: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">skip_upload_images: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">skip_upload_apk: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">track: </span><span class="s1">'internal'</span>
  <span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>アンドロイドはgradleのcleanとbundleReleaseでアプリをビルドするようにしました。(<code class="language-plaintext highlighter-rouge">assembleRelease</code>ではありません。)また、upload_to_play_storeの<code class="language-plaintext highlighter-rouge">track: 'internal'</code>を使ってinternal test用でデプロイするようにしました。</p><p>アンドロイドはiOSとは違ってRelease notes(change log)を作成する必要がありません。だから、ストアーと関係ある全ての機能はskipするように設定しました。</p><p>最後にbundleReleaseをを使ってaabファイルを生成してアップロードする予定なので、skip_upload_apkをtrueで設定しました。</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">desc</span> <span class="s2">"Deploy a new version to the Google Play"</span>
<span class="n">lane</span> <span class="ss">:release</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
  <span class="n">updateVersion</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

  <span class="n">gradle</span><span class="p">(</span><span class="ss">task: </span><span class="s2">"clean bundleRelease"</span><span class="p">)</span>
  <span class="n">upload_to_play_store</span><span class="p">(</span>
    <span class="ss">skip_upload_metadata: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">skip_upload_changelogs: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">skip_upload_screenshots: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">skip_upload_images: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">skip_upload_apk: </span><span class="kp">true</span>
  <span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>グーグルプレイにデプロイするスクリプトです。iOSと同じようにするため<code class="language-plaintext highlighter-rouge">lane :deploy</code>を<code class="language-plaintext highlighter-rouge">lane :release</code>で変更しました。</p><p>upload_to_play_storeのtrackパレメーターが無いこと以外はbeta用と同じなので詳しく説明は省略します。</p><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h3 id="アンドロイドのfastlane実行">アンドロイドのfastlane実行</h3><p>fastlaneを使ってアンドロイドを自動デプロイする準備が終わりました。今からfastlaneを使ってアプリを自動デプロイしてみます。</p><p>下記のコマンドを使ってReact Nativeで作成したアプリをinternal testへデプロイしてみます。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cd android</span>
fastlane beta version:patch
</code></pre></div></div><p>デプロイが終わるまで、結構な時間がかかります。デプロイが終わったら下記のような画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-fastlane-beta.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイドinternal testデプロイ"/></p><p>もちろんPlay store consoleでもinternal testへ上手くデプロイされたことが確認できます。</p><p>じゃ、今から下記のコマンドを使って実際デプロイをやってみます。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cd android</span>
fastlane release version:patch
</code></pre></div></div><p>デプロイが完了されたら、下記のような画面が確認できます。</p><p><img src="/assets/images/category/react-native/2020/fastlane/android-fastlane-release.jpg" alt="Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイドアプリストアーデプロイ"/></p><p>また、グーグルプレイストアにも上手くデプロイされたことが確認できます。</p><div class="in-feed-ads"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7987914246691031" data-ad-slot="2718813593"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><h2 id="packagejson">package.json</h2><p>私はこのように作ったfastlaneを実行するコマンドを下記のようにpackage.jsonへ作成して使っています。</p><div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="nl">"beta:android"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run prebuild-android &amp;&amp; cd ./android &amp;&amp; bundle exec fastlane beta version:patch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"beta:ios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cd ./ios &amp;&amp; bundle exec fastlane beta version:patch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"beta"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run beta:android &amp;&amp; npm run beta:ios"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"release:android"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run prebuild-android &amp;&amp; cd ./android &amp;&amp; bundle exec fastlane release version:patch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"release:ios"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cd ./ios &amp;&amp; bundle exec fastlane release version:patch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"release"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run release:android &amp;&amp; npm run release:ios"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre></div></div><h2 id="gitignore">gitignore</h2><p>fastlaneを使ってデプロイすると、それによるファイルだちが生成されます。gitで管理しないようにするため<code class="language-plaintext highlighter-rouge">.gitignore</code>ファイルへ下記の内容を追加します。</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
<span class="c"># fastlane</span>
ios/<span class="k">*</span>.mobileprovision
ios/<span class="k">*</span>.cer
ios/<span class="k">*</span>.dSYM.zip
android/fastlane/README.md
ios/fastlane/README.md
</code></pre></div></div><h2 id="完了">完了</h2><p>これでfastlaneを使ってReact Nativeを作成したアプリを自動デプロイする方法についてみてみました。このブログで説明した内容はもちろんNativeで開発したアプリでも活用できるので、たくさんの方にやくにたてらいいかと思います。</p><p>このfastlaneを導入して時間を節約できたし、楽になって嬉しいです。皆さんもぜひ使ってみてください。</p><div class="sponsor_container"><a href="https://github.com/sponsors/dev-yakuza" target="_blank" rel="noopener" style=" background-color: #e6ebf1; background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%); background-position: -0.5em; color: #24292e; text-decoration: none; border: 1px solid rgba(27, 31, 35, 0.35); padding: 6px 10px; user-select: none; background-repeat: repeat-x; background-position: -1px -1px; background-size: 110% 110%; border: 1px solid rgba(27, 31, 35, 0.2); border-radius: 0.25em; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; white-space: nowrap; vertical-align: middle; font-size: 17px; font-family: 'Lato', sans-serif !important; margin: 10px; display: inline-block; "><svg style="color: #ea4aaa; vertical-align: text-bottom !important;" viewBox="0 0 12 16" version="1.1" width="16" height="20" aria-hidden="true"><path fill-rule="evenodd" d="M8.727 3C7.091 3 6.001 4.65 6.001 4.65S4.909 3 3.273 3C1.636 3 0 4.1 0 6.3 0 9.6 6 14 6 14s6-4.4 6-7.7C12 4.1 10.364 3 8.727 3z"></path></svg> Github Sponsor </a><style> .bmc-button img { width: 27px !important; margin-bottom: 1px !important; border: none !important; vertical-align: middle !important; } .bmc-button { line-height: 36px !important; height: 37px !important; text-decoration: none !important; display: inline-block !important; color: #ffffff !important; background-color: #ff813f !important; border-radius: 3px !important; border: 1px solid transparent !important; padding: 0px 9px !important; font-size: 17px !important; letter-spacing: -0.08px !important; margin: 10px !important; font-family: 'Lato', sans-serif !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; -o-transition: 0.3s all linear !important; -webkit-transition: 0.3s all linear !important; -moz-transition: 0.3s all linear !important; -ms-transition: 0.3s all linear !important; transition: 0.3s all linear !important; } .bmc-button:hover, .bmc-button:active, .bmc-button:focus { -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; text-decoration: none !important; box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important; opacity: 0.85 !important; color: #ffffff !important; }</style><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"/><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/j0cXhWiza" rel="noopener noreferrer nofollow"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"/><span style="margin-left:5px">Buy me a coffee</span></a></div><p><code class="language-plaintext highlighter-rouge"> 私のブログが役に立ちましたか？下にコメントを残してください。それは私にとって大きな大きな力になります！ </code></p></article><div class="col-lg-2 col-md-1 d-none d-lg-block right-ads"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle sticky-top" style="display:block; padding-top: 80px; margin-bottom: 80px;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="9858937018" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7987914246691031" data-ad-slot="1936214968" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><div class="post-list-container"><div class="header"><div class="header-title">Posts</div><div id="search-bar"><label for="search" style="width: 0; height: 0; overflow: hidden; float: left;">Search</label><i class="fa fa-search" aria-hidden="true"></i><input id="search" type="text" placeholder="Search..."/></div></div><div class="body"><div class="list-group"></div></div><div class="footer"><ul class="pagination"><li class="page-item page-item--previous"><div class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span><span class="sr-only">Previous</span></div></li><li class="page-item page-item--next"><div class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span><span class="sr-only">Next</span></div></li></ul></div></div><script type="text/javascript">document.addEventListener("DOMContentLoaded",function(){function e(e,a){$(".page").remove(),$(".page-item--link").remove();var t=$(".post-list-container .body .list-group");e.forEach(function(e,i){var s=Math.floor(i/8)+1,n=t.find(".page-"+s),o=!1===a&&e.url.indexOf(location.pathname)>=0?"active":"",l="";if(l+='<a href="'+e.url+'" class="list-group-item list-group-item-action flex-column align-items-start '+o+'">',l+='  <div class="d-flex w-100 justify-content-between">',l+='    <div class="mb-1">'+e.title+"</div>",l+="  </div>",l+='  <div class="body-text">'+e.description+"</div>",l+="</a>",n.length>0)n.addClass(!0===a&&1===s?"active":o),n.append(l);else{var p="";p+='<div class="page page-'+s+" "+(!0===a&&1===s?"active":o)+'">',p+=l,p+="</div>",t.append(p)}var d="";d+='<li class="page-item page-item--link '+o+'" data-page="'+s+'">',d+='  <div class="page-link" data-page="'+s+'">',d+=s,d+="  </div>",d+="</li>",0===$('.post-list-container .footer .page-item[data-page="'+s+'"]').length&&$(".post-list-container .footer .page-item--next").before(d),!0===a?$("li[data-page=1]").addClass("active"):"active"===o&&$("li[data-page="+s+"]").addClass(o),s>1&&$(".footer").css("display","flex")})}var a=[];$.get("/api/react-native/posts.json",function(t){a=t,t.length>0&&($(".post-list-container").show(),e(t,!1))}),$("body").on("click",".page-link",function(){var e=$(".post-list-container .body .list-group"),a=$(".footer .pagination"),t=a.find(".page-item.active"),i=t.find(".page-link").data("page"),s=$(this).data("page");if($(this).closest(".page-item").hasClass("page-item--previous"))s=i>1?i-1:1;else if($(this).closest(".page-item").hasClass("page-item--next")){var n=a.find(".page-item--link").length;s=i<n?i+1:n}else var s=$(this).data("page");e.find(".page").removeClass("active"),e.find(".page-"+s).addClass("active"),a.find(".page-item").removeClass("active"),a.find('.page-link[data-page="'+s+'"]').closest(".page-item").addClass("active")}),$("#search").on("keyup",function(){var t=this.value.toLowerCase(),i=[];if($(".footer .pagination"),t.length>0){for(var s=0;s<a.length;s++){var n=a[s];(n.title.toLowerCase().indexOf(t)>=0||n.description.toLowerCase().indexOf(t)>=0)&&i.push(n)}e(i,!0)}else e(a,!1)})});</script></div><div class="col-lg-8 col-md-10 mx-auto"><hr/><div id="disqus_thread"></div><script>var disqus_config=function(){this.page.url="https://dev-yakuza.posstree.com/react-native/fastlane/",this.page.identifier="https://dev-yakuza.posstree.com/react-native/fastlane/"};!function(){var t=document,e=t.createElement("script");e.src="https://https-dev-yakuza-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div></div><footer><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto share-title"> SHARE </div><div class="col-lg-8 col-md-10 mx-auto"><ul class="list-inline text-center"><li class="list-inline-item"><a href="https://twitter.com/intent/tweet?text=Fastlaneを使ってアプリのデプロイを自動化する&url=https://dev-yakuza.posstree.com/react-native/fastlane/" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Twitter </div></a></li><li class="list-inline-item"><a href="https://www.facebook.com/sharer/sharer.php?u=https://dev-yakuza.posstree.com/react-native/fastlane/" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Facebook </div></a></li><li class="list-inline-item"><a href="https://dev-yakuza.posstree.com/feed.xml" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss-square fa-stack-1x fa-inverse" aria-hidden="true"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> RSS </div></a></li></ul><p class="copyright text-muted"> Copyright &copy; dev.yakuza@gmail.com 2021 </p></div></div></div></footer><script src="/assets/vendor/jquery/jquery.min.js"></script><script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script><script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script><script src="/assets/scripts.js?v=20210428"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/railscasts.min.css"></body></html>